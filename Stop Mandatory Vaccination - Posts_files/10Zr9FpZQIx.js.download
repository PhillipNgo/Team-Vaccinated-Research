if (self.CavalryLogger) { CavalryLogger.start_js(["ys5Aq"]); }

__d("UFICommentFilterFallbackWarning.react",["cx","fbt","React","UFIPagerGenerator","UFIPaging","WebCommentViewOption","distinctArrayBy"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;function j(a,c,d){var e=c.availableComments;c=c.repliesMap;d?d=c[a]||[]:d=e||[];d=b("distinctArrayBy")(d,function(a){return a.id});return d.length}i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.shouldRender=function(a,c,d,e){__p&&__p();if(!a)return!1;var f=a.availableComments,g=a.commentCounts,h=a.deletedCounts,i=a.hasPagedToplevel,k=a.orderingMode,l=a.ranges,m=a.repliesExpandedMap,n=a.repliesMap;if(!f||!g||!h||!k||!l||!m||!n)return!1;f=Math.max((g[c]||0)-(h[c]||0),0);n=l[c];if(!n||!f||k!==b("WebCommentViewOption").RANKED_THREADED||e&&!m[c]||!e&&!i)return!1;g=j(c,a,e);h=n.isLoadingPrev();l=n.isLoadingNext();m=n.getOffset();i=n.getLength();a=b("UFIPagerGenerator").isBottomPager(e,k,c);n=Math.min(i,f);if(d===b("UFIPaging").ALL)return!h&&!l&&m===0&&i>=f&&g<n;else if(!a&&d===b("UFIPaging").TOP||a&&d===b("UFIPaging").BOTTOM)return!h&&m===0&&g<n;else if(!a&&d===b("UFIPaging").BOTTOM||a&&d===b("UFIPaging").TOP)return!l&&m+i>=f&&g<n;return!1};a.prototype.$1=function(){__p&&__p();var a=this.props,b=a.asReplyWarning;a=a.ufiProps;a=a||{};var c=a.feedback,d=a.orderingMode;a=c&&c.orderingmodes||[];c=a.find(function(a){return a&&a.value===d});a=c&&c.name;if(b)if(a)return h._("{ordering mode name} is selected, so some replies may have been filtered out.",[h._param("ordering mode name",a)]);else return h._("Some replies may have been filtered out by the selected ordering mode.");else if(a)return h._("{ordering mode name} is selected, so some comments may have been filtered out.",[h._param("ordering mode name",a)]);else return h._("Some comments may have been filtered out by the selected ordering mode.")};a.prototype.render=function(){var a=this.props,c=a.ufiProps,d=a.targetID,e=a.pagingDirection;a=a.asReplyWarning;return!this.constructor.shouldRender(c,d,e,a)?null:b("React").createElement("div",{className:"_2ah8 _4oep UFIRow"},b("React").createElement("div",{className:"_2ah9"},this.$1()))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("Typeahead",["ArbiterMixin","BehaviorsMixin","DataStore","DOM","Event","Parent","Run","Style","emptyFunction","ge","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(h,b("mixin")(b("ArbiterMixin"),b("BehaviorsMixin")));g=c&&c.prototype;function h(a,c,d,e){"use strict";g.constructor.call(this),this.args={data:a,view:c,core:d},b("DataStore").set(e,"Typeahead",this),this.element=e}h.prototype.init=function(a){"use strict";this.init=b("emptyFunction"),this.getCore(),this.getView().setAccessibilityControlElement(this.getCore().getElement()),this.proxyEvents(),this.initBehaviors(a||[]),this.inform("init",this),this.data.bootstrap(),this.core.focus()};h.prototype.getData=function(){"use strict";if(!this.data){var a=this.args.data;this.data=a;this.data.init()}return this.data};h.prototype.getView=function(){"use strict";if(!this.view){var a=this.args.view,c=a.node||b("ge")(a.node_id);c||(c=b("DOM").create("div",{className:"uiTypeaheadView"}),b("DOM").appendContent(this.element,c));typeof a.ctor==="string"?this.view=new window[a.ctor](c,a.options||{}):this.view=new a.ctor(c,a.options||{});this.view.init();this.view.setTypeahead(this.element)}return this.view};h.prototype.getCore=function(){"use strict";if(!this.core){var a=this.args.core;typeof a.ctor==="string"?this.core=new window[a.ctor](a.options||{}):this.core=new a.ctor(a.options||{});this.core.init(this.getData(),this.getView(),this.getElement())}return this.core};h.prototype.getElement=function(){"use strict";return this.element};h.prototype.setHeight=function(a){"use strict";a!=="auto"&&(a+="px"),b("Style").set(this.element,"height",a)};h.prototype.swapData=function(a){"use strict";return this.$Typeahead1(a,!0)};h.prototype.swapDataNoCoreReset=function(a){"use strict";return this.$Typeahead1(a,!1)};h.prototype.$Typeahead1=function(a,b){"use strict";var c=this.core;this.data=this.args.data=a;a.init();c&&(c.data=a,c.initData(),b&&c.reset(),this.proxyEvents());a.bootstrap();return a};h.prototype.proxyEvents=function(){"use strict";[this.data,this.view,this.core].forEach(function(a){a.subscribe(a.events,this.inform.bind(this))},this)};h.prototype.initBehaviors=function(c){"use strict";c.forEach(function(c){typeof c==="string"?a.TypeaheadBehaviors&&a.TypeaheadBehaviors[c]?a.TypeaheadBehaviors[c](this):b("Run").onLoad(function(){a.TypeaheadBehaviors&&(a.TypeaheadBehaviors[c]||b("emptyFunction"))(this)}.bind(this)):this.enableBehavior(c)},this)};h.getInstance=function(a){"use strict";a=b("Parent").byClass(a,"uiTypeahead");return a?b("DataStore").get(a,"Typeahead"):null};h.initNow=function(a,b,c){"use strict";c&&c.init(a),a.init(b)};h.init=function(a,c,d,e){"use strict";b("DOM").isNodeOfType(a,["input","textarea"])||(a=b("DOM").scry(a,"input")[0]||b("DOM").scry(a,"textarea")[0]);var f=!1;try{f=document.activeElement===a}catch(a){}if(f)h.initNow(c,d,e);else var g=b("Event").listen(a,"focus",function(){h.initNow(c,d,e),g.remove()})};e.exports=h}),null);
__d("BasicTypeaheadRenderer",["BadgeHelper","DOM"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c){__p&&__p();c=[];a.icon&&c.push(b("DOM").create("img",{alt:"",src:a.icon}));var d=a.debug_info;d&&c.push(b("DOM").create("span",{className:"debugInfo"},d));if(a.text){d=[a.text];a.is_verified&&d.push(b("BadgeHelper").renderBadge("xsmall","verified"));c.push(b("DOM").create("span",{className:"text"},d))}if(a.subtext){d=[a.subtext];c.push(b("DOM").create("span",{className:"subtext"},d))}d=b("DOM").create("li",{className:a.type||""},c);a.text&&(d.setAttribute("title",a.text),d.setAttribute("aria-label",a.text));return d}a.className="basic";e.exports=a}),null);
__d("createIxElement",["invariant","DOM","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a,c){__p&&__p();var d="img";a.sprited||a.uri||g(0,2521);if(a.sprited){d=b("joinClasses")(d,a.spriteMapCssClass,a.spriteCssClass);var e=b("DOM").create("i",{className:d});c!=null&&b("DOM").setContent(e,b("DOM").create("u",null,c));return e}e=b("DOM").create("img",{className:d,src:a.uri});c!=null&&e.setAttribute("alt",c);a.width&&e.setAttribute("width",a.width);a.height&&e.setAttribute("height",a.height);return e}e.exports=a}),null);
__d("TypeaheadView",["csx","cx","ix","ArbiterMixin","BasicTypeaheadRenderer","CSS","DOM","Event","Parent","$","createIxElement","getElementText","getOrCreateDOMID","mixin"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j;d=babelHelpers.inherits(c,b("mixin")(b("ArbiterMixin")));j=d&&d.prototype;function c(a,c){"use strict";j.constructor.call(this),this.initialized=!1,this.$TypeaheadView1=0,this.element=this.content=b("$").fromIDOrElement(a),Object.assign(this,c)}c.prototype.init=function(){"use strict";this.initialized||(this.initialized=!0,this.initializeEvents(),this.reset())};c.prototype.initializeEvents=function(){"use strict";b("Event").listen(this.element,{mouseup:this.mouseup.bind(this),mouseover:this.mouseover.bind(this)})};c.prototype.setTypeahead=function(a){"use strict";this.typeahead=a};c.prototype.setAccessibilityControlElement=function(a){"use strict";this.accessibilityElement=a};c.prototype.getElement=function(){"use strict";return this.element};c.prototype.mouseup=function(a){"use strict";a.button!=2&&(this.select(!0),a.prevent())};c.prototype.mouseover=function(a){"use strict";if(this.ignoreMouseover){this.ignoreMouseover=!1;return}this.visible&&(this.resetColumn(),this.highlight(this.getIndex(a)))};c.prototype.reset=function(a){"use strict";__p&&__p();a||(this.disableAutoSelect=!1);this.index=-1;this.$TypeaheadView1=0;this.$TypeaheadView2();this.items=[];this.results=[];this.value="";this.content.innerHTML="";this.inform("reset");return this};c.prototype.getIndex=function(a){"use strict";return this.items.indexOf(b("Parent").byTag(a.getTarget(),"li"))};c.prototype.getSelection=function(){"use strict";var a=this.results[this.index]||null;return this.visible?a:null};c.prototype.isEmpty=function(){"use strict";return!this.results.length};c.prototype.isVisible=function(){"use strict";return!!this.visible};c.prototype.show=function(){"use strict";__p&&__p();b("CSS").show(this.element);if(this.results&&this.results.length&&(this.autoSelect&&this.accessibilityElement&&this.selected)){var a=b("DOM").scry(this.selected,'[role="gridcell"]');a=a.length<2?this.selected:a[this.$TypeaheadView1];this.accessibilityElement.setAttribute("aria-activedescendant",b("getOrCreateDOMID")(a))}this.accessibilityElement&&this.accessibilityElement.setAttribute("aria-expanded","true");this.visible=!0;return this};c.prototype.hide=function(){"use strict";b("CSS").hide(this.element);this.accessibilityElement&&(this.accessibilityElement.setAttribute("aria-expanded","false"),this.accessibilityElement.removeAttribute("aria-activedescendant"));this.visible=!1;return this};c.prototype.render=function(a,c,d){"use strict";__p&&__p();this.value=a;if(!c.length){this.accessibilityElement&&this.accessibilityElement.removeAttribute("aria-activedescendant");this.reset(!0);return}a={results:c,value:a};this.inform("beforeRender",a);c=a.results;a=(!this.value||d)&&this.index!==-1?this.index:this.getDefaultIndex(c);this.results=c;b("DOM").setContent(this.content,this.buildResults(c));this.items=this.getItems();this.highlight(a,!1);this.inform("render",this.results)};c.prototype.getItems=function(){"use strict";return b("DOM").scry(this.content,"li")};c.prototype.buildResults=function(c){"use strict";__p&&__p();var d,e=null;typeof this.renderer==="function"?(d=this.renderer,e=this.renderer.className||""):(d=a.TypeaheadRenderers[this.renderer],e=this.renderer);d=d.bind(this);c=c.map(function(a,b){a=a.node||d(a,b);a.setAttribute("role","option");return a});e=b("DOM").create("ul",{className:e,id:"typeahead_list_"+(this.typeahead?b("getOrCreateDOMID")(this.typeahead):b("getOrCreateDOMID")(this.element))},c);e.setAttribute("role","listbox");return e};c.prototype.showLoadingIndicator=function(){"use strict";var a=b("createIxElement")(i("85428"));a=b("DOM").create("li",{className:"typeaheadViewInternalLoading"},a);a=b("DOM").create("ul",{role:"listbox"},a);b("DOM").setContent(this.content,a)};c.prototype.getDefaultIndex=function(a){"use strict";a=this.autoSelect&&!this.disableAutoSelect;return this.index<0&&!a?-1:0};c.prototype.$TypeaheadView2=function(){"use strict";__p&&__p();var a=b("DOM").scry(this.element,".active")[0];a!=null&&b("CSS").removeClass(a,"active");if(this.selected==null||this.index===-1)return;a=b("DOM").scry(this.selected,'[role="gridcell"]');if(a.length<2)return;a=a[this.$TypeaheadView1];b("CSS").addClass(a,"active")};c.prototype.next=function(){"use strict";this.$TypeaheadView1=0,this.highlight(this.index+1),this.inform("next",this.selected)};c.prototype.prev=function(){"use strict";this.$TypeaheadView1=0,this.highlight(this.index-1),this.inform("prev",this.selected)};c.prototype.getCurrentColumnIndex=function(){"use strict";return this.$TypeaheadView1};c.prototype.resetColumn=function(){"use strict";__p&&__p();if(this.selected==null)return;var a=b("DOM").scry(this.selected,'[role="gridcell"]');if(a.length<2)return;this.$TypeaheadView1=0;a=a[this.$TypeaheadView1];this.accessibilityElement.setAttribute("aria-activedescendant",b("getOrCreateDOMID")(a));this.$TypeaheadView2()};c.prototype.nextColumn=function(){"use strict";__p&&__p();if(this.index==-1||this.selected==null)return;var a=b("DOM").scry(this.selected,'[role="gridcell"]');if(a.length<2)return;if(this.$TypeaheadView1<a.length-1){this.$TypeaheadView1++;a=a[this.$TypeaheadView1];this.accessibilityElement.setAttribute("aria-activedescendant",b("getOrCreateDOMID")(a));this.$TypeaheadView2()}else this.next()};c.prototype.prevColumn=function(){"use strict";__p&&__p();if(this.index==-1||this.selected==null)return;var a=b("DOM").scry(this.selected,'[role="gridcell"]');if(a.length<2)return;if(this.$TypeaheadView1>0){this.$TypeaheadView1--;a=a[this.$TypeaheadView1];this.accessibilityElement.setAttribute("aria-activedescendant",b("getOrCreateDOMID")(a));this.$TypeaheadView2()}else this.prev()};c.prototype.getItemText=function(a){"use strict";var c="";a&&(c=a.getAttribute("aria-label"),c||(c=b("getElementText")(a),a.setAttribute("aria-label",c)));return c};c.prototype.setIsViewingSelectedItems=function(a){"use strict";this.viewingSelected=a;return this};c.prototype.getIsViewingSelectedItems=function(){"use strict";return!!this.viewingSelected};c.prototype.highlight=function(a,c){"use strict";__p&&__p();var d=this.selected;d!=null&&(b("CSS").removeClass(d,"selected"),d.setAttribute("aria-selected","false"));a>this.items.length-1?a=-1:a<-1&&(a=this.items.length-1);a>=0&&a<this.items.length?(this.selected=this.items[a],b("CSS").addClass(this.selected,"selected"),this.selected!=null&&this.selected.setAttribute("aria-selected","true"),this.accessibilityElement&&window.setTimeout(function(){var a=b("DOM").scry(this.selected,'[role="gridcell"]');a=a.length<2?this.selected:a[this.$TypeaheadView1];a!=null&&this.accessibilityElement.setAttribute("aria-activedescendant",b("getOrCreateDOMID")(a));this.$TypeaheadView2()}.bind(this),0)):this.accessibilityElement&&this.accessibilityElement.removeAttribute("aria-activedescendant");this.index=a;this.disableAutoSelect=a==-1;c!==!1&&this.inform("highlight",{index:a,selected:this.results[a],element:this.selected})};c.prototype.select=function(a){"use strict";if(this.headerIndex&&a)return;var b=this.index,c=this.results[b],d=this.element.getAttribute("id");if(c){var e=function(c){this.inform("select",{index:b,clicked:!!a,selected:c,id:d,query:this.value,element:this.selected}),this.inform("afterSelect")}.bind(this);this.shouldValidateTypeaheadSelection(c)?this.validateTypeaheadSelection(c,e):e(c)}};c.prototype.shouldValidateTypeaheadSelection=function(a){"use strict";return!1};c.prototype.validateTypeaheadSelection=function(a,b){"use strict"};Object.assign(c.prototype,{events:["highlight","render","reset","select","beforeRender","next","prev"],renderer:b("BasicTypeaheadRenderer"),autoSelect:!1,ignoreMouseover:!1});e.exports=c}),null);
__d("UFI2GIFNUX.react",["fbt","AsyncRequest","React","XFeedNUXSaveSeenStateController","XUIAmbientNUX.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").PureComponent);h&&h.prototype;a.prototype.componentDidMount=function(){var a=b("XFeedNUXSaveSeenStateController").getURIBuilder().setString("key","gif_comments").setBool("seen",!0).getURI();new(b("AsyncRequest"))(a).send()};a.prototype.render=function(){var a=this.props,c=a.onClose;a=a.contextRef;return b("React").createElement(b("XUIAmbientNUX.react"),{alignment:"right",contextRef:a,onCloseButtonClick:c,position:"above",shown:!0},g._("You can now add GIFs to comments"))};function a(){h.apply(this,arguments)}e.exports=a}),null);