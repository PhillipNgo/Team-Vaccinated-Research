if (self.CavalryLogger) { CavalryLogger.start_js(["cVA9d"]); }

__d("OzDashPrefetchCache",["VideoDashPrefetchCache"],(function(a,b,c,d,e,f){"use strict";a.prototype.hasCacheValue=function(a){return b("VideoDashPrefetchCache").hasCacheValue(a)};a.prototype.getCacheValue=function(a){return b("VideoDashPrefetchCache").getCacheValue(a)};a.prototype.getCachedRepresentations=function(a){return null};function a(){}e.exports=a}),null);
__d("OzMosThresholdRestriction",["MosUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c){this.$4=new Map(),this.$1=a,this.$2=b,this.$3=c}a.prototype.$5=function(a,c){var d=null;if(this.$4.get(a))d=this.$4.get(a);else{var e=a.getCustomField("playbackResolutionMos");e!=null&&(d=b("MosUtils").parsePlaybackMos(String(e)),d&&this.$4.set(a,d))}return d!=null?b("MosUtils").getMosValue(d,b("MosUtils").getQualityLabel(c.width,c.height)):null};a.prototype.$6=function(a,b){var c=a.some(function(a){a=this.$5(a,b);return a!=null?a>this.$2&&a<this.$1:!1}.bind(this));return!c?a:a.filter(function(a){a=this.$5(a,b);return a!=null?a<=this.$1:!0}.bind(this))};a.prototype.$7=function(a,b){var c=null;a.forEach(function(a){a=this.$5(a,b);a!=null&&a>this.$1&&(c==null||c>a)&&(c=a)}.bind(this));return c==null?a:a.filter(function(a){a=this.$5(a,b);return a==null?!0:a<=this.$1||a===c}.bind(this))};a.prototype.applyRestriction=function(a,b){return a.length===0?[]:this.$3?this.$7(a,b):this.$6(a,b)};e.exports=a}),null);
__d("oz-player/configs/OzGlobalConfig",[],(function(a,b,c,d,e,f){"use strict";var g=null;a={getBool:function(a,b){return g?g.getBool(a,b):b},getNumber:function(a,b){return g?g.getNumber(a,b):b},getString:function(a,b){return g?g.getString(a,b):b},setGlobalConfig:function(a){g=a}};e.exports=a}),null);
__d("oz-player/networks/OzBandwidthUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){var b=0;for(var c=0;c<a.length;c++)b+=a[c].bytes*8e3/a[c].timeInMs;return b/a.length}function h(a){var b=g(a),c=0;for(var d=0;d<a.length;d++)c+=Math.pow(a[d].bytes*8e3/a[d].timeInMs-b,2);return Math.round(Math.sqrt(c/a.length))}function i(a,b){b=Math.exp(Math.log(.5)/b);var c=0,d=0;for(var e=0;e<a.length;e++){var f=Math.pow(b,a[e].weight);c=a[e].value*(1-f)+c*f;d+=a[e].weight}return Math.round(c/(1-Math.pow(b,d)))}function j(a,b){return i(a.map(function(a){return{value:a.bytes*8e3/a.timeInMs,weight:a.timeInMs/1e3}}),b)}function k(a,b){var c=g(a),d=[];for(var e=0;e<a.length;e++)Math.abs(c-a[e].bytes*8e3/a[e].timeInMs)<b&&d.push(a[e]);return d}function a(a,b,c,d){var e=h(a);a=k(a,e*c);c=j(a,b);return c-e*d}e.exports={getBandwidthEstimate:a,getExponentiallyWeightedMovingAverage:i,getExponentiallyWeightedMovingAverageOfBandwidth:j,getStandardDeviationOfBandwidth:h,getMeanBandwidth:g,getBandwidthSamplesWithinRangeOfMean:k}}),null);
__d("oz-player/shims/OzEventEmitter",["EventEmitter"],(function(a,b,c,d,e,f){"use strict";e.exports=b("EventEmitter")}),null);
__d("oz-player/networks/OzTransformStream",["ReadableStream","WritableStream","oz-player/utils/OzError","oz-player/shims/OzEventEmitter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("oz-player/shims/OzEventEmitter"));g=c&&c.prototype;function a(a){__p&&__p();g.constructor.call(this);this.$OzTransformStream3=function(a){return a};a=a||{};a=a.errorTransform;(a===void 0||a===null)&&(a=this.$OzTransformStream3);var c=a||this.$OzTransformStream3;this.writable=new(b("WritableStream"))({start:function(a){this.$OzTransformStream2=a}.bind(this),write:function(a){this.emit("writableWrite",a);try{this.onDataWritten(a)}catch(a){this.$OzTransformStream1.error(new(b("oz-player/utils/OzError"))({type:"OZ_STREAM",description:"Error from write handler: "+this.constructor.name,extra:{originalError:a}}))}this.$OzTransformStream1.enqueue(a)}.bind(this),close:function(){this.emit("writableClose");try{this.onClose()}catch(a){this.$OzTransformStream1.error(new(b("oz-player/utils/OzError"))({type:"OZ_STREAM",description:"Error from close handler: "+this.constructor.name,extra:{originalError:a}}))}this.$OzTransformStream1.close()}.bind(this),abort:function(a){a=c(a);this.$OzTransformStream1.error(a)}.bind(this)});this.readable=new(b("ReadableStream"))({start:function(a){this.$OzTransformStream1=a}.bind(this),cancel:function(a){this.emit("readableCancel",a),this.$OzTransformStream2.error(a)}.bind(this)})}a.prototype.onDataWritten=function(a){};a.prototype.onClose=function(){};e.exports=a}),null);
__d("oz-player/utils/OzResourceTimingUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){if(!performance.getEntriesByName)return null;a=performance.getEntriesByName(a,"resource");return a.reduce(function(a,b){if(a==null)return b;return typeof b.responseEnd==="number"&&typeof b.responseStart==="number"&&typeof b.startTime==="number"&&typeof a.responseEnd==="number"&&typeof a.responseStart==="number"&&typeof a.requestStart==="number"&&typeof a.startTime==="number"?b.responseEnd<a.responseEnd?a:b:null},null)};e.exports={getLatestResourceTimingEntry:a}}),null);
__d("oz-player/networks/OzNetworkRequestStreamBandwidthReporter",["oz-player/utils/OzResourceTimingUtils","oz-player/networks/OzTransformStream"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry;function a(a){__p&&__p();this.$8=Date.now();this.$9=0;this.$10=0;this.$11=function(){};this.$12=function(){};this.$13=new(b("oz-player/networks/OzTransformStream"))();var c=a.stream,d=a.loggerProvider,e=a.byteCountPerSample,f=a.minimumBytesToSampleOnClose,g=a.minimumSampleDuration,h=a.maximumSampleBandwidth,i=a.usePerformanceEntryOnClose;a=a.ignoreTimeToResponseStart;this.$1=c;this.$14=d;this.$2=e;this.$3=f;this.$4=g;this.$5=h;this.$6=i;this.$7=a;this.$13.addListener("writableWrite",this.$15.bind(this));this.$13.addListener("writableClose",this.$16.bind(this))}a.prototype.getTransformStream=function(){return this.$13};a.prototype.onBandwidthSample=function(a){this.$11=a};a.prototype.onTimeToFirstByteMsSample=function(a){this.$12=a};a.prototype.$17=function(a,b){if(this.$14){var c=Date.now();this.$14&&this.$14.getOperationLogger("bandwidth_sampled").setLength(a).setClientTimeEnd(c).setClientTimeBegin(c-b).log()}this.$11(a,b)};a.prototype.$15=function(a){a.length!=void 0&&(this.$10+=a.length),this.$18()};a.prototype.$16=function(){__p&&__p();var a=Date.now()-this.$8,b=this.$1.getLastRequestUrl();b=b!=null?g(b):null;b&&this.$12(b.responseStart-b.requestStart);if(this.$3>0&&a>0&&this.$9===0&&this.$10>=this.$3){if(this.$6&&b&&b.responseEnd&&b.startTime){b=this.$7?b.responseEnd-b.responseStart:b.responseEnd-b.startTime;a=b>0?b:a}this.$19(a)||this.$17(this.$10,a)}};a.prototype.$19=function(a){var b=this.$10*8/(a/1e3);return a<this.$4&&b>this.$5};a.prototype.$18=function(){var a=Date.now(),b=a-this.$8;this.$10*8/(b/1e3);this.$2>0&&this.$10>=this.$9+this.$2&&!this.$19(b)&&(this.$17(this.$10-this.$9,b),this.$8=a,this.$9=this.$10)};e.exports=a}),null);
__d("oz-player/shims/OzRoundRobinPriorityTaskQueue",["RoundRobinPriorityTaskQueue"],(function(a,b,c,d,e,f){"use strict";e.exports=b("RoundRobinPriorityTaskQueue")}),null);
__d("oz-player/shims/OzSequentialTaskScheduler",["SequentialTaskScheduler"],(function(a,b,c,d,e,f){"use strict";e.exports=b("SequentialTaskScheduler")}),null);
__d("oz-player/networks/OzStreamingTaskQueueProvider",["oz-player/shims/OzRoundRobinPriorityTaskQueue","oz-player/shims/OzSequentialTaskScheduler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map(),h=new Map(),i=2,j=2,k=6e4;function a(a){var c=g.get(a);if(!c){c=new(b("oz-player/shims/OzRoundRobinPriorityTaskQueue"))(i,j);var d=new(b("oz-player/shims/OzSequentialTaskScheduler"))(c,{taskTimeout:k});d.start();g.set(a,c);h.set(a,d)}return c}e.exports={getQueue:a,OZ_QUEUE_MAX_PRIORITY:i}}),null);
__d("oz-player/shims/OzBandwidthCache",["CacheStorage","Run"],(function(a,b,c,d,e,f){function a(a){"use strict";this.$1=new(b("CacheStorage"))("localstorage","_video_"),b("Run").onUnload(function(){this.$1.set("bandwidthEstimate",a())}.bind(this))}a.prototype.getCachedBandwidth=function(){"use strict";return this.$1.get("bandwidthEstimate")};e.exports=a}),null);
__d("oz-player/networks/OzBandwidthEstimator",["oz-player/configs/OzGlobalConfig","oz-player/networks/OzStreamingTaskQueueProvider","oz-player/shims/OzBandwidthCache","oz-player/shims/OzEventEmitter","oz-player/networks/OzBandwidthUtils","oz-player/networks/OzNetworkRequestStreamBandwidthReporter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("oz-player/networks/OzBandwidthUtils").getBandwidthEstimate,i=b("oz-player/networks/OzBandwidthUtils").getExponentiallyWeightedMovingAverage,j=b("oz-player/networks/OzBandwidthUtils").getExponentiallyWeightedMovingAverageOfBandwidth,k=b("oz-player/networks/OzBandwidthUtils").getStandardDeviationOfBandwidth,l=.9,m=5e5,n=2e4;c=babelHelpers.inherits(a,b("oz-player/shims/OzEventEmitter"));g=c&&c.prototype;function a(){g.constructor.call(this),this.$OzBandwidthEstimator1=[],this.$OzBandwidthEstimator2=[],this.$OzBandwidthEstimator3=new(b("oz-player/shims/OzBandwidthCache"))(function(){return this.getAdjustedBandwidth(b("oz-player/configs/OzGlobalConfig"))}.bind(this))}a.prototype.getBandwidth=function(a){var b=h(this.$OzBandwidthEstimator1,a.getNumber("bandwidth_estimator_half_life",6),a.getNumber("bandwidth_estimator_outlier_exclusion_factor",2),a.getNumber("bandwidth_estimator_std_dev_penalty_factor",.1));return b>0?b:this.$OzBandwidthEstimator4(a)};a.prototype.getEstimatedTimeToFirstByteMs=function(a){return this.$OzBandwidthEstimator2.length>0?i(this.$OzBandwidthEstimator2.map(function(a){return{value:a,weight:1}}),a.getNumber("time_to_first_byte_estimate_half_life_ms",500)):null};a.prototype.$OzBandwidthEstimator4=function(a){var b=m;if(a.getBool("use_cached_bandwidth",!1)){a=this.$OzBandwidthEstimator3.getCachedBandwidth();typeof a==="number"&&a>0&&(b=a)}return b};a.prototype.getStandardDeviationOfBandwidth=function(){return k(this.$OzBandwidthEstimator1)};a.prototype.getSampleCount=function(){return this.$OzBandwidthEstimator1.length};a.prototype.getAdjustedBandwidth=function(a){if(this.$OzBandwidthEstimator1.length===0)return this.$OzBandwidthEstimator4(a);var b=a.getNumber("bandwidth_estimator_variance_penalty_half_life",0)>0?this.$OzBandwidthEstimator5(a):this.$OzBandwidthEstimator6(a);return this.$OzBandwidthEstimator7(a,b)};a.prototype.$OzBandwidthEstimator7=function(a,c){var d=Math.max(0,b("oz-player/networks/OzStreamingTaskQueueProvider").getQueue("video").getLength()-a.getNumber("bandwidth_penalty_additional_video_start",0));a=a.getNumber("bandwidth_penalty_per_additional_video",0);d=Math.min(l,d*a);return c*(1-d)};a.prototype.$OzBandwidthEstimator5=function(a){var b=j(this.$OzBandwidthEstimator1,a.getNumber("bandwidth_estimator_half_life",6)),c=j(this.$OzBandwidthEstimator1,a.getNumber("bandwidth_estimator_variance_penalty_half_life",0));a=c<b?a.getNumber("bandwidth_estimator_variance_penalty_down_factor",0):a.getNumber("bandwidth_estimator_variance_penalty_up_factor",0);c=Math.abs(b-c)*a;return b-c};a.prototype.$OzBandwidthEstimator6=function(a){return this.getBandwidth(a)};a.prototype.pipeThroughReporter=function(a,c,d){return{startStream:function(e){var f=new(b("oz-player/networks/OzNetworkRequestStreamBandwidthReporter"))({stream:c,loggerProvider:d,byteCountPerSample:a.getNumber("byte_count_per_sample",n),minimumBytesToSampleOnClose:a.getNumber("minimum_bytes_to_sample_on_close",0),minimumSampleDuration:a.getNumber("minimum_bandwidth_sample_duration",0),maximumSampleBandwidth:a.getNumber("maximum_bandwidth_sample_bandwidth",999999999),usePerformanceEntryOnClose:a.getBool("use_performance_entry_on_stream_close",!1),ignoreTimeToResponseStart:a.getBool("ignore_time_to_response_start",!1)});f.onBandwidthSample(this.$OzBandwidthEstimator8.bind(this));f.onTimeToFirstByteMsSample(this.$OzBandwidthEstimator9.bind(this));return c.startStream(e).then(function(b){return c.retrievedFromCache()&&a.getBool("exclude_prefetch_bandwidth_samples",!1)?b:b.pipeThrough(f.getTransformStream())})}.bind(this)}};a.prototype.$OzBandwidthEstimator8=function(a,c){this.$OzBandwidthEstimator1.push({bytes:a,timeInMs:c}),this.$OzBandwidthEstimator1.length>b("oz-player/configs/OzGlobalConfig").getNumber("max_bandwidth_sample_count",15)&&this.$OzBandwidthEstimator1.splice(0,1),this.emit("bandwidth_sampled")};a.prototype.$OzBandwidthEstimator9=function(a){this.$OzBandwidthEstimator2.push(a),this.$OzBandwidthEstimator2.length>b("oz-player/configs/OzGlobalConfig").getNumber("max_bandwidth_sample_count",15)&&this.$OzBandwidthEstimator2.splice(0,1)};e.exports=new a()}),null);
__d("oz-player/utils/OzAbrUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a,b,c,d){var e=a.getNumber("resolution_constraint_factor",0);if(e===0)return b;a=b.filter(function(a){return a.getWidth()<=c.width*d*e||a.getHeight()<=c.height*d*e});return!a.length?[b[0]]:a};b=function(a,b,c,d,e,f){b=b?a.getNumber("min_switch_interval",0):a.getNumber("initial_switch_interval",0);d=d>=a.getNumber("abr_min_bandwidth_samples",0);var g=a.getNumber("abr_eval_buffer_threshold",0);c=!g||c>=g;g=null;e+a.getNumber("min_eval_interval",1e3)>Date.now()?g="min_eval_interval":f+b>Date.now()?g="min_switch_interval":!d?g="min_bandwidth_samples":c||(g="buffer_threshold_not_satisfied");return g};e.exports={excludeLargeRepresentations:a,getReasonToPreventEvaluation:b}}),null);
__d("oz-player/utils/OzBufferingUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();c=.1;d=1;var g=.2;function a(a,b,c,d){__p&&__p();if(h(a,c,d))return!0;c=a.currentTime;d=0;for(var e=0;e<a.buffered.length;e++){var f=a.buffered.start(e),g=a.buffered.end(e);if(f<=c&&g>=c){d=g;break}}return d-c>b}function h(a,b,c){var d=a.currentTime,e=0;for(var f=0;f<a.buffered.length;f++){var h=a.buffered.start(f),i=a.buffered.end(f);if(h<=d&&i>=d){e=i;break}}return(!c.getBool("reach_end_only_when_video_ended",!1)||a.ended)&&(Math.abs(e-b)<=g||Math.abs(d-b)<=g)}function b(a,b){a=a?a.getSourceBufferState():null;if(!a)return 0;b=b.getCurrentTime();return i(b,a.getBufferedRanges())}function i(a,b){__p&&__p();var c=null;for(var b=b,d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;f.startTime<=a&&f.endTime>a&&(c=f)}return!c?0:c.endTime-a}e.exports={getBufferAheadFromCurrentTime:i,getBufferAheadFromPlaybackStates:b,hasEnoughBuffer:a,hasBufferedToOrReachedEnd:h,BUFFER_OVERFLOW_THRESHOLD:d,BUFFER_UNDERFLOW_THRESHOLD:c,BUFFER_FUDGE_FACTOR:g}}),null);
__d("oz-player/utils/OzPlaybackRestrictionsUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b,c){if(c.length===0)return[];c.sort(function(a,b){return a.getBandwidth()-b.getBandwidth()});return a.reduce(function(a,c){return c.applyRestriction(a,b)},c)};e.exports={applyVideoPlaybackRestrictions:a}}),null);
__d("RepomenAbrManager",["oz-player/networks/OzBandwidthEstimator","oz-player/utils/OzAbrUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzPlaybackRestrictionsUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/utils/OzAbrUtils").excludeLargeRepresentations,h=b("oz-player/utils/OzAbrUtils").getReasonToPreventEvaluation,i=b("oz-player/utils/OzBufferingUtils").getBufferAheadFromPlaybackStates,j=b("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions;function a(a,b,c,d,e,f,g){this.$2=0,this.$3=Date.now(),this.$4=!1,this.$12=null,this.$1=a,this.$5=b,this.$6=c,this.$7=d,this.$8=e,this.$10=f,this.$13=g}a.prototype.setSourceBuffer=function(a){this.$9=a};a.prototype.getBestRepresentation=function(){__p&&__p();var a=i(this.$9,this.$8),c=h(this.$1,this.$4,a,b("oz-player/networks/OzBandwidthEstimator").getSampleCount(),this.$2,this.$3);if(c!==null&&c!==void 0){this.$12=c;return this.$5}c=Date.now();this.$2=c;var d=this.$10.getDimensions(),e=g(this.$1,this.$6,d,this.$13);e=j(this.$7,d,e);d=b("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(this.$1);var f,k=this.$1.getNumber("bandwidth_abr_ratio",1),l=this.$1.getNumber("bandwidth_abr_bias",0),m=this.$1.getNumber("buffer_abr_ratio",1),n=this.$1.getNumber("buffer_abr_bias",0);k=k*(d/1e6-l)+m*(a-n);for(var d=0;d<e.length;d++)e[d].getBandwidth()/1e6<k&&(f=e[d]);f=f||e[0];this.$5!==f&&(this.$4=!0,this.$3=c,this.$5=f);this.$12="repomen";return f};a.prototype.getStreamSegmentsCountStrategy=function(){return null};a.prototype.getLastEvaluationReason=function(){return this.$12};e.exports=a}),null);
__d("OzMinimumSmallestDimensionRestriction",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=a}a.prototype.applyRestriction=function(a,b){if(a.length===0)return[];b=a.filter(function(a){var b=a.getWidth();a=a.getHeight();b=b<a?b:a;return b>=this.$1}.bind(this));return b.length>0?b:[a[a.length-1]]};e.exports=a}),null);
__d("oz-player/networks/createNetworkError",["oz-player/utils/OzError"],(function(a,b,c,d,e,f){"use strict";a=function(a,c,d,e,f){return new(b("oz-player/utils/OzError"))({type:"OZ_NETWORK",description:f,extra:{originalError:a,code:c.toString(),headers:d,url:e}})};e.exports=a}),null);
__d("OzNetworkRequestStreamHandler",["invariant","createErrorStream","oz-player/networks/createNetworkError","oz-player/networks/OzTransformStream","oz-player/utils/OzResourceTimingUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry;function a(a,b){this.$1=a,this.$2=b}a.prototype.onResponse=function(a){__p&&__p();return function(c){__p&&__p();var d=c.body,e=c.headers,f=c.status;c=c.ok;e&&e.has("x-fb-video-replica")&&(c=!1,f=417);if(!c)return b("createErrorStream")(b("oz-player/networks/createNetworkError")(new Error("HTTP status not OK"),f,e,a,"HTTP error."));d.getReader||g(0,3287);c=d.tee();f=new(b("oz-player/networks/OzTransformStream"))();f.addListener("writableClose",function(){var b={},c=h(a);c&&(b.lat=Math.round(c.responseStart-c.requestStart).toString());this.$2&&e&&this.$2(e,b)}.bind(this));c[1].pipeThrough(f);if(!this.$1.getBool("throw_network_error_during_stream",!1))return c[0];d=new(b("oz-player/networks/OzTransformStream"))({errorTransform:function(c){return c instanceof TypeError?b("oz-player/networks/createNetworkError")(c,0,null,a,"Network failure."):c}});return c[0].pipeThrough(d)}.bind(this)};a.prototype.onError=function(a){return function(c){if(c instanceof TypeError)return b("createErrorStream")(b("oz-player/networks/createNetworkError")(c,0,null,a,"Network failure."));throw c}};e.exports=a}),null);
__d("VideoPlayerOzWWWConfig",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="oz_www_";function a(a){this.$1=a}a.prototype.getBool=function(a,b){return this.$1.getBool(g+a,b)};a.prototype.getNumber=function(a,b){return this.$1.getNumber(g+a,b)};a.prototype.getString=function(a,b){return this.$1.getString(g+a,b)};a.prototype.setContext=function(a,b){this.$1.setContext(a,b)};e.exports=a}),null);
__d("VideoPlayerOzWWWGlobalConfig",["VideoPlayerShakaGlobalConfig"],(function(a,b,c,d,e,f){"use strict";var g="oz_www_";a={getBool:function(a,c){return b("VideoPlayerShakaGlobalConfig").getBool(g+a,c)},getNumber:function(a,c){return b("VideoPlayerShakaGlobalConfig").getNumber(g+a,c)},getString:function(a,c){return b("VideoPlayerShakaGlobalConfig").getString(g+a,c)}};e.exports=a}),null);
__d("oz-player/loggings/OzOperationLoggerBase",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=a}a.prototype.start=function(){this.getClientTimeBegin()||this.setClientTimeBegin(Date.now());return this};a.prototype.log=function(){this.getClientTimeEnd()||this.setClientTimeEnd(Date.now())};a.prototype.setError=function(a){this.$2=a;return this};a.prototype.setResult=function(a){this.$3=a;return this};a.prototype.setType=function(a){this.$4=a;return this};a.prototype.setClientTimeBegin=function(a){this.$5=a;return this};a.prototype.setClientTimeEnd=function(a){this.$6=a;return this};a.prototype.setSegmentCount=function(a){this.$13=a;return this};a.prototype.setTimeToFirstByte=function(a){this.$7=a;return this};a.prototype.setTimeToLastByte=function(a){this.$8=a;return this};a.prototype.setTimeToRequestStart=function(a){this.$9=a;return this};a.prototype.setTimeToRequestSent=function(a){this.$10=a;return this};a.prototype.setReason=function(a){this.$11=a;return this};a.prototype.setResource=function(a){this.$12=a;return this};a.prototype.setSegmentStartTime=function(a){this.$14=a;return this};a.prototype.setSegmentEndTime=function(a){this.$15=a;return this};a.prototype.setLength=function(a){this.$16=a;return this};a.prototype.setLiveheadPosition=function(a){this.$17=a;return this};a.prototype.setManifestType=function(a){this.$18=a;return this};a.prototype.setPriorityFloat=function(a){this.$19=a;return this};a.prototype.setAppendedBufferMs=function(a){this.$20=a;return this};a.prototype.setInitiator=function(a){this.$21=a;return this};a.prototype.setPreloadTime=function(a){this.$22=a;return this};a.prototype.setConcluder=function(a){this.$23=a;return this};a.prototype.setPreviousRepresentationID=function(a){this.$24=a;return this};a.prototype.setRepresentationID=function(a){this.$25=a;return this};a.prototype.setState=function(a){this.$26=a;return this};a.prototype.getError=function(){return this.$2};a.prototype.getResult=function(){return this.$3};a.prototype.getType=function(){return this.$4};a.prototype.getClientTimeBegin=function(){return this.$5};a.prototype.getClientTimeEnd=function(){return this.$6};a.prototype.getTimeToRequestStart=function(){return this.$9};a.prototype.getTimeToRequestSent=function(){return this.$10};a.prototype.getReason=function(){return this.$11};a.prototype.getResource=function(){return this.$12};a.prototype.getOperationName=function(){return this.$1};a.prototype.getSegmentStartTime=function(){return this.$14};a.prototype.getSegmentEndTime=function(){return this.$15};a.prototype.getLength=function(){return this.$16};a.prototype.getLiveheadPosition=function(){return this.$17};a.prototype.getManifestType=function(){return this.$18};a.prototype.getPriorityFloat=function(){return this.$19};a.prototype.getAppendedBufferMs=function(){return this.$20};a.prototype.getInitiator=function(){return this.$21};a.prototype.getPreloadTime=function(){return this.$22};a.prototype.getConcluder=function(){return this.$23};e.exports=a}),null);
__d("oz-player/loggings/OzDevConsolePerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i;function j(){var a;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];(a=console).debug.apply(a,["[oz]"].concat(c))}function k(){var a;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];(a=console).error.apply(a,["[oz]"].concat(c))}function l(a,b){return Math.floor(a).toString().padStart(b,"0")}function m(a,b){b===void 0&&(b=null);var c=function(a){return l(a.getHours(),2)+":"+l(a.getMinutes(),2)+":"+l(a.getSeconds(),2)+" "+l(a.getMilliseconds(),3)},d=b?b-a:0;return"["+c(a)+(b?" - "+c(b):"")+" ("+d+" ms)]"}function n(a){return a==="failed"?k:j}g=babelHelpers.inherits(o,b("oz-player/loggings/OzPerfLoggerProviderBase"));g&&g.prototype;o.prototype.createOperationLogger=function(a){return new p(a)};o.prototype.createLoggerProvider=function(){return new o()};function o(){g.apply(this,arguments)}h=babelHelpers.inherits(p,b("oz-player/loggings/OzOperationLoggerBase"));i=h&&h.prototype;p.prototype.log=function(){i.log.call(this);var a=this.getClientTimeBegin()||0,b=this.getClientTimeEnd();b=b?new Date(b):null;var c=this.getResult()||"success",d=this.getType(),e=this.getInitiator(),f=this.getResource();n(c)("["+c+"]",this.getOperationName()+": "+m(new Date(a),b),d?""+d:"",e||"",f||"")};function p(){h.apply(this,arguments)}e.exports={OzDevConsolePerfLoggerProvider:o,OzDevConsoleOperationLogger:p}}),null);
__d("oz-player/loggings/OzLoggingUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c){a=a.getOperationLogger(b).start();try{b=c(a);return b}catch(b){a.setError(b);throw b}finally{a.log()}}function b(a,b,c,d,e){__p&&__p();d===void 0&&(d=function(){});e===void 0&&(e=function(){});var f=b.getOperationLogger(c).start();d(f);return a.then(function(a){e(f);f.log();return a})["catch"](function(a){f.setError(a);e(f);f.log();throw a})}e.exports={executeOperationAndLog:a,monitorPromiseAndLogOperation:b}}),null);
__d("oz-player/loggings/OzMultiDestinationPerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;a=babelHelpers.inherits(i,b("oz-player/loggings/OzPerfLoggerProviderBase"));g=a&&a.prototype;function i(a){g.constructor.call(this),this.$OzMultiDestinationPerfLoggerProvider1=a}i.prototype.createOperationLogger=function(a){var b=new j(a,this.$OzMultiDestinationPerfLoggerProvider1.map(function(b){return b.getOperationLogger(a)}));return b};i.prototype.createLoggerProvider=function(){return new i(this.$OzMultiDestinationPerfLoggerProvider1)};c=babelHelpers.inherits(j,b("oz-player/loggings/OzOperationLoggerBase"));h=c&&c.prototype;function j(a,b){h.constructor.call(this,a),this.$OzMultiDestinationOperationLogger1=b}j.prototype.start=function(){h.start.call(this);this.$OzMultiDestinationOperationLogger1.forEach(function(a){return a.start()});return this};j.prototype.setResult=function(a){h.setResult.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setResult(a)});return this};j.prototype.setError=function(a){h.setError.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setError(a)});return this};j.prototype.setType=function(a){h.setType.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setType(a)});return this};j.prototype.setClientTimeEnd=function(a){h.setClientTimeEnd.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setClientTimeEnd(a)});return this};j.prototype.setClientTimeBegin=function(a){h.setClientTimeBegin.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setClientTimeBegin(a)});return this};j.prototype.setSegmentCount=function(a){h.setSegmentCount.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setSegmentCount(a)});return this};j.prototype.setTimeToFirstByte=function(a){h.setTimeToFirstByte.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setTimeToFirstByte(a)});return this};j.prototype.setTimeToLastByte=function(a){h.setTimeToLastByte.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setTimeToLastByte(a)});return this};j.prototype.setTimeToRequestStart=function(a){h.setTimeToRequestStart.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setTimeToRequestStart(a)});return this};j.prototype.setTimeToRequestSent=function(a){h.setTimeToRequestSent.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setTimeToRequestSent(a)});return this};j.prototype.setReason=function(a){h.setReason.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setReason(a)});return this};j.prototype.setResource=function(a){h.setResource.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setResource(a)});return this};j.prototype.setSegmentStartTime=function(a){h.setSegmentStartTime.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setSegmentStartTime(a)});return this};j.prototype.setSegmentEndTime=function(a){h.setSegmentEndTime.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setSegmentEndTime(a)});return this};j.prototype.setAppendedBufferMs=function(a){h.setAppendedBufferMs.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setAppendedBufferMs(a)});return this};j.prototype.setLength=function(a){h.setLength.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setLength(a)});return this};j.prototype.setLiveheadPosition=function(a){h.setLiveheadPosition.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setLiveheadPosition(a)});return this};j.prototype.setManifestType=function(a){h.setManifestType.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setManifestType(a)});return this};j.prototype.setPriorityFloat=function(a){h.setPriorityFloat.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setPriorityFloat(a)});return this};j.prototype.setInitiator=function(a){h.setInitiator.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setInitiator(a)});return this};j.prototype.setPreloadTime=function(a){h.setPreloadTime.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setPreloadTime(a)});return this};j.prototype.setConcluder=function(a){h.setConcluder.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setConcluder(a)});return this};j.prototype.setPreviousRepresentationID=function(a){h.setPreviousRepresentationID.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setPreviousRepresentationID(a)});return this};j.prototype.setRepresentationID=function(a){h.setRepresentationID.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setRepresentationID(a)});return this};j.prototype.setState=function(a){h.setState.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setState(a)});return this};j.prototype.log=function(){h.log.call(this),this.$OzMultiDestinationOperationLogger1.forEach(function(a){return a.log()})};e.exports={OzMultiDestinationPerfLoggerProvider:i}}),null);
__d("oz-player/shims/OzSubscriptionsHandler",["SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";e.exports=b("SubscriptionsHandler")}),null);
__d("oz-player/loggings/OzOperationLoggerObserver",["oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1=new(b("oz-player/shims/OzSubscriptionsHandler"))()}a.prototype.observe=function(a,b){var c;a=a.map(function(a){var c=a.setOperationLoggedListener(function(a){b.getOperationLogger(a.getOperationName()).setClientTimeBegin(a.getClientTimeBegin()||0).setClientTimeEnd(a.getClientTimeEnd()||0).setLength(a.getLength()).setResult(a.getResult()||"success").setInitiator(a.getInitiator()).setType(a.getType()).log()});a.activate();return c});(c=this.$1).addSubscriptions.apply(c,a)};a.prototype.destroy=function(){this.$1.release()};e.exports=a}),null);
__d("oz-player/shims/ozvariant",["invariant"],(function(a,b,c,d,e,f){e.exports=b("invariant")}),null);
__d("oz-player/manifests/OzRepresentation",["oz-player/shims/ozvariant","oz-player/utils/OzError"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,b,c,d,e,f,g,h){this.$4=[],this.$1=a,this.$7=b,this.$2=c,this.$3=d,this.$5=e,this.$6=f,this.$8=g,this.$9=h}g.prototype.getID=function(){return this.$7};g.prototype.getBandwidth=function(){return this.$6};g.prototype.getMimeCodecs=function(){return this.$2};g.prototype.getInitSegment=function(){return this.$3};g.prototype.getCustomFieldFirstSegment=function(){return this.$8};g.prototype.getCustomField=function(a){if(this.$9==null||!this.$9[a])throw new(b("oz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Custom field "+a+" is not specified by caller"});a=this.$9[a];try{return a(this.$1)}catch(a){return null}};g.prototype.updateWith=function(a){a instanceof g||b("oz-player/shims/ozvariant")(0,229),this.$5.updateWith(a.$5)};g.prototype.getSegmentByTime=function(a){return this.$5.getSegmentByTime(a)};g.prototype.getSegment=function(a){return this.$5.getSegment(a)};g.prototype.getSegmentAfter=function(a){return this.$5.getSegmentAfter(a)};g.prototype.isEndingSegment=function(a){return this.$5.isEndingSegment(a)};g.prototype.addUpdateListener=function(a){return this.$5.addUpdateListener(a)};g.prototype.getTimeRanges=function(){return this.$5.getTimeRanges()};g.prototype.blockTimeRange=function(a){this.$5.blockTimeRange(a)};e.exports=g}),null);
__d("oz-player/manifests/OzVideoRepresentation",["oz-player/manifests/OzRepresentation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("oz-player/manifests/OzRepresentation"));g=c&&c.prototype;function a(a,b,c,d,e,f,h,i,j,k){g.constructor.call(this,a,b,c,d,e,f,h,i),this.$OzVideoRepresentation5=null,this.$OzVideoRepresentation1=j,this.$OzVideoRepresentation2=k,this.$OzVideoRepresentation4=i,this.$OzVideoRepresentation3=a}a.prototype.getWidth=function(){return this.$OzVideoRepresentation1};a.prototype.getHeight=function(){return this.$OzVideoRepresentation2};a.prototype.getQualityLabel=function(){if(this.$OzVideoRepresentation5!==null&&this.$OzVideoRepresentation5!==void 0)return this.$OzVideoRepresentation5;var a=this.$OzVideoRepresentation4?this.$OzVideoRepresentation4.qualityLabel:null;a&&(this.$OzVideoRepresentation5=a(this.$OzVideoRepresentation3));(this.$OzVideoRepresentation5==null||this.$OzVideoRepresentation5=="")&&(this.$OzVideoRepresentation5=this.getHeight().toString()+"p");return this.$OzVideoRepresentation5||""};e.exports=a}),null);
__d("oz-player/media_source/OzMediaErrorProvider",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=a}a.prototype.getMediaErrorName=function(){var a=this.$1.error;return a&&a.message?this.$2(a.message):null};a.prototype.getErrorCode=function(){var a=this.$1.error;return a&&a.code?a.code:null};a.prototype.$2=function(a){a=a.split(":")[0];return a||""};e.exports=a}),null);
__d("oz-player/shims/OzDeferred",["Deferred"],(function(a,b,c,d,e,f){"use strict";e.exports=b("Deferred")}),null);
__d("oz-player/shims/OzEventListener",["EventListener"],(function(a,b,c,d,e,f){"use strict";e.exports=b("EventListener")}),null);
__d("oz-player/shims/OzMaybeNativePromise",["Promise","MOzExperiments","MaybeNativePromise"],(function(a,b,c,d,e,f){"use strict";b("Promise").resolve(),e.exports=b("MOzExperiments").use_native_promise?b("MaybeNativePromise"):b("Promise")}),null);
__d("oz-player/states/OzObservedSourceBufferState",["oz-player/shims/OzEventListener","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$2=new(b("oz-player/shims/OzSubscriptionsHandler"))(),this.$3=[],this.$4=function(){var a=[];for(var b=0;b<this.$1.buffered.length;b++)a.push({startTime:this.$1.buffered.start(b),endTime:this.$1.buffered.end(b)});this.$3=a}.bind(this),this.$1=a,this.$2.addSubscriptions(b("oz-player/shims/OzEventListener").listen(this.$1,"updateend",this.$4),b("oz-player/shims/OzEventListener").listen(this.$1,"error",this.$4))}a.prototype.getBufferedRanges=function(){return this.$3};a.prototype.addEventListener=function(a,c){return b("oz-player/shims/OzEventListener").listen(this.$1,"updateend",c)};a.prototype.destroy=function(){this.$2.release(),this.$2.engage()};e.exports=a}),null);
__d("oz-player/utils/OzSourceBufferUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=0;for(var c=0;c<a.buffered.length;c++)b+=a.buffered.end(c)-a.buffered.start(c);return b}e.exports={getTotalBufferedTime:a}}),null);
__d("oz-player/utils/ozConcatArrayBuffer",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b){var c=new Uint8Array(a.byteLength+b.byteLength);c.set(new Uint8Array(a),0);c.set(new Uint8Array(b),a.byteLength);return c.buffer};e.exports=a}),null);
__d("oz-player/media_source/SourceBufferManager",["oz-player/utils/OzSourceBufferUtil","oz-player/loggings/OzLoggingUtils","oz-player/shims/OzDeferred","oz-player/shims/OzEventListener","oz-player/utils/OzError","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzObservedSourceBufferState","oz-player/utils/ozConcatArrayBuffer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/utils/OzSourceBufferUtil").getTotalBufferedTime,h=b("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation;function a(a,c,d){this.$2=null,this.$3=new(b("oz-player/shims/OzSubscriptionsHandler"))(),this.$5=!1,this.$6=[],this.$10=function(){this.$2&&this.$2.resolve(),this.$2=null}.bind(this),this.$11=function(){var a=this.$2;a&&setTimeout(function(){var c=this.$8.getErrorCode(),d=this.$8.getMediaErrorName(),e={};c!==null&&c!==void 0&&(e.code=c.toString());c=new(b("oz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:d!==null&&d!==void 0?d:"Unknown SourceBuffer Append Error",extra:e});a.reject(c);this.$2=null}.bind(this),0)}.bind(this),this.$1=a,this.$9=c,this.$3.addSubscriptions(b("oz-player/shims/OzEventListener").listen(this.$1,"updateend",this.$10),b("oz-player/shims/OzEventListener").listen(this.$1,"error",this.$11)),this.$7=new(b("oz-player/states/OzObservedSourceBufferState"))(this.$1),this.$8=d}a.prototype.queueData=function(a,c,d){c===void 0&&(c=null);d===void 0&&(d=0);var e=new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise"));this.$6.push({data:a,deferred:e,loggerProvider:c,appendTarget:d});a=e.getPromise();this.$5||this.$12();return a};a.prototype.cancelOperationAndCleanQueue=function(){__p&&__p();var a=this.$13();this.$6.forEach(function(b){b=b.deferred;b.reject(a)});this.$6=[];this.$1.abort();var c=b("oz-player/shims/OzMaybeNativePromise").resolve(),d=this.$2;d&&(d.reject(a),c=d.getPromise()["catch"](function(){}));this.$4&&(this.$4.reject(a),this.$4=null);return c};a.prototype.getSourceBufferState=function(){return this.$7};a.prototype.clearRange=function(a,b){this.$1.remove(a,b)};a.prototype.$14=function(a){var c=this.$2=new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise"));c=c.getPromise();a&&h(c,a,"wait_for_source_buffer");return c};a.prototype.$15=function(a,c){__p&&__p();if(this.$2!==null)return b("oz-player/shims/OzMaybeNativePromise").reject(this.$16("cannot have concurrent appends"));var d=function(){__p&&__p();if(this.$9.getBool("sbm_recursively_waits_for_update_end",!1)&&this.$1.updating)return this.$14(c).then(d)["catch"](function(a){if(this.$9.getBool("enable_appends_on_wait_update_end_failure",!1))return d();throw a}.bind(this));var e=this.$2=new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise"));try{this.$1.appendBuffer(a)}catch(a){var f=this.$8.getErrorCode();f=new(b("oz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:a.message,extra:{originalError:a,code:f!==null&&f!==void 0?f.toString():"0"}});this.$2=null;e.reject(f)}f=e.getPromise();c&&h(f,c,"append",function(b){b.setLength(a.byteLength)});var i=this.$9.getBool("log_appended_secs",!1)?g(this.$1):0;return f.then(function(){return this.$9.getBool("log_appended_secs",!1)?g(this.$1)-i:0}.bind(this))}.bind(this);if(!this.$9.getBool("sbm_waits_for_update_end",!1))return d();return!this.$9.getBool("sbm_recursively_waits_for_update_end",!1)&&this.$1.updating?this.$14(c).then(d)["catch"](function(a){if(this.$9.getBool("enable_appends_on_wait_update_end_failure",!1))return d();throw a}.bind(this)):d()};a.prototype.$12=function(){__p&&__p();if(this.$5)return b("oz-player/shims/OzMaybeNativePromise").reject(this.$16("Another unit of queued data is being appended."));var a=this.$6.shift();if(!a){this.$5=!1;return b("oz-player/shims/OzMaybeNativePromise").resolve()}var c=a.data,d=a.deferred,e=a.loggerProvider;a=a.appendTarget;this.$5=!0;a=c instanceof ReadableStream?this.$17(c,e,a):this.$15(c,e);return a["catch"](function(a){d.reject(a);return 0}).then(function(a){d.resolve(a),this.$5=!1,this.$12()}.bind(this))};a.prototype.$17=function(a,c,d){__p&&__p();var e=new ArrayBuffer(0),f=a.getReader(),g=function(){__p&&__p();var a=new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise"));this.$4=a;f.read().then(function(b){a.resolve(b),this.$4=null}.bind(this))["catch"](function(b){a.reject(b),this.$4=null}.bind(this));return a.getPromise().then(function(a){__p&&__p();var f=a.done;a=a.value;if(f)return e.byteLength>0?this.$15(e,c):b("oz-player/shims/OzMaybeNativePromise").resolve(0);f=a;d>0&&(a instanceof Uint8Array&&(a=a.buffer),e=b("oz-player/utils/ozConcatArrayBuffer")(e,a),f=e);if(f&&f.byteLength>=d){e=new ArrayBuffer(0);return this.$15(f,c).then(function(a){return g().then(function(b){return b+a})})}return g()}.bind(this))}.bind(this);return g()};a.prototype.$16=function(a){a=new Error(a);a.name="invariant_violation";return a};a.prototype.$13=function(){var a=new Error("operation is cancelled");a.name="cancelled";return a};a.prototype.destroy=function(){this.$2&&this.$2.reject(this.$13()),this.$2=null,this.$3.release(),this.$3=new(b("oz-player/shims/OzSubscriptionsHandler"))(),this.$7.destroy()};a.prototype.getDebug=function(){return{SourceBuffer:this.$1}};e.exports=a}),null);
__d("oz-player/media_source/MediaSourceManager",["oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/shims/OzDeferred","oz-player/shims/OzEventListener","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/media_source/OzMediaErrorProvider","oz-player/media_source/SourceBufferManager"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation,h=b("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider;function a(a,c,d){d===void 0&&(d=new h([])),this.$2=null,this.$4=new(b("oz-player/shims/OzSubscriptionsHandler"))(),this.$6=[],this.$7=[],this.$9=!1,this.$12=function(){this.$13()||(this.$9=!1);if(!this.$14())return;var a=this.$7.shift();a&&(a(this.$3),this.$9=!0)}.bind(this),this.$5=d,this.$10=c,this.$1=a,this.$3=new MediaSource(),this.$1.src=window.URL.createObjectURL(this.$3),this.$8=new(b("oz-player/media_source/OzMediaErrorProvider"))(this.$1),g(this.$11(),this.$5,"media_source_open")}a.prototype.$11=function(){if(this.$3.readyState==="open")return b("oz-player/shims/OzMaybeNativePromise").resolve();var a=new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise"));this.$4.addSubscriptions(b("oz-player/shims/OzEventListener").listen(this.$3,"sourceopen",function(){a.resolve(),this.$12()}.bind(this)));return a.getPromise()};a.prototype.createSourceBufferManager=function(a,c){c===void 0&&(c=!1);return this.$11().then(function(){var d=this.$3.addSourceBuffer(a);c&&!isNaN(this.$3.duration)&&(d.appendWindowEnd=this.$3.duration);this.$6.push(d);this.$4.addSubscriptions(b("oz-player/shims/OzEventListener").listen(d,"updateend",this.$12));return new(b("oz-player/media_source/SourceBufferManager"))(d,this.$10,this.$8)}.bind(this))};a.prototype.getMediaSource=function(){return this.$3};a.prototype.notifyEndOfStream=function(){this.$7.push(function(a){this.$5.getOperationLogger("end_of_stream").log(),a.endOfStream()}.bind(this)),this.$12()};a.prototype.updateDuration=function(a){this.$7.push(function(b){b.duration=a}),this.$12()};a.prototype.detach=function(){this.$1.removeAttribute("src");for(var a=0;a<this.$3.sourceBuffers.length;a++){var b=this.$3.sourceBuffers[a];this.$3.removeSourceBuffer(b)}this.$4.release();this.$4.engage();this.$7=[];this.$9=!1};a.prototype.$14=function(){return!this.$13()&&this.$3.readyState==="open"&&!this.$9};a.prototype.$13=function(){return this.$6.some(function(a){return a.updating})};e.exports=a}),null);
__d("oz-player/media_source/OzMediaSeekableRangeManager",["oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();this.$5=function(){var a=this.$2;if(!a)return;a=a.getTimeRanges();if(!a.length)return;a=a[a.length-1];var b=this.$1.getMediaSource();this.$4.getBool("update_media_source_duration",!1)&&(b.duration===Infinity||b.duration<a.endTime||isNaN(b.duration))&&this.$1.updateDuration(a.endTime)}.bind(this),this.$1=a,this.$3=new(b("oz-player/shims/OzSubscriptionsHandler"))(),this.$4=c,this.$5()}a.prototype.setTimeRangeProvider=function(a){this.$3.release();this.$3.engage();this.$3.addSubscriptions(a.addUpdateListener(this.$5));this.$2=a;if(this.$4.getBool("update_duration_if_mpd_synchronously_has_timeline_info",!1)&&a.getTimeRanges().length){a=a.getTimeRanges()[a.getTimeRanges().length-1].endTime;this.$1.updateDuration(a)}};a.prototype.listenToMediaStreamInitAppended=function(a){return a.addListener("initAppended",function(){if(this.$4.getBool("update_duration_when_init_appended",!1)){var a=this.$1.getMediaSource();(a.duration===Infinity||isNaN(a.duration))&&this.$5()}}.bind(this))};a.prototype.destroy=function(){this.$3.release()};e.exports=a}),null);
__d("oz-player/shims/OzURI",["URI"],(function(a,b,c,d,e,f){"use strict";e.exports=b("URI")}),null);
__d("oz-player/mocks/MockRequestParamCreator",["oz-player/shims/OzURI"],(function(a,b,c,d,e,f){"use strict";a.prototype.createRequestParam=function(a,c){a=new(b("oz-player/shims/OzURI"))(a);var d=c.startByte,e=c.endByte;d===0&&(e===null||e===void 0)||(a=a.addQueryData({bytestart:c.startByte}),e!==null&&e!==void 0&&(a=a.addQueryData({byteend:e})));return{uri:a,http:{credentials:"same-origin"}}};function a(){}e.exports=a}),null);
__d("oz-player/networks/OzFetchWithCache",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=window.fetch;function a(a,b,c,d){__p&&__p();d===void 0&&(d=null);if(!g)throw new Error("fetch api is missing");d=d?d.getCacheValue(b):null;var e=!1;d?(e=!0,d=d.then(function(a){var b=new ReadableStream({start:function(b){var c=new Uint8Array(a.response);b.enqueue(c);b.close()}});return{body:b,status:200,headers:null,ok:!0}})["catch"](function(d){if(a.getBool("retry_fetch_on_prefetch_error",!1))return g(b,c);else throw new TypeError()})):d=g(b,c);return{promise:d,retrievedFromCache:e}}e.exports=a}),null);
__d("oz-player/networks/OzNetworkRequestStream",["oz-player/networks/OzFetchWithCache","createErrorStream"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c,d,e){e===void 0&&(e=null),this.$4=!1,this.$1=b,this.$2=c,this.$5=d,this.$6=e,this.$7=a}a.prototype.startStream=function(a){__p&&__p();a=this.$2.createRequestParam(this.$1,a);var c=a.uri;a=a.http;var d=c.toString();this.$3=d;c=b("oz-player/networks/OzFetchWithCache")(this.$7,d,a,this.$6);a=c.promise;c=c.retrievedFromCache;this.$4=c;return a.then(this.$5.onResponse(d),this.$5.onError(d))["catch"](function(a){return b("createErrorStream")({type:"stream_processing",status:0,url:d,message:"Stream processing error."+a})})};a.prototype.getLastRequestUrl=function(){return this.$3};a.prototype.retrievedFromCache=function(){return this.$4};e.exports=a}),null);
__d("oz-player/networks/getOzSegmentStreamableRange",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();if(!a.length)return null;var b=a[0].getURI().toString(),c=a[0].getByteRange();if(!c)return null;var d=c;for(var e=1;e<a.length;e++){var f=a[e];if(f.getURI().toString()!==b)return null;f=f.getByteRange();if(!d||!f)return null;if(d.endByte===null||f.startByte!==d.endByte+1)return null;d=f}return{startByte:c.startByte,endByte:d.endByte}}e.exports=a}),null);
__d("oz-player/shims/OzPausableRangeStream",["PausableRangeStream"],(function(a,b,c,d,e,f){"use strict";e.exports=b("PausableRangeStream")}),null);
__d("oz-player/utils/OzNetworkRequestLoggingUtils",["oz-player/utils/OzResourceTimingUtils"],(function(a,b,c,d,e,f){"use strict";var g=b("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry,h=function(a,b){b=g(b);b&&a.setTimeToFirstByte(Math.round(b.responseStart-b.startTime)).setTimeToLastByte(Math.round(b.responseEnd-b.startTime)).setTimeToRequestStart(Math.round(b.requestStart-b.startTime))};a=function(a,b,c,d,e){d.length&&a.setSegmentCount(d.length),b&&h(a,b),a.setResource(b||null).setInitiator(c?"prefetch":"fetch").setTimeToRequestSent(Math.round(Math.floor(e)))};e.exports={setFetchStreamLoggingAttributes:a,setPerformanceLoggingAttributes:h}}),null);
__d("oz-player/networks/OzNetworkManager",["oz-player/loggings/OzLoggingUtils","oz-player/mocks/MockRequestParamCreator","oz-player/shims/OzPausableRangeStream","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzError","oz-player/utils/OzNetworkRequestLoggingUtils","oz-player/networks/getOzSegmentStreamableRange","oz-player/networks/OzBandwidthEstimator","oz-player/networks/OzNetworkRequestStream"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation,h=b("oz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes;function a(a,c,d){c===void 0&&(c=null),this.$1=a,this.$2=new(b("oz-player/mocks/MockRequestParamCreator"))(),this.$3=c,this.$4=d}a.prototype.request=function(a,c){c===void 0&&(c=null);a.length>0||b("oz-player/shims/ozvariant")(0,212);var d=b("oz-player/networks/getOzSegmentStreamableRange")(a)||{startByte:0,endByte:null},e=new(b("oz-player/networks/OzNetworkRequestStream"))(this.$1,a[0].getURI(),this.$2,this.$4,this.$3);return this.$5(d,e,c,a)};a.prototype.createPausableStream=function(a,c){a.length>0||b("oz-player/shims/ozvariant")(0,212);var d=b("oz-player/networks/getOzSegmentStreamableRange")(a)||{startByte:0,endByte:null},e=new(b("oz-player/networks/OzNetworkRequestStream"))(this.$1,a[0].getURI(),this.$2,this.$4,this.$3);return{pausableStream:this.$6(d,e,c),loggingPayloads:{getRequestUrl:function(){return e.getLastRequestUrl()||null},isPrefetch:function(){return e.retrievedFromCache()},segments:a}}};a.prototype.requestRawUrl=function(a,c,d){d===void 0&&(d=null);a=new(b("oz-player/networks/OzNetworkRequestStream"))(this.$1,new(b("oz-player/shims/OzURI"))(a),{createRequestParam:function(a,b){return{uri:a,http:c}}},this.$4,this.$3);var e={startByte:0,endByte:null};return this.$5(e,a,d)};a.prototype.$6=function(a,c,d){c=b("oz-player/networks/OzBandwidthEstimator").pipeThroughReporter(this.$1,c,d);return new(b("oz-player/shims/OzPausableRangeStream"))(a,c,{fixStreamingUndefinedEndByte:!0,enablePausableStreamResumeFromStartDangerously:!0,fixPausePreReadableStream:!0,useNativePromiseInDeferredBuffer:this.$1.getBool("use_native_promise",!1),throwErrorOnUnexpectedException:this.$1.getBool("pausable_stream_throws_error_on_unexpected_exception",!1),throwErrorWhenAborted:this.$1.getBool("pausable_stream_throws_error_when_aborted",!1)})};a.prototype.$5=function(a,b,c,d){__p&&__p();d===void 0&&(d=[]);var e=this.$6(a,b,c);a=e.startStream();var f=this.$7(a);c&&g(f,c,"fetch_stream",function(){},function(a){h(a,b.getLastRequestUrl(),b.retrievedFromCache(),d,0)});return{getStream:function(){return e.getStream()},cancel:function(){return e.pauseStream()},getStatusChangePromise:function(){return f}}};a.prototype.$7=function(a){return a.then(function(a){a=a.statusPromise;return a.then(function(a){if(a==="stream_done"||!this.$1.getBool("enable_network_manager_error",!1))return"done";throw new(b("oz-player/utils/OzError"))({description:a,type:"OZ_NETWORK"})}.bind(this))}.bind(this))};a.getStreamableSegmentsRange=function(a){if(!a.length)return[];return!b("oz-player/networks/getOzSegmentStreamableRange")(a)?[a[0]]:a.slice(0)};e.exports=a}),null);
__d("oz-player/utils/OzNumericalHelper",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=1e-5;function h(a,b,c){c===void 0&&(c=g);return Math.abs(b-a)<=c}function i(a,b,c){c===void 0&&(c=g);return a>b&&!h(a,b,c)}function j(a,b,c){c===void 0&&(c=g);return a<b&&!h(a,b,c)}function a(a,b,c){c===void 0&&(c=g);return j(a,b,c)||h(a,b,c)}function b(a,b,c){c===void 0&&(c=g);return i(a,b,c)||h(a,b,c)}e.exports={lessThan:j,greaterThan:i,equalTo:h,lessThanOrEqual:a,greaterThanOrEqual:b}}),null);
__d("oz-player/utils/OzNumericalRangeUtil",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=.01;function h(a,b){b=b.rangeEnd;return b===null||b===void 0?!1:Math.abs(a.rangeStart-b)>g&&a.rangeStart>b}function i(a,b){a=a.rangeEnd;b=b.rangeEnd;if(a===null||a===void 0)return!0;return b===null||b===void 0?!1:Math.abs(a-b)>g&&a>b}function j(a,b){b=b.rangeEnd;return b===null||b===void 0?!1:Math.abs(a-b)>g&&a>b}function k(a,b){return a>b-g}a.prototype.mergeSortedRanges=function(a){__p&&__p();if(!a.length)return[];var b=[],c=a[0];b.push(c);for(var d=1;d<a.length;d++){var e=a[d];if(!i(e,c))continue;else h(e,c)?(c={rangeStart:e.rangeStart,rangeEnd:e.rangeEnd},b.push(c)):c.rangeEnd=e.rangeEnd}return b};a.prototype.diffSortedRanges=function(a,b){return a.reduceRight(function(a,c){j(c.rangeStart,b)||j(b.rangeStart,c)?a.push(c):(b.rangeEnd!=null&&(c.rangeEnd==null||j(c.rangeEnd,b))&&a.push({rangeStart:b.rangeEnd,rangeEnd:c.rangeEnd}),k(b.rangeStart,c.rangeStart)&&a.push({rangeStart:c.rangeStart,rangeEnd:b.rangeStart}));return a},[]).filter(function(a){return a.rangeEnd==null||a.rangeStart<a.rangeEnd}).reverse()};a.prototype.findCurrentRangeIndex=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.rangeStart;if(k(a,e)&&!j(a,d))return c}return-1};a.prototype.findNextRangeIndex=function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d=d.rangeStart;if(!k(a,d))return c}return-1};a.prototype.findDiffCoveredByRanges=function(a,b,c){__p&&__p();return a>=b?0:c.reduceRight(function(c,d){var e=d.rangeStart;d=d.rangeEnd;if(b<e||d!=null&&a>d)return c;else if(d==null||b<=d)return Math.min(b-e,b-a)+c;else if(a>=e)return Math.min(d-a,b-a)+c;else return d-e+c},0)};function a(){}e.exports=a}),null);
__d("oz-player/manifests/SegmentTemplateSegmentsContainer",["oz-player/utils/OzNumericalHelper","oz-player/shims/OzEventEmitter","oz-player/utils/OzError","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/utils/OzNumericalHelper").equalTo,h=b("oz-player/utils/OzNumericalHelper").greaterThan;b("oz-player/utils/OzNumericalHelper").lessThan;var i=b("oz-player/utils/OzNumericalHelper").greaterThanOrEqual,j=b("oz-player/utils/OzNumericalHelper").lessThanOrEqual,k=1e-4;function l(a,c,d,e,f){f===void 0&&(f=!1),this.$6=new(b("oz-player/shims/OzEventEmitter"))(),this.$9=null,this.$1=c,this.$2=d,this.$3=e,this.$4=this.$10(this.$3),this.$5=f,this.$7=a,this.$8=this.$7.getNumber("live_numerical_error_epsilon",0)}l.prototype.getSegmentByTime=function(a){__p&&__p();a=this.$7.getBool("live_query_time_in_range",!1)?this.$11(a):a;a=a*this.$2;var b=null;for(var c=this.$3.length-1;c>=0;c--){var d=this.$3[c];if(j(d.t+d.d*(d.r+1),a,this.$8))break;b=d}if(b===null)return null;if(this.$7.getBool("live_no_segment_when_playhead_is_before_first_segment",!1)&&h(b.t,a,this.$8))return null;d=Math.max(0,Math.floor((a-b.t+this.$8)/b.d));return this.$12(b,d)};l.prototype.getSegment=function(a){__p&&__p();var b=0;a=a;while(a>=0&&b<this.$3.length){var c=this.$3[b];c=c.r;c=c+1;if(a>=c){a-=c;b++;continue}break}c=this.$3[b];return!c?null:this.$12(c,a)};l.prototype.getSegmentAfter=function(a){a=a.getTimeRange().endTime;return this.getSegmentByTime(a)};l.prototype.isEndingSegment=function(a){if(!this.$3||!this.$3.length||!this.$5)return!1;var b=this.$3[this.$3.length-1],c=b.r;b=this.$12(b,c);return Math.abs(b.getTimeRange().startTime-a.getTimeRange().startTime)+Math.abs(b.getTimeRange().endTime-a.getTimeRange().endTime)<k};l.prototype.updateWith=function(a){a instanceof l||b("oz-player/shims/ozvariant")(0,646),this.$5=a.$5,this.$13(a.$3),this.$14(a.$3),this.$6.emit("segment_updated")};l.prototype.getTimeRanges=function(){return this.$9&&this.$7.getBool("live_block_time_range_on_the_fly",!1)?this.$15(this.$4,this.$9):this.$4};l.prototype.blockTimeRange=function(a){this.$9=a,this.$7.getBool("live_block_time_range_on_the_fly",!1)||(this.$4=this.$15(this.$4,a))};l.prototype.$15=function(a,c){return new(b("oz-player/utils/OzNumericalRangeUtil"))().diffSortedRanges(a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}),{rangeStart:c.startTime,rangeEnd:c.endTime}).map(function(a){return{startTime:a.rangeStart,endTime:a.rangeEnd===null||a.rangeEnd===void 0?Infinity:a.rangeEnd}})};l.prototype.addUpdateListener=function(a){return this.$6.addListener("segment_updated",a)};l.prototype.$11=function(a){var c=a,d=new(b("oz-player/utils/OzNumericalRangeUtil"))().findCurrentRangeIndex(a,this.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));if(d===-1){d=new(b("oz-player/utils/OzNumericalRangeUtil"))().findNextRangeIndex(a,this.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));d!==-1&&(c=this.getTimeRanges()[d].startTime)}return c};l.prototype.$16=function(a,b){if(a.d!==b.d)return!1;var c=a.t+a.d*a.r,d=b.t+b.d*b.r;return i(a.t,d,this.$8)||i(b.t,c,this.$8)?!1:Number.isInteger((a.t-b.t)/a.d)};l.prototype.$13=function(a){__p&&__p();var c=this.$3.length-1,d=a.length-1,e=c,f=d,i=this.$7.getBool("fix_templated_manifest_r_field_check",!1);while(c>=0&&d>=0){var j=this.$3[c],k=a[d];if(g(j.t,k.t,this.$8)){if(i){var l=c===e||d===f,m=l&&(c!==e&&k.r>j.r||d!==f&&j.r>k.r);l=!l&&j.r!==k.r||m}else l=!(c===e&&d===f)&&j.r!==k.r;if(l)throw new(b("oz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:'Segment group "R" field mismatch. Old groups: '+JSON.stringify(this.$3)+", new groups: "+JSON.stringify(a)});j.r=Math.max(j.r,k.r);c--;d--}else if(h(k.t,j.t,this.$8))this.$3.splice(c+1,0,k),d--;else{if(this.$16(j,k))throw new(b("oz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Segment group misalinged"});c--}}if(d>=0){(m=this.$3).unshift.apply(m,a.slice(0,d+1))}};l.prototype.$14=function(a){__p&&__p();a=this.$10(a);a=new(b("oz-player/utils/OzNumericalRangeUtil"))().mergeSortedRanges(this.$4.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}).concat(a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}})));if(!this.$7.getBool("live_block_time_range_on_the_fly",!1)){var c=this.$9;c!=null&&(a=new(b("oz-player/utils/OzNumericalRangeUtil"))().diffSortedRanges(a,{rangeStart:c.startTime,rangeEnd:c.endTime}))}this.$4=a.map(function(a){return{startTime:a.rangeStart,endTime:a.rangeEnd===null||a.rangeEnd===void 0?Infinity:a.rangeEnd}})};l.prototype.$10=function(a){__p&&__p();a=new(b("oz-player/utils/OzNumericalRangeUtil"))();a=a.mergeSortedRanges(this.$3.map(function(a){var b=this.$12(a,0).getTimeRange().startTime;a=this.$12(a,a.r).getTimeRange().endTime;return{rangeStart:b,rangeEnd:a}}.bind(this)));return a.map(function(a){var b=a.rangeStart;a=a.rangeEnd;a=a===null||a===void 0?Infinity:a;return{startTime:b,endTime:a}})};l.prototype.$12=function(a,c){c===void 0&&(c=0);var d=a.t,e=a.d,f=d+e*c;return{getURI:function(){var a=this.$1.replace("$Time$",f.toString());return new(b("oz-player/shims/OzURI"))(a)}.bind(this),getTimeRange:function(){return{startTime:f/this.$2,endTime:(f+e)/this.$2}}.bind(this),getByteRange:function(){return null}}};e.exports=l}),null);
__d("oz-player/utils/OzUrlHelper",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){var b=a.lastIndexOf("/"),c=a.lastIndexOf("://");b>c+2&&(a=a.substring(0,b+1));return a}function h(a){a=g(a);return a.endsWith("/")?g(a.substring(0,a.length-1)):a}function i(a,b){__p&&__p();a=g(a);while(b.length)if(b.startsWith("./"))b=b.substring(2);else if(b.startsWith("../"))b=b.substring(3),a=h(a),a.endsWith("/")&&(a=a.substring(0,a.length-1));else if(b.startsWith(".."))b=b.substring(2),a=h(a);else if(b.startsWith("."))b=b.substring(1);else break;b&&b.length&&(a.endsWith("/")||(a+="/"),a+=b);return a}a={normalize:function(){__p&&__p();for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];if(!b||!b.length)return"";if(b.length===1)return b[0];var d=b.shift();while(b.length>0)d=i(d,b.shift());return d}};e.exports=a}),null);
__d("oz-player/parsers/OzSegmentTemplateParser",["oz-player/manifests/SegmentTemplateSegmentsContainer","oz-player/shims/OzURI","oz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,b){b===void 0&&(b=null),this.$1=a,this.$2=b}g.prototype.getTimeRange=function(){return{startTime:0,endTime:0}};g.prototype.getByteRange=function(){return this.$2};g.prototype.getURI=function(){return this.$1};function a(a,b,c){var d=c.baseUrl;c=c.isStaticMpd;this.$1=b;this.$2=d;this.$3=c;this.$4=a}a.prototype.parseInitializationSegment=function(){var a=b("oz-player/utils/OzUrlHelper").normalize(this.$2,this.$1.$.initialization);return new g(new(b("oz-player/shims/OzURI"))(a))};a.prototype.parseSegmentsContainer=function(){var a=[];(!this.$4.getBool("handle_missing_manifest_segment_timeline",!1)||this.$1.SegmentTimeline[0].S)&&(a=this.$1.SegmentTimeline[0].S.map(function(a){return{t:Number.parseInt(a.$.t,10),d:Number.parseInt(a.$.d,10),r:Number.parseInt(a.$.r||"0",10)}}));return new(b("oz-player/manifests/SegmentTemplateSegmentsContainer"))(this.$4,b("oz-player/utils/OzUrlHelper").normalize(this.$2,this.$1.$.media),Number.parseInt(this.$1.$.timescale,10),a,this.$3)};e.exports=a}),null);
__d("oz-player/manifests/SegmentTemplateSegmentsContainerLegacy",["oz-player/utils/OzNumericalHelper","oz-player/shims/OzEventEmitter","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/utils/OzNumericalHelper").equalTo,h=b("oz-player/utils/OzNumericalHelper").greaterThan,i=b("oz-player/utils/OzNumericalHelper").lessThan;b("oz-player/utils/OzNumericalHelper").greaterThanOrEqual;var j=b("oz-player/utils/OzNumericalHelper").lessThanOrEqual,k=1e-4;function l(a,c,d,e,f){f===void 0&&(f=!1),this.$6=new(b("oz-player/shims/OzEventEmitter"))(),this.$9=null,this.$1=c,this.$2=d,this.$3=e,this.$4=this.$10(this.$3),this.$5=f,this.$7=a,this.$8=this.$7.getNumber("live_numerical_error_epsilon",0)}l.prototype.getSegmentByTime=function(a){__p&&__p();a=this.$7.getBool("live_query_time_in_range",!1)?this.$11(a):a;a=a*this.$2;if(this.$7.getBool("live_segment_search_from_end",!1)){var b=null;for(var c=this.$3.length-1;c>=0;c--){var d=this.$3[c];if(j(d.t+d.d,a,this.$8))break;b=d}if(b===null)return null;return this.$7.getBool("live_no_segment_when_playhead_is_before_first_segment",!1)&&h(b.t,a,this.$8)?null:this.$12(b)}for(var d=0;d<this.$3.length;d++){c=this.$3[d];if((this.$7.getBool("live_find_next_segment_with_gap",!1)||j(c.t,a,this.$8))&&h(c.t+c.d,a,this.$8))return this.$12(c)}return null};l.prototype.getSegment=function(a){a=this.$3[a];return!a?null:this.$12(a)};l.prototype.getSegmentAfter=function(a){var b=this.$3.findIndex(function(b){return g(b.t,a.getTimeRange().startTime*this.$2,this.$8)&&g(b.t+b.d,a.getTimeRange().endTime*this.$2,this.$8)}.bind(this));return b>=0&&b+1<this.$3.length?this.$12(this.$3[b+1]):null};l.prototype.isEndingSegment=function(a){if(!this.$3||!this.$3.length||!this.$5)return!1;var b=this.$12(this.$3[this.$3.length-1]);return Math.abs(b.getTimeRange().startTime-a.getTimeRange().startTime)+Math.abs(b.getTimeRange().endTime-a.getTimeRange().endTime)<k};l.prototype.updateWith=function(a){a instanceof l||b("oz-player/shims/ozvariant")(0,646),this.$5=a.$5,this.$13(a.$3),this.$14(a.$3),this.$6.emit("segment_updated")};l.prototype.getTimeRanges=function(){return this.$4};l.prototype.blockTimeRange=function(a){this.$9=a,this.$4=new(b("oz-player/utils/OzNumericalRangeUtil"))().diffSortedRanges(this.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}),{rangeStart:a.startTime,rangeEnd:a.endTime}).map(function(a){return{startTime:a.rangeStart,endTime:a.rangeEnd===null||a.rangeEnd===void 0?Infinity:a.rangeEnd}})};l.prototype.addUpdateListener=function(a){return this.$6.addListener("segment_updated",a)};l.prototype.$11=function(a){var c=a,d=new(b("oz-player/utils/OzNumericalRangeUtil"))().findCurrentRangeIndex(a,this.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));if(d===-1){d=new(b("oz-player/utils/OzNumericalRangeUtil"))().findNextRangeIndex(a,this.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));d!==-1&&(c=this.getTimeRanges()[d].startTime)}return c};l.prototype.$13=function(a){var b=0,c=0;while(b<this.$3.length&&c<a.length){var d=this.$3[b],e=a[c];i(d.t,e.t,this.$8)?b++:h(d.t,e.t,this.$8)?(j(e.t+e.d,d.t,this.$8)&&this.$3.splice(b,0,e),c++):(b++,c++)}while(c<a.length)this.$3.push(a[c]),c++};l.prototype.$14=function(a){a=this.$10(a);a=new(b("oz-player/utils/OzNumericalRangeUtil"))().mergeSortedRanges(this.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}).concat(a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}})));var c=this.$9;c!=null&&(a=new(b("oz-player/utils/OzNumericalRangeUtil"))().diffSortedRanges(a,{rangeStart:c.startTime,rangeEnd:c.endTime}));this.$4=a.map(function(a){return{startTime:a.rangeStart,endTime:a.rangeEnd===null||a.rangeEnd===void 0?Infinity:a.rangeEnd}})};l.prototype.$10=function(a){__p&&__p();a=new(b("oz-player/utils/OzNumericalRangeUtil"))();a=a.mergeSortedRanges(this.$3.map(function(a){a=this.$12(a).getTimeRange();var b=a.startTime;a=a.endTime;return{rangeStart:b,rangeEnd:a}}.bind(this)));return a.map(function(a){var b=a.rangeStart;a=a.rangeEnd;a=a===null||a===void 0?Infinity:a;return{startTime:b,endTime:a}})};l.prototype.$12=function(a){var c=a.t,d=a.d;return{getURI:function(){var a=this.$1.replace("$Time$",c.toString());return new(b("oz-player/shims/OzURI"))(a)}.bind(this),getTimeRange:function(){return{startTime:c/this.$2,endTime:(c+d)/this.$2}}.bind(this),getByteRange:function(){return null}}};e.exports=l}),null);
__d("oz-player/parsers/OzSegmentTemplateParserLegacy",["oz-player/manifests/SegmentTemplateSegmentsContainerLegacy","oz-player/shims/OzURI","oz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,b){b===void 0&&(b=null),this.$1=a,this.$2=b}g.prototype.getTimeRange=function(){return{startTime:0,endTime:0}};g.prototype.getByteRange=function(){return this.$2};g.prototype.getURI=function(){return this.$1};function a(a,b,c){var d=c.baseUrl;c=c.isStaticMpd;this.$1=b;this.$2=d;this.$3=c;this.$4=a}a.prototype.parseInitializationSegment=function(){var a=b("oz-player/utils/OzUrlHelper").normalize(this.$2,this.$1.$.initialization);return new g(new(b("oz-player/shims/OzURI"))(a))};a.prototype.parseSegmentsContainer=function(){var a=[];(!this.$4.getBool("handle_missing_manifest_segment_timeline",!1)||this.$1.SegmentTimeline[0].S)&&(a=this.$1.SegmentTimeline[0].S.map(function(a){return{t:Number.parseInt(a.$.t,10),d:Number.parseInt(a.$.d,10)}}));return new(b("oz-player/manifests/SegmentTemplateSegmentsContainerLegacy"))(this.$4,b("oz-player/utils/OzUrlHelper").normalize(this.$2,this.$1.$.media),Number.parseInt(this.$1.$.timescale,10),a,this.$3)};e.exports=a}),null);
__d("oz-player/manifests/OzZeroTimeRangeSegment",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}a.prototype.getURI=function(){return this.$1};a.prototype.getTimeRange=function(){return{startTime:0,endTime:0}};a.prototype.getByteRange=function(){return{startByte:this.$2,endByte:this.$3}};e.exports=a}),null);
__d("DataViewReader",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=0,this.$2=a}a.prototype.seek=function(a){this.$1=a};a.prototype.skip=function(a){var b=this.$1;this.$1+=a;return b};a.prototype.readUint8=function(){return this.$2.getUint8(this.skip(8/8))};a.prototype.readUint16=function(){return this.$2.getUint16(this.skip(16/8))};a.prototype.readUint32=function(){return this.$2.getUint32(this.skip(32/8))};a.prototype.readUint64=function(){var a=this.$2.getUint32(this.skip(32/8)),b=this.$2.getUint32(this.skip(32/8));if(a>2097151)throw new RangeError("Overflow reading 64-bit value.");return Math.pow(2,32)*a+b};a.prototype.readInt64=function(){var a=this.$2.getUint32(this.skip(32/8)),b=this.$2.getUint32(this.skip(32/8));if(a>2097151)throw new RangeError("Overflow reading 64-bit value.");return Math.pow(2,32)*(a|0)+b};a.prototype.readInt16=function(){return this.$2.getInt16(this.skip(16/8))};a.prototype.readInt32=function(){return this.$2.getInt32(this.skip(32/8))};a.prototype.readZeroTerminatedString=function(a){var b="",c=0,d;while(c++<a&&(d=this.readUint8()))b+=String.fromCharCode(d);return b};a.prototype.readChars=function(a){var b="";while(a-->0)b+=String.fromCharCode(this.$2.getUint8(this.skip(8/8)));return b};a.prototype.readBytes=function(a){var b=[];while(a-->0)b.push(this.$2.getUint8(this.skip(8/8)));return b};a.prototype.getDataView=function(){return this.$2};a.prototype.getCursor=function(){return this.$1};a.prototype.hasMoreData=function(){return this.$2.byteLength-this.getCursor()>0};e.exports=a}),null);
__d("oz-player/shims/OzDataViewReader",["DataViewReader"],(function(a,b,c,d,e,f){"use strict";e.exports=b("DataViewReader")}),null);
/**
 * License: https://www.facebook.com/legal/license/8SOvLuObRf9/
 */
__d("oz-player/parsers/OzMp4SidxParser",["oz-player/shims/OzDataViewReader","oz-player/shims/OzURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=1936286840;a={parse:function(a,c,d){__p&&__p();var e=new(b("oz-player/shims/OzDataViewReader"))(new DataView(d.buffer));d=e.readUint32();var f=e.readUint32();if(f!==g)throw new Error('Invalid box type, expected "sidx".');d==1&&(d=e.readUint64());f=e.readUint8();e.skip(3);e.skip(4);var h=e.readUint32();if(!h)throw new Error("Invalid timescale.");var i;f==0?(f=e.readUint32(),i=e.readUint32()):(f=e.readUint64(),i=e.readUint64());e.skip(2);var j=e.readUint16(),k=f,l=c+d+i,m=0,n=[];f=function(c){__p&&__p();var d=e.readUint32(),f=(d&2147483648)>>>31;d=d&2147483647;var g=e.readUint32();e.readUint32();if(f==1)throw new Error("Heirarchical SIDXs are not supported.");var i=k/h,j=(k+g)/h;c===0&&(m=i);var o=l,p=o+d-1;n.push({getURI:function(){return new(b("oz-player/shims/OzURI"))(a)},getTimeRange:function(){return{startTime:i-m,endTime:j-m}},getByteRange:function(){return{startByte:o,endByte:p}}});k+=g;l+=d};for(var c=0;c<j;c++)f(c);return n}};e.exports=a}),null);
__d("oz-player/manifests/OzDataSegment",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c,d,e){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e}a.prototype.getURI=function(){return this.$1};a.prototype.getTimeRange=function(){return{startTime:this.$2,endTime:this.$3}};a.prototype.getByteRange=function(){return{startByte:this.$4,endByte:this.$5}};e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/8SOvLuObRf9/
 */
__d("oz-player/parsers/OzWebmSidxParser",["oz-player/manifests/OzDataSegment","oz-player/shims/OzDataViewReader","oz-player/shims/OzURI","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=440786851,h=408125543,i=357149030,j=2807729,k=17545,l=475249515,m=187,n=179,o=183,p=241,q=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])];function r(a,b){__p&&__p();if(!a&&!b)return!0;if(!a||!b)return!1;if(a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0}function s(a,b){this.id=a,this.$1=b}s.prototype.getOffset=function(){return this.$1.byteOffset};s.prototype.createParser=function(){return new t(this.$1)};s.prototype.getUint=function(){__p&&__p();if(this.$1.byteLength>8)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(this.$1.byteLength==8&&this.$1.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");var a=0;for(var b=0;b<this.$1.byteLength;b++){var c=this.$1.getUint8(b);a=256*a+c}return a};s.prototype.getFloat=function(){if(this.$1.byteLength==4)return this.$1.getFloat32(0);else if(this.$1.byteLength==8)return this.$1.getFloat64(0);else throw new RangeError("EbmlElement: floating point numbers must be 4 or 8 bytes.")};function t(a){this.$1=a,this.$2=new(b("oz-player/shims/OzDataViewReader"))(this.$1)}t.prototype.hasMoreData=function(){return this.$2.hasMoreData()};t.prototype.parseElement=function(){var a=this.$3(),b=this.$4(),c;t.$5(b)?c=this.$1.byteLength-this.$2.getCursor():c=t.$6(b);b=this.$2.getCursor()+c<=this.$1.byteLength?c:this.$1.byteLength-this.$2.getCursor();c=new DataView(this.$1.buffer,this.$1.byteOffset+this.$2.getCursor(),b);this.$2.skip(b);return new s(a,c)};t.prototype.$3=function(){var a=this.$4();if(a.length>7)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");var b=0;for(var c=0;c<a.length;c++)b=256*b+a[c];return b};t.prototype.$4=function(){__p&&__p();var a=this.$2.readUint8(),b;for(b=1;b<=8;b++){var c=1<<8-b;if(a&c)break}if(b>8)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");c=new Uint8Array(b);c[0]=a;for(var a=1;a<b;a++)c[a]=this.$2.readUint8();return c};t.$6=function(a){if(a.length==8&&a[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");var b=1<<8-a.length;b=a[0]&b-1;for(var c=1;c<a.length;c++)b=256*b+a[c];return b};t.$5=function(a){for(var b=0;b<q.length;b++)if(r(a,q[b]))return!0;return!1};function u(a){__p&&__p();a=a.createParser();var b=1e6,c=null;while(a.hasMoreData()){var d=a.parseElement();d.id==j?b=d.getUint():d.id==k&&(c=d.getFloat())}if(c==null)return null;d=b/1e9;a=c*d;return{timecodeScale:d,duration:a}}function v(a,c,d,e,f){__p&&__p();var g=[];a=a.createParser();var h=-1,i=-1;while(a.hasMoreData()){var j=a.parseElement();if(j.id!=m)continue;j=w(j);if(!j)continue;var k=d*j.unscaledTime;j=c+j.relativeOffset;h>=0&&(i>=0||b("oz-player/shims/ozvariant")(0,4010),g.push(new(b("oz-player/manifests/OzDataSegment"))(f,h,k,i,j-1)));h=k;i=j}h>=0&&(i>=0||b("oz-player/shims/ozvariant")(0,4010),g.push(new(b("oz-player/manifests/OzDataSegment"))(f,h,e,i,null)));return g}function w(a){__p&&__p();a=a.createParser();var b=a.parseElement();if(b.id!=n)return null;b=b.getUint();a=a.parseElement();if(a.id!=o)return null;a=a.createParser();var c=0;while(a.hasMoreData()){var d=a.parseElement();if(d.id!=p)continue;c=d.getUint();break}return{unscaledTime:b,relativeOffset:c}}function x(a){__p&&__p();a=a.createParser();var b=null;while(a.hasMoreData()){var c=a.parseElement();if(c.id!=i)continue;b=c;break}return!b?null:u(b)}function y(a){__p&&__p();a=new t(a);var b=a.parseElement();if(b.id!=g)return null;b=a.parseElement();if(b.id!=h)return null;a=b.getOffset();b=x(b);return!b?null:{segmentOffset:a,timecodeScale:b.timecodeScale,duration:b.duration}}function a(a,c,d){d=new DataView(d.buffer);c=new DataView(c.buffer);d=y(d);if(!d)return[];c=new t(c);c=c.parseElement();return c.id!=l?[]:v(c,d.segmentOffset,d.timecodeScale,d.duration,new(b("oz-player/shims/OzURI"))(a))}e.exports={parse:a}}),null);
__d("oz-player/utils/OzErrorEmitter",["oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("oz-player/shims/OzEventEmitter"));g=c&&c.prototype;function a(a){a===void 0&&(a=!1),g.constructor.call(this),this.$OzErrorEmitter1=!1,this.$OzErrorEmitter2=!1,this.$OzErrorEmitter3=[],this.emitError=function(a){!this.$OzErrorEmitter1?this.$OzErrorEmitter2?this.$OzErrorEmitter3.push(a):this.$OzErrorEmitter1||b("oz-player/shims/ozvariant")(0,14038):this.emit("error",a)}.bind(this),this.$OzErrorEmitter2=a}a.prototype.onError=function(a){this.$OzErrorEmitter1=!0;a=this.addListener("error",a);this.$OzErrorEmitter2&&this.$OzErrorEmitter3.length>0&&this.$OzErrorEmitter3.forEach(this.emitError);return a};e.exports=a}),null);
__d("oz-player/utils/OzReadableStreamUtils",["oz-player/utils/ozConcatArrayBuffer"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return TextDecoder?new TextDecoder("utf-8").decode(new Uint8Array(a)):String.fromCharCode.apply(null,a)}function h(a){__p&&__p();var c=new ArrayBuffer(0),d=function d(){return a.read().then(function(a){var e=a.value;a=a.done;if(a)return null;if(!e)return null;c=b("oz-player/utils/ozConcatArrayBuffer")(c,e);return d()})};return d().then(function(){return new Uint8Array(c)})}function a(a){return h(a).then(function(a){return g(a)})}e.exports={pumpString:a,pumpAllData:h}}),null);
__d("oz-player/parsers/OzSidxSegmentsParser",["oz-player/loggings/OzLoggingUtils","oz-player/manifests/OzZeroTimeRangeSegment","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzURI","oz-player/utils/OzErrorEmitter","oz-player/utils/OzReadableStreamUtils","oz-player/parsers/OzMp4SidxParser","oz-player/parsers/OzWebmSidxParser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation,h=b("oz-player/utils/OzReadableStreamUtils").pumpAllData;function i(a){a=a.split("-");return{startByte:Number.parseInt(a[0],10),endByte:Number.parseInt(a[1],10)}}function j(a,b,c){c===void 0&&(c=null),this.$1=a,this.$2=b,this.$3=c}j.prototype.getSegmentByTime=function(a){var b=this.$1();for(var c=0;c<b.length;c++){var d=b[c],e=d.getTimeRange();if(e.startTime<=a&&e.endTime>a)return d}return null};j.prototype.getSegmentAfter=function(a){var b=this.$1(),c=b.findIndex(function(b){return b.getTimeRange().startTime===a.getTimeRange().startTime&&b.getTimeRange().endTime===a.getTimeRange().endTime});return c>=0&&c+1<b.length?b[c+1]:null};j.prototype.isEndingSegment=function(a){var b=this.$1();if(!b||!b.length)return!1;b=b[b.length-1].getTimeRange();a=a.getTimeRange();return b.startTime===a.startTime&&b.endTime===a.endTime};j.prototype.getSegment=function(a){return this.$1()[a]||null};j.prototype.updateWith=function(a){throw new Error("Not implemented: updatedWith")};j.prototype.addUpdateListener=function(a){this.$3&&(this.$3(),this.$3=null);return this.$2.addListener("segment_updated",a)};j.prototype.getTimeRanges=function(){var a=this.$1();if(a.length===0)return[];else{var b=a[0];a=a[a.length-1];return[{startTime:b.getTimeRange().startTime,endTime:a.getTimeRange().endTime}]}};j.prototype.blockTimeRange=function(){};function a(a,c,d,e,f,g){this.$5=new(b("oz-player/utils/OzErrorEmitter"))(),this.$6=[],this.$8=new(b("oz-player/shims/OzEventEmitter"))(),this.$1=c,this.$2=d,this.$3=e,this.$4=f,this.$7=g.cloneContext().setType("sidx"),this.$9=a}a.prototype.onError=function(a){return this.$5.onError(a)};a.prototype.parseInitializationSegment=function(){var a=this.$1.Initialization[0].$.range,c=i(a);a={getURI:function(){return new(b("oz-player/shims/OzURI"))(this.$2)}.bind(this),getTimeRange:function(){return{startTime:0,endTime:0}},getByteRange:function(){return c}};return a};a.prototype.parseSegmentsContainer=function(){var a=function(){g(this.$10(),this.$7,"process_sidx")["catch"](this.$5.emitError)}.bind(this),b=this.$9.getBool("lazy_parse_sidx",!1);b||a();b=new j(function(){return this.$6}.bind(this),this.$8,b?a:null);return b};a.prototype.$11=function(a,c){a=new(b("oz-player/manifests/OzZeroTimeRangeSegment"))(new(b("oz-player/shims/OzURI"))(a),c.startByte,c.endByte);c=this.$4.request([a],this.$7);a=c.getStream().getReader();return h(a)};a.prototype.$10=function(){__p&&__p();var a=this.$1.$.indexRange,c=i(a);a=[this.$11(this.$2,c)];if(this.$3==="webm"){var d=i(this.$1.Initialization[0].$.range);a.push(this.$11(this.$2,d));d=b("oz-player/shims/OzMaybeNativePromise").all(a).then(function(a){var c=a[0];a=a[1];this.$6=b("oz-player/parsers/OzWebmSidxParser").parse(this.$2,c,a)}.bind(this))}else d=a[0].then(function(a){this.$6=b("oz-player/parsers/OzMp4SidxParser").parse(this.$2,c.startByte,a)}.bind(this));return d.then(function(){this.$8.emit("segment_updated")}.bind(this))};e.exports=a}),null);
__d("oz-player/parsers/OzVideoContainerType",[],(function(a,b,c,d,e,f){"use strict";function a(a){return(a.split("/")[1]||"").trim()}e.exports={parse:a}}),null);
__d("oz-player/parsers/OzRepresentationParser",["oz-player/manifests/OzRepresentation","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/parsers/OzSegmentTemplateParser","oz-player/parsers/OzSegmentTemplateParserLegacy","oz-player/parsers/OzSidxSegmentsParser","oz-player/parsers/OzVideoContainerType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f,g){this.$2=new(b("oz-player/utils/OzErrorEmitter"))(),this.$1=c,this.$3=e,this.$4=f,this.$6=d,this.$7=a,this.$8=g}a.prototype.$9=function(){__p&&__p();if(this.$5)return this.$5;if(this.$1.SegmentBase){var a=this.$1.SegmentBase[0],c=this.$1.BaseURL[0]._;this.$5=new(b("oz-player/parsers/OzSidxSegmentsParser"))(this.$7,a,c,b("oz-player/parsers/OzVideoContainerType").parse(this.$1.$.mimeType),this.$3,this.$4);this.$5.onError(this.$2.emitError)}else if(this.$1.SegmentTemplate){a=this.$6.mpdUrl;if(a===null||a===void 0){c=new(b("oz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Missing mpd url for template manifest"});throw c}c=this.$1.SegmentTemplate[0];var d=this.$7.getBool("use_new_template_segment_parser",!1)?b("oz-player/parsers/OzSegmentTemplateParser"):b("oz-player/parsers/OzSegmentTemplateParserLegacy");this.$5=new d(this.$7,c,{baseUrl:a,isStaticMpd:this.$8==="static"})}else{d=new(b("oz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Unrecognized representation type"});throw d}return this.$5};a.prototype.onError=function(a){return this.$2.onError(a)};a.prototype.parseInitSegment=function(){return this.$9().parseInitializationSegment()};a.prototype.parseBandwidth=function(){return Number(this.$1.$.bandwidth)};a.prototype.parseMimeCodecs=function(){return this.$1.$.mimeType+'; codecs="'+this.$1.$.codecs+'"'};a.prototype.parseSegmentsContainer=function(){return this.$9().parseSegmentsContainer()};a.prototype.parseID=function(){return""+this.$1.$.id};a.prototype.parseCustomFieldFirstSegment=function(){var a=this.$6.customRepresentationParsers?this.$6.customRepresentationParsers.firstSegmentParser:null;return a?a(this.$1):null};a.prototype.parse=function(){return new(b("oz-player/manifests/OzRepresentation"))(this.$1,this.parseID(),this.parseMimeCodecs(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),this.$6.customRepresentationParsers)};e.exports=a}),null);
__d("oz-player/parsers/OzVideoRepresentationParser",["oz-player/manifests/OzVideoRepresentation","oz-player/parsers/OzRepresentationParser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("oz-player/parsers/OzRepresentationParser"));g=c&&c.prototype;function a(a,b,c,d,e,f){g.constructor.call(this,a,b,c,d,e,f),this.$OzVideoRepresentationParser1=b,this.$OzVideoRepresentationParser2=c}a.prototype.parse=function(){var a=Number.parseInt(this.$OzVideoRepresentationParser1.$.height,10),c=Number.parseInt(this.$OzVideoRepresentationParser1.$.width,10);return new(b("oz-player/manifests/OzVideoRepresentation"))(this.$OzVideoRepresentationParser1,this.parseID(),this.parseMimeCodecs(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),this.$OzVideoRepresentationParser2.customRepresentationParsers,c,a)};e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/yfmK3YA3_Vc/
 */
__d("sax-1.2.4",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={},h={exports:g};function i(){__p&&__p();(function(a){__p&&__p();a.parser=function(a,b){return new c(a,b)};a.SAXParser=c;a.MAX_BUFFER_LENGTH=64*1024;var b=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];a.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function c(b,d){__p&&__p();if(!(this instanceof c))return new c(b,d);var f=this;e(f);f.q=f.c="";f.bufferCheckPosition=a.MAX_BUFFER_LENGTH;f.opt=d||{};f.opt.lowercase=f.opt.lowercase||f.opt.lowercasetags;f.looseCase=f.opt.lowercase?"toLowerCase":"toUpperCase";f.tags=[];f.closed=f.closedRoot=f.sawRoot=!1;f.tag=f.error=null;f.strict=!!b;f.noscript=!!(b||f.opt.noscript);f.state=u.BEGIN;f.strictEntities=f.opt.strictEntities;f.ENTITIES=f.strictEntities?Object.create(a.XML_ENTITIES):Object.create(a.ENTITIES);f.attribList=[];f.opt.xmlns&&(f.ns=Object.create(k));f.trackPosition=f.opt.position!==!1;f.trackPosition&&(f.position=f.line=f.column=0);w(f,"onready")}Object.create||(Object.create=function(a){function b(){}b.prototype=a;a=new b();return a});Object.keys||(Object.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b});function d(c){__p&&__p();var d=Math.max(a.MAX_BUFFER_LENGTH,10),e=0;for(var f=0,g=b.length;f<g;f++){var h=c[b[f]].length;if(h>d)switch(b[f]){case"textNode":y(c);break;case"cdata":x(c,"oncdata",c.cdata);c.cdata="";break;case"script":x(c,"onscript",c.script);c.script="";break;default:A(c,"Max buffer length exceeded: "+b[f])}e=Math.max(e,h)}h=a.MAX_BUFFER_LENGTH-e;c.bufferCheckPosition=h+c.position}function e(a){for(var c=0,d=b.length;c<d;c++)a[b[c]]=""}function f(a){y(a),a.cdata!==""&&(x(a,"oncdata",a.cdata),a.cdata=""),a.script!==""&&(x(a,"onscript",a.script),a.script="")}c.prototype={end:function(){B(this)},write:L,resume:function(){this.error=null;return this},close:function(){return this.write(null)},flush:function(){f(this)}};var g="[CDATA[",h="DOCTYPE",i="http://www.w3.org/XML/1998/namespace",j="http://www.w3.org/2000/xmlns/",k={xml:i,xmlns:j},l=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,n=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,o=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function p(a){return a===" "||a==="\n"||a==="\r"||a==="\t"}function q(a){return a==='"'||a==="'"}function r(a){return a===">"||p(a)}function s(a,b){return a.test(b)}function t(a,b){return!s(a,b)}var u=0;a.STATE={BEGIN:u++,BEGIN_WHITESPACE:u++,TEXT:u++,TEXT_ENTITY:u++,OPEN_WAKA:u++,SGML_DECL:u++,SGML_DECL_QUOTED:u++,DOCTYPE:u++,DOCTYPE_QUOTED:u++,DOCTYPE_DTD:u++,DOCTYPE_DTD_QUOTED:u++,COMMENT_STARTING:u++,COMMENT:u++,COMMENT_ENDING:u++,COMMENT_ENDED:u++,CDATA:u++,CDATA_ENDING:u++,CDATA_ENDING_2:u++,PROC_INST:u++,PROC_INST_BODY:u++,PROC_INST_ENDING:u++,OPEN_TAG:u++,OPEN_TAG_SLASH:u++,ATTRIB:u++,ATTRIB_NAME:u++,ATTRIB_NAME_SAW_WHITE:u++,ATTRIB_VALUE:u++,ATTRIB_VALUE_QUOTED:u++,ATTRIB_VALUE_CLOSED:u++,ATTRIB_VALUE_UNQUOTED:u++,ATTRIB_VALUE_ENTITY_Q:u++,ATTRIB_VALUE_ENTITY_U:u++,CLOSE_TAG:u++,CLOSE_TAG_SAW_WHITE:u++,SCRIPT:u++,SCRIPT_ENDING:u++};a.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"};a.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(a.ENTITIES).forEach(function(b){var c=a.ENTITIES[b];c=typeof c==="number"?String.fromCharCode(c):c;a.ENTITIES[b]=c});for(var v in a.STATE)a.STATE[a.STATE[v]]=v;u=a.STATE;function w(a,b,c){a[b]&&a[b](c)}function x(a,b,c){a.textNode&&y(a),w(a,b,c)}function y(a){a.textNode=z(a.opt,a.textNode),a.textNode&&w(a,"ontext",a.textNode),a.textNode=""}function z(a,b){a.trim&&(b=b.trim());a.normalize&&(b=b.replace(/\s+/g," "));return b}function A(a,b){y(a);a.trackPosition&&(b+="\nLine: "+a.line+"\nColumn: "+a.column+"\nChar: "+a.c);b=new Error(b);a.error=b;w(a,"onerror",b);return a}function B(a){a.sawRoot&&!a.closedRoot&&C(a,"Unclosed root tag");a.state!==u.BEGIN&&a.state!==u.BEGIN_WHITESPACE&&a.state!==u.TEXT&&A(a,"Unexpected end");y(a);a.c="";a.closed=!0;w(a,"onend");c.call(a,a.strict,a.opt);return a}function C(a,b){if(typeof a!=="object"||!(a instanceof c))throw new Error("bad call to strictFail");a.strict&&A(a,b)}function D(a){a.strict||(a.tagName=a.tagName[a.looseCase]());var b=a.tags[a.tags.length-1]||a,c=a.tag={name:a.tagName,attributes:{}};a.opt.xmlns&&(c.ns=b.ns);a.attribList.length=0;x(a,"onopentagstart",c)}function E(a,b){var c=a.indexOf(":");c=c<0?["",a]:a.split(":");var d=c[0];c=c[1];b&&a==="xmlns"&&(d="xmlns",c="");return{prefix:d,local:c}}function F(a){__p&&__p();a.strict||(a.attribName=a.attribName[a.looseCase]());if(a.attribList.indexOf(a.attribName)!==-1||a.tag.attributes.hasOwnProperty(a.attribName)){a.attribName=a.attribValue="";return}if(a.opt.xmlns){var b=E(a.attribName,!0),c=b.prefix;b=b.local;if(c==="xmlns")if(b==="xml"&&a.attribValue!==i)C(a,"xml: prefix must be bound to "+i+"\nActual: "+a.attribValue);else if(b==="xmlns"&&a.attribValue!==j)C(a,"xmlns: prefix must be bound to "+j+"\nActual: "+a.attribValue);else{c=a.tag;var d=a.tags[a.tags.length-1]||a;c.ns===d.ns&&(c.ns=Object.create(d.ns));c.ns[b]=a.attribValue}a.attribList.push([a.attribName,a.attribValue])}else a.tag.attributes[a.attribName]=a.attribValue,x(a,"onattribute",{name:a.attribName,value:a.attribValue});a.attribName=a.attribValue=""}function G(a,b){__p&&__p();if(a.opt.xmlns){var c=a.tag,d=E(a.tagName);c.prefix=d.prefix;c.local=d.local;c.uri=c.ns[d.prefix]||"";c.prefix&&!c.uri&&(C(a,"Unbound namespace prefix: "+JSON.stringify(a.tagName)),c.uri=d.prefix);d=a.tags[a.tags.length-1]||a;c.ns&&d.ns!==c.ns&&Object.keys(c.ns).forEach(function(b){x(a,"onopennamespace",{prefix:b,uri:c.ns[b]})});for(var d=0,e=a.attribList.length;d<e;d++){var f=a.attribList[d],g=f[0];f=f[1];var h=E(g,!0),i=h.prefix;h=h.local;var j=i===""?"":c.ns[i]||"";f={name:g,value:f,prefix:i,local:h,uri:j};i&&i!=="xmlns"&&!j&&(C(a,"Unbound namespace prefix: "+JSON.stringify(i)),f.uri=i);a.tag.attributes[g]=f;x(a,"onattribute",f)}a.attribList.length=0}a.tag.isSelfClosing=!!b;a.sawRoot=!0;a.tags.push(a.tag);x(a,"onopentag",a.tag);b||(!a.noscript&&a.tagName.toLowerCase()==="script"?a.state=u.SCRIPT:a.state=u.TEXT,a.tag=null,a.tagName="");a.attribName=a.attribValue="";a.attribList.length=0}function H(a){__p&&__p();if(!a.tagName){C(a,"Weird empty close tag.");a.textNode+="</>";a.state=u.TEXT;return}if(a.script){if(a.tagName!=="script"){a.script+="</"+a.tagName+">";a.tagName="";a.state=u.SCRIPT;return}x(a,"onscript",a.script);a.script=""}var b=a.tags.length,c=a.tagName;a.strict||(c=c[a.looseCase]());var d=c;while(b--){var e=a.tags[b];if(e.name!==d)C(a,"Unexpected close tag");else break}if(b<0){C(a,"Unmatched closing tag: "+a.tagName);a.textNode+="</"+a.tagName+">";a.state=u.TEXT;return}a.tagName=c;e=a.tags.length;while(e-->b){var f=a.tag=a.tags.pop();a.tagName=a.tag.name;x(a,"onclosetag",a.tagName);d={};for(var g in f.ns)d[g]=f.ns[g];c=a.tags[a.tags.length-1]||a;a.opt.xmlns&&f.ns!==c.ns&&Object.keys(f.ns).forEach(function(b){var c=f.ns[b];x(a,"onclosenamespace",{prefix:b,uri:c})})}b===0&&(a.closedRoot=!0);a.tagName=a.attribValue=a.attribName="";a.attribList.length=0;a.state=u.TEXT}function I(a){__p&&__p();var b=a.entity,c=b.toLowerCase(),d,e="";if(a.ENTITIES[b])return a.ENTITIES[b];if(a.ENTITIES[c])return a.ENTITIES[c];b=c;b.charAt(0)==="#"&&(b.charAt(1)==="x"?(b=b.slice(2),d=parseInt(b,16),e=d.toString(16)):(b=b.slice(1),d=parseInt(b,10),e=d.toString(10)));b=b.replace(/^0+/,"");if(isNaN(d)||e.toLowerCase()!==b){C(a,"Invalid character entity");return"&"+a.entity+";"}return String.fromCodePoint(d)}function J(a,b){b==="<"?(a.state=u.OPEN_WAKA,a.startTagPosition=a.position):p(b)||(C(a,"Non-whitespace before first tag."),a.textNode=b,a.state=u.TEXT)}function K(a,b){var c="";b<a.length&&(c=a.charAt(b));return c}function L(a){__p&&__p();var b=this;if(this.error)throw this.error;if(b.closed)return A(b,"Cannot write after close. Assign an onready handler.");if(a===null)return B(b);typeof a==="object"&&(a=a.toString());var c=0,e="";while(!0){e=K(a,c++);b.c=e;if(!e)break;b.trackPosition&&(b.position++,e==="\n"?(b.line++,b.column=0):b.column++);switch(b.state){case u.BEGIN:b.state=u.BEGIN_WHITESPACE;if(e==="\ufeff")continue;J(b,e);continue;case u.BEGIN_WHITESPACE:J(b,e);continue;case u.TEXT:if(b.sawRoot&&!b.closedRoot){var f=c-1;while(e&&e!=="<"&&e!=="&")e=K(a,c++),e&&b.trackPosition&&(b.position++,e==="\n"?(b.line++,b.column=0):b.column++);b.textNode+=a.substring(f,c-1)}e==="<"&&!(b.sawRoot&&b.closedRoot&&!b.strict)?(b.state=u.OPEN_WAKA,b.startTagPosition=b.position):(!p(e)&&(!b.sawRoot||b.closedRoot)&&C(b,"Text data outside of root node."),e==="&"?b.state=u.TEXT_ENTITY:b.textNode+=e);continue;case u.SCRIPT:e==="<"?b.state=u.SCRIPT_ENDING:b.script+=e;continue;case u.SCRIPT_ENDING:e==="/"?b.state=u.CLOSE_TAG:(b.script+="<"+e,b.state=u.SCRIPT);continue;case u.OPEN_WAKA:if(e==="!")b.state=u.SGML_DECL,b.sgmlDecl="";else if(!p(e))if(s(l,e))b.state=u.OPEN_TAG,b.tagName=e;else if(e==="/")b.state=u.CLOSE_TAG,b.tagName="";else if(e==="?")b.state=u.PROC_INST,b.procInstName=b.procInstBody="";else{C(b,"Unencoded <");if(b.startTagPosition+1<b.position){f=b.position-b.startTagPosition;e=new Array(f).join(" ")+e}b.textNode+="<"+e;b.state=u.TEXT}continue;case u.SGML_DECL:(b.sgmlDecl+e).toUpperCase()===g?(x(b,"onopencdata"),b.state=u.CDATA,b.sgmlDecl="",b.cdata=""):b.sgmlDecl+e==="--"?(b.state=u.COMMENT,b.comment="",b.sgmlDecl=""):(b.sgmlDecl+e).toUpperCase()===h?(b.state=u.DOCTYPE,(b.doctype||b.sawRoot)&&C(b,"Inappropriately located doctype declaration"),b.doctype="",b.sgmlDecl=""):e===">"?(x(b,"onsgmldeclaration",b.sgmlDecl),b.sgmlDecl="",b.state=u.TEXT):q(e)?(b.state=u.SGML_DECL_QUOTED,b.sgmlDecl+=e):b.sgmlDecl+=e;continue;case u.SGML_DECL_QUOTED:e===b.q&&(b.state=u.SGML_DECL,b.q="");b.sgmlDecl+=e;continue;case u.DOCTYPE:e===">"?(b.state=u.TEXT,x(b,"ondoctype",b.doctype),b.doctype=!0):(b.doctype+=e,e==="["?b.state=u.DOCTYPE_DTD:q(e)&&(b.state=u.DOCTYPE_QUOTED,b.q=e));continue;case u.DOCTYPE_QUOTED:b.doctype+=e;e===b.q&&(b.q="",b.state=u.DOCTYPE);continue;case u.DOCTYPE_DTD:b.doctype+=e;e==="]"?b.state=u.DOCTYPE:q(e)&&(b.state=u.DOCTYPE_DTD_QUOTED,b.q=e);continue;case u.DOCTYPE_DTD_QUOTED:b.doctype+=e;e===b.q&&(b.state=u.DOCTYPE_DTD,b.q="");continue;case u.COMMENT:e==="-"?b.state=u.COMMENT_ENDING:b.comment+=e;continue;case u.COMMENT_ENDING:e==="-"?(b.state=u.COMMENT_ENDED,b.comment=z(b.opt,b.comment),b.comment&&x(b,"oncomment",b.comment),b.comment=""):(b.comment+="-"+e,b.state=u.COMMENT);continue;case u.COMMENT_ENDED:e!==">"?(C(b,"Malformed comment"),b.comment+="--"+e,b.state=u.COMMENT):b.state=u.TEXT;continue;case u.CDATA:e==="]"?b.state=u.CDATA_ENDING:b.cdata+=e;continue;case u.CDATA_ENDING:e==="]"?b.state=u.CDATA_ENDING_2:(b.cdata+="]"+e,b.state=u.CDATA);continue;case u.CDATA_ENDING_2:e===">"?(b.cdata&&x(b,"oncdata",b.cdata),x(b,"onclosecdata"),b.cdata="",b.state=u.TEXT):e==="]"?b.cdata+="]":(b.cdata+="]]"+e,b.state=u.CDATA);continue;case u.PROC_INST:e==="?"?b.state=u.PROC_INST_ENDING:p(e)?b.state=u.PROC_INST_BODY:b.procInstName+=e;continue;case u.PROC_INST_BODY:if(!b.procInstBody&&p(e))continue;else e==="?"?b.state=u.PROC_INST_ENDING:b.procInstBody+=e;continue;case u.PROC_INST_ENDING:e===">"?(x(b,"onprocessinginstruction",{name:b.procInstName,body:b.procInstBody}),b.procInstName=b.procInstBody="",b.state=u.TEXT):(b.procInstBody+="?"+e,b.state=u.PROC_INST_BODY);continue;case u.OPEN_TAG:s(m,e)?b.tagName+=e:(D(b),e===">"?G(b):e==="/"?b.state=u.OPEN_TAG_SLASH:(p(e)||C(b,"Invalid character in tag name"),b.state=u.ATTRIB));continue;case u.OPEN_TAG_SLASH:e===">"?(G(b,!0),H(b)):(C(b,"Forward-slash in opening tag not followed by >"),b.state=u.ATTRIB);continue;case u.ATTRIB:if(p(e))continue;else e===">"?G(b):e==="/"?b.state=u.OPEN_TAG_SLASH:s(l,e)?(b.attribName=e,b.attribValue="",b.state=u.ATTRIB_NAME):C(b,"Invalid attribute name");continue;case u.ATTRIB_NAME:e==="="?b.state=u.ATTRIB_VALUE:e===">"?(C(b,"Attribute without value"),b.attribValue=b.attribName,F(b),G(b)):p(e)?b.state=u.ATTRIB_NAME_SAW_WHITE:s(m,e)?b.attribName+=e:C(b,"Invalid attribute name");continue;case u.ATTRIB_NAME_SAW_WHITE:if(e==="=")b.state=u.ATTRIB_VALUE;else if(p(e))continue;else C(b,"Attribute without value"),b.tag.attributes[b.attribName]="",b.attribValue="",x(b,"onattribute",{name:b.attribName,value:""}),b.attribName="",e===">"?G(b):s(l,e)?(b.attribName=e,b.state=u.ATTRIB_NAME):(C(b,"Invalid attribute name"),b.state=u.ATTRIB);continue;case u.ATTRIB_VALUE:if(p(e))continue;else q(e)?(b.q=e,b.state=u.ATTRIB_VALUE_QUOTED):(C(b,"Unquoted attribute value"),b.state=u.ATTRIB_VALUE_UNQUOTED,b.attribValue=e);continue;case u.ATTRIB_VALUE_QUOTED:if(e!==b.q){e==="&"?b.state=u.ATTRIB_VALUE_ENTITY_Q:b.attribValue+=e;continue}F(b);b.q="";b.state=u.ATTRIB_VALUE_CLOSED;continue;case u.ATTRIB_VALUE_CLOSED:p(e)?b.state=u.ATTRIB:e===">"?G(b):e==="/"?b.state=u.OPEN_TAG_SLASH:s(l,e)?(C(b,"No whitespace between attributes"),b.attribName=e,b.attribValue="",b.state=u.ATTRIB_NAME):C(b,"Invalid attribute name");continue;case u.ATTRIB_VALUE_UNQUOTED:if(!r(e)){e==="&"?b.state=u.ATTRIB_VALUE_ENTITY_U:b.attribValue+=e;continue}F(b);e===">"?G(b):b.state=u.ATTRIB;continue;case u.CLOSE_TAG:if(!b.tagName)if(p(e))continue;else t(l,e)?b.script?(b.script+="</"+e,b.state=u.SCRIPT):C(b,"Invalid tagname in closing tag."):b.tagName=e;else e===">"?H(b):s(m,e)?b.tagName+=e:b.script?(b.script+="</"+b.tagName,b.tagName="",b.state=u.SCRIPT):(p(e)||C(b,"Invalid tagname in closing tag"),b.state=u.CLOSE_TAG_SAW_WHITE);continue;case u.CLOSE_TAG_SAW_WHITE:if(p(e))continue;e===">"?H(b):C(b,"Invalid characters in closing tag");continue;case u.TEXT_ENTITY:case u.ATTRIB_VALUE_ENTITY_Q:case u.ATTRIB_VALUE_ENTITY_U:var i,j;switch(b.state){case u.TEXT_ENTITY:i=u.TEXT;j="textNode";break;case u.ATTRIB_VALUE_ENTITY_Q:i=u.ATTRIB_VALUE_QUOTED;j="attribValue";break;case u.ATTRIB_VALUE_ENTITY_U:i=u.ATTRIB_VALUE_UNQUOTED;j="attribValue";break}e===";"?(b[j]+=I(b),b.entity="",b.state=i):s(b.entity.length?o:n,e)?b.entity+=e:(C(b,"Invalid character in entity name"),b[j]+="&"+b.entity+e,b.entity="",b.state=i);continue;default:throw new Error(b,"Unknown state: "+b.state)}}b.position>=b.bufferCheckPosition&&d(b);return b}String.fromCodePoint||(function(){__p&&__p();var a=String.fromCharCode,b=Math.floor,c=function(){__p&&__p();var c=16384,d=[],e,f,g=-1,h=arguments.length;if(!h)return"";var i="";while(++g<h){var j=Number(arguments[g]);if(!isFinite(j)||j<0||j>1114111||b(j)!==j)throw RangeError("Invalid code point: "+j);j<=65535?d.push(j):(j-=65536,e=(j>>10)+55296,f=j%1024+56320,d.push(e,f));(g+1===h||d.length>c)&&(i+=a.apply(null,d),d.length=0)}return i};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:c,configurable:!0,writable:!0}):String.fromCodePoint=c})()})(typeof g==="undefined"?this.sax={}:g)}var j=!1,k=function(){j||(j=!0,i());return h.exports};a=function(a){switch(a){case void 0:return k()}};e.exports=a}),null);
__d("sax",["sax-1.2.4"],(function(a,b,c,d,e,f){e.exports=b("sax-1.2.4")()}),null);
__d("oz-player/shims/OzSax",["sax"],(function(a,b,c,d,e,f){e.exports=b("sax")}),null);
__d("oz-player/parsers/OzXmlParser",["oz-player/shims/OzSax","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f){__p&&__p();function g(){return{$:{}}}function a(){"use strict";__p&&__p();this.$4=[];this.$6=function(a){a=a.name;var c=g(),d=this.$3||this.$2;d||b("oz-player/shims/ozvariant")(0,219);Object.prototype.hasOwnProperty.call(d,a)||(d[a]=[]);d[a].push(c);this.$4.push(d);this.$3=c}.bind(this);this.$8=function(){var a=this.$4.pop();this.$3=a}.bind(this);this.$9=function(a){a=a.trim();if(!a)return;var c=this.$3;c||b("oz-player/shims/ozvariant")(0,220);c._&&b("oz-player/shims/ozvariant")(0,221);c._=a}.bind(this);this.$7=function(a){var c=a.name;a=a.value;var d=this.$3;d||b("oz-player/shims/ozvariant")(0,222);d.$[c]=a}.bind(this);var a=!0;a=this.$1=b("oz-player/shims/OzSax").parser(a);a.onerror=this.$5;a.onopentagstart=this.$6;a.onattribute=this.$7;a.onclosetag=this.$8;a.ontext=this.$9}a.prototype.$5=function(a){"use strict";throw a};a.prototype.parse=function(a){"use strict";__p&&__p();var b=g();this.$2=b;try{this.$1.write(a).close()}catch(a){throw a}this.$3=null;this.$2=null;this.$4=[];return b};e.exports=a}),null);
__d("oz-player/parsers/OzMpdParser",["oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant","oz-player/utils/OzErrorEmitter","oz-player/parsers/OzRepresentationParser","oz-player/parsers/OzVideoRepresentationParser","oz-player/parsers/OzXmlParser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(h,b("oz-player/shims/OzEventEmitter"));g=c&&c.prototype;function h(a,b,c,d,e,f,h){g.constructor.call(this),this.$SimpleMpd1=a,this.$SimpleMpd4=e,this.$SimpleMpd2=b,this.$SimpleMpd3=c,this.$SimpleMpd5=d,this.$SimpleMpd6=f,this.$SimpleMpd7=h}h.prototype.getLocation=function(){return this.$SimpleMpd5};h.prototype.getMinimumUpdatePeriod=function(){return this.$SimpleMpd4};h.prototype.getVideoRepresentations=function(){return this.$SimpleMpd2};h.prototype.getAudioRepresentations=function(){return this.$SimpleMpd3};h.prototype.getCustomField=function(a){var b=this.$SimpleMpd6.get(a);if(!b)throw new Error("Custom parser not specified for field "+a);try{return b(this.$SimpleMpd1)}catch(a){return null}};h.prototype.isStaticMpd=function(){return this.$SimpleMpd7};h.prototype.updateWith=function(a){this.$SimpleMpd8(this.$SimpleMpd2,a.getVideoRepresentations()),this.$SimpleMpd8(this.$SimpleMpd3,a.getAudioRepresentations()),this.$SimpleMpd7=a.isStaticMpd(),this.$SimpleMpd4=a.getMinimumUpdatePeriod(),this.emit("updated")};h.prototype.blockTimeRange=function(a){this.$SimpleMpd2.forEach(function(b){return b.blockTimeRange(a)}),this.$SimpleMpd3.forEach(function(b){return b.blockTimeRange(a)})};h.prototype.unblockTimeRange=function(){this.blockTimeRange({startTime:0,endTime:0})};h.prototype.$SimpleMpd8=function(a,b){__p&&__p();for(var c=0;c<b.length;c++){var d=b[c],e=!1;for(var f=0;f<a.length;f++){var g=a[f];if(d.getID()===g.getID()){g.updateWith(d);e=!0;break}}e||a.push(d)}};function a(a,c,d,e){this.$2=new(b("oz-player/utils/OzErrorEmitter"))(),this.$5=a,this.$1=d,this.$3=e,this.$4=c}a.prototype.onError=function(a){return this.$2.onError(a)};a.prototype.parse=function(a){__p&&__p();var c=null;a=new(b("oz-player/parsers/OzXmlParser"))().parse(a);c=a.MPD[0];c||b("oz-player/shims/ozvariant")(0,3628);c.Period.length>0||b("oz-player/shims/ozvariant")(0,3629);a=c.Period[0].AdaptationSet||[];var d=this.$6(c),e=this.$7(a,d);e.sort(function(a,b){return a.getHeight()-b.getHeight()});a=this.$8(a,"audio",d);var f=this.$4.mpdUrl;return new h(c,e,a,f,this.$9(c),this.$4.customParsers||new Map(),d==="static")};a.prototype.$9=function(a){a=a.$.minimumUpdatePeriod||"";a=/\d+/g.exec(a);if(a&&a.length){a=a[0];return a?Number.parseInt(a,10):null}return null};a.prototype.$6=function(a){return a.$.type||"static"};a.prototype.$7=function(a,c){a=this.$10(a,"video");return a?a.Representation.map(function(a){a=new(b("oz-player/parsers/OzVideoRepresentationParser"))(this.$5,a,this.$4,this.$1,this.$3,c);a.onError(this.$2.emitError);return a.parse()}.bind(this)):[]};a.prototype.$10=function(a,b){return a.find(function(a){a=a.Representation;return a&&a.length&&a[0].$.mimeType.indexOf(b)!==-1})};a.prototype.$8=function(a,c,d){a=this.$10(a,c);return a?a.Representation.map(function(a){a=new(b("oz-player/parsers/OzRepresentationParser"))(this.$5,a,this.$4,this.$1,this.$3,d);a.onError(this.$2.emitError);return a.parse()}.bind(this)):[]};e.exports=a}),null);
__d("oz-player/shims/ozClearTimeout",["clearTimeout"],(function(a,b,c,d,e,f){"use strict";e.exports=b("clearTimeout")}),null);
__d("oz-player/shims/ozSetTimeoutAcrossTransitions",["setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";e.exports=b("setTimeoutAcrossTransitions")}),null);
__d("oz-player/utils/OzMpdUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var b=[];b.push.apply(b,a.getVideoRepresentations().concat(a.getAudioRepresentations()));if(b.length){a=b[0].getTimeRanges();return a.length>0?a[a.length-1]:null}return null}e.exports={getMpdLastTimeRange:a}}),null);
__d("oz-player/utils/OzStreamInterruptChecker",["oz-player/shims/OzEventEmitter","oz-player/utils/OzMpdUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("oz-player/utils/OzMpdUtils").getMpdLastTimeRange;c=babelHelpers.inherits(a,b("oz-player/shims/OzEventEmitter"));g=c&&c.prototype;function a(a,b){g.constructor.call(this),this.$OzStreamInterruptChecker3=0,this.$OzStreamInterruptChecker4=null,this.$OzStreamInterruptChecker5=!1,this.$OzStreamInterruptChecker1=a,this.$OzStreamInterruptChecker2=b}a.prototype.notifyMpdUpdated=function(){var a=h(this.$OzStreamInterruptChecker1),b=a?a.endTime:null;b!==null&&b===this.$OzStreamInterruptChecker4?this.$OzStreamInterruptChecker3++:(this.$OzStreamInterruptChecker3=0,this.$OzStreamInterruptChecker5&&this.$OzStreamInterruptChecker4!==null&&this.$OzStreamInterruptChecker4!==void 0&&a!==null&&a!==void 0&&this.emit("streamResumedAt",a.startTime),this.$OzStreamInterruptChecker5=!1);a=this.$OzStreamInterruptChecker2.getNumber("stream_interrupt_check_mpd_stale_count_threshold",0);!this.$OzStreamInterruptChecker5&&a>0&&this.$OzStreamInterruptChecker3>=a&&b!==null&&b!==void 0&&(this.emit("streamInterruptAt",b),this.$OzStreamInterruptChecker5=!0);this.$OzStreamInterruptChecker4=b};e.exports=a}),null);
__d("oz-player/parsers/OzMpdUpdater",["oz-player/shims/ozClearTimeout","oz-player/shims/OzEventEmitter","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/utils/OzMpdUtils","oz-player/utils/OzReadableStreamUtils","oz-player/utils/OzStreamInterruptChecker","oz-player/parsers/OzMpdParser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("oz-player/utils/OzMpdUtils").getMpdLastTimeRange,i=b("oz-player/utils/OzReadableStreamUtils").pumpString;c=babelHelpers.inherits(a,b("oz-player/shims/OzEventEmitter"));g=c&&c.prototype;function a(a,c,d,e,f){__p&&__p();g.constructor.call(this);this.$OzMpdUpdater8=new(b("oz-player/utils/OzErrorEmitter"))();this.$OzMpdUpdater10=new(b("oz-player/shims/OzSubscriptionsHandler"))();this.$OzMpdUpdater11=!1;this.$OzMpdUpdater13=function(){__p&&__p();var a=this.$OzMpdUpdater3.getLocation();if(!a)return;if(this.$OzMpdUpdater7.getBool("live_disable_mpd_updates_when_paused",!1)&&!this.$OzMpdUpdater12.isPlaying()){this.setupUpdateLoop();return}var c=this.$OzMpdUpdater6.getOperationLogger("update_manifest").start();this.$OzMpdUpdater14(a).then(function(d){__p&&__p();var e=new(b("oz-player/parsers/OzMpdParser"))(this.$OzMpdUpdater7,{mpdUrl:a},this.$OzMpdUpdater1,this.$OzMpdUpdater6);e.onError(function(a){this.$OzMpdUpdater8.emitError(a),c.setError(a).log()}.bind(this));e=e.parse(d);this.$OzMpdUpdater3.updateWith(e);e.isStaticMpd()&&!this.$OzMpdUpdater3.isStaticMpd()&&this.emit("streamTransitionToStatic");d=h(this.$OzMpdUpdater3);e=d?d.endTime:null;c.setLiveheadPosition(e).setManifestType(this.$OzMpdUpdater3.isStaticMpd()?"static":"dynamic").log();this.$OzMpdUpdater9.notifyMpdUpdated();this.setupUpdateLoop()}.bind(this))["catch"](function(a){__p&&__p();c.setError(a).log();if(this.$OzMpdUpdater7.getBool("live_gracefully_handle_mpd_errors",!1)){var d;a instanceof b("oz-player/utils/OzError")&&(d=a.getExtra().code||"");switch(d){case"410":this.$OzMpdUpdater11=!0,this.emit("streamGone");case"0":this.setupUpdateLoop();return}}this.$OzMpdUpdater8.emitError(a)}.bind(this))}.bind(this);var i=c.getMinimumUpdatePeriod();this.$OzMpdUpdater1=d;this.$OzMpdUpdater3=c;this.$OzMpdUpdater12=e;this.$OzMpdUpdater4=i;this.$OzMpdUpdater6=f.cloneContext().setType("manifest");this.$OzMpdUpdater7=a;this.$OzMpdUpdater9=new(b("oz-player/utils/OzStreamInterruptChecker"))(this.$OzMpdUpdater3,this.$OzMpdUpdater7);this.$OzMpdUpdater10.addSubscriptions(this.$OzMpdUpdater9.addListener("streamResumedAt",function(a){this.emit("streamResumedAt",a)}.bind(this)),this.$OzMpdUpdater9.addListener("streamInterruptAt",function(a){this.emit("streamInterruptAt",a)}.bind(this)))}a.prototype.setupUpdateLoop=function(){var a=!this.$OzMpdUpdater11;a&&this.$OzMpdUpdater7.getBool("stop_manifest_update_when_static",!1)&&(a=!this.$OzMpdUpdater3.isStaticMpd(),this.$OzMpdUpdater4=this.$OzMpdUpdater3.getMinimumUpdatePeriod());a&&this.$OzMpdUpdater4&&this.$OzMpdUpdater3.getLocation()&&(this.$OzMpdUpdater5=b("oz-player/shims/ozSetTimeoutAcrossTransitions")(this.$OzMpdUpdater13,this.$OzMpdUpdater4*1e3))};a.prototype.onError=function(a){return this.$OzMpdUpdater8.onError(a)};a.prototype.$OzMpdUpdater14=function(a){a=this.$OzMpdUpdater1.requestRawUrl(a,{credentials:"same-origin"},this.$OzMpdUpdater6);a=a.getStream().getReader();return i(a)};a.prototype.destroy=function(){this.$OzMpdUpdater5&&b("oz-player/shims/ozClearTimeout")(this.$OzMpdUpdater5),this.$OzMpdUpdater10.release()};e.exports=a}),null);
__d("oz-player/playback_controls/OzPlaybackTimeRangeManager",["oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime;function a(a,b,c){this.$3=null,this.$4=0,this.$5=0,this.$7=!0,this.$6=a,this.$1=b,this.$2=c}a.prototype.setTimelineBlockingEnabled=function(a){this.$7=a,this.$7||this.$2.unblockTimeRange()};a.prototype.setTimeRangeProvider=function(a){this.$3!=null&&this.$3.remove(),this.$3=a.addUpdateListener(function(){var b=a.getTimeRanges(),c=0;if(b.length!==0){b=b[b.length-1];c=b.endTime}this.$8(c)}.bind(this))};a.prototype.$8=function(a){__p&&__p();if(!this.$7)return;if(this.$4===a)return;this.$4=a;if(this.$1.currentTime<=this.$5)return;a=this.$6.getNumber("livehead_fall_behind_block_threshold",0);var b=this.$6.getNumber("live_time_range_block_margin",0);if(b!==0&&a!==0&&this.$1.duration-this.$1.currentTime>a){a=[];for(var c=0;c<this.$1.buffered.length;c++)a.push({startTime:this.$1.buffered.start(c),endTime:this.$1.buffered.end(c)});c=g(this.$1.currentTime,a);this.$5=this.$1.currentTime+Math.min(c,b);a={startTime:this.$5,endTime:this.$1.duration-b};this.$2.blockTimeRange(a)}};a.prototype.destroy=function(){this.$3!=null&&(this.$3.remove(),this.$3=null)};e.exports=a}),null);
__d("oz-player/strategies/LiveheadSeekaheadStrategy",[],(function(a,b,c,d,e,f){"use strict";var g=.05;function a(a,b){b=Math.max.apply(Math,b.map(function(a){return a.startTime}));return b-a>0?b-a+g:0}e.exports={computeSeekAhead:a}}),null);
__d("oz-player/utils/OzTimelineGapUtil",["oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=1.5;function a(a,c){c=c.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});return new(b("oz-player/utils/OzNumericalRangeUtil"))().findCurrentRangeIndex(a,c)===-1}function c(a,c){var d=c.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});d=new(b("oz-player/utils/OzNumericalRangeUtil"))().findCurrentRangeIndex(a,d);if(d!==-1){c=c[d];return b("oz-player/utils/OzNumericalHelper").lessThanOrEqual(a,c.endTime)&&c.endTime-a<g}return!1}e.exports={isNearGap:c,isInGap:a}}),null);
__d("oz-player/playback_controls/OzPlayheadManager",["oz-player/shims/OzEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozvariant","oz-player/strategies/LiveheadSeekaheadStrategy","oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzTimelineGapUtil"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("oz-player/strategies/LiveheadSeekaheadStrategy").computeSeekAhead,i=b("oz-player/utils/OzTimelineGapUtil").isInGap,j=b("oz-player/utils/OzTimelineGapUtil").isNearGap;c=babelHelpers.inherits(a,b("oz-player/shims/OzEventEmitter"));g=c&&c.prototype;function a(a){__p&&__p();g.constructor.call(this);this.$OzPlayheadManager2=new(b("oz-player/shims/OzSubscriptionsHandler"))();this.$OzPlayheadManager3=new(b("oz-player/shims/OzSubscriptionsHandler"))();this.$OzPlayheadManager4=new Set();this.$OzPlayheadManager10=new Set();this.$OzPlayheadManager12=function(a){this.$OzPlayheadManager1.currentTime=a}.bind(this);this.$OzPlayheadManager14=!1;var c=a.video,d=a.mpd,e=a.playheadCatchup,f=a.playbackState,h=a.config,i=a.perfLoggerProvider,j=a.seekHandler;a=a.initialPlaybackPosition;this.$OzPlayheadManager1=c;this.$OzPlayheadManager6=h;this.$OzPlayheadManager7=f;this.$OzPlayheadManager8=d;this.$OzPlayheadManager9=e;this.$OzPlayheadManager11=i;j&&(this.$OzPlayheadManager12=j);this.$OzPlayheadManager13=a;this.$OzPlayheadManager2.addSubscriptions(b("oz-player/shims/OzEventListener").listen(this.$OzPlayheadManager1,"durationchange",function(){this.$OzPlayheadManager15(),this.$OzPlayheadManager16("durationchange")}.bind(this)),b("oz-player/shims/OzEventListener").listen(this.$OzPlayheadManager1,"pause",this.$OzPlayheadManager16.bind(this,"pause")),b("oz-player/shims/OzEventListener").listen(this.$OzPlayheadManager1,"play",this.$OzPlayheadManager16.bind(this,"play")),b("oz-player/shims/OzEventListener").listen(this.$OzPlayheadManager1,"playing",this.$OzPlayheadManager16.bind(this,"playing")),b("oz-player/shims/OzEventListener").listen(this.$OzPlayheadManager1,"waiting",this.$OzPlayheadManager16.bind(this,"waiting")))}a.prototype.observeSourceBufferState=function(a,c){this.$OzPlayheadManager4.has(a)&&b("oz-player/shims/ozvariant")(0,4179),this.$OzPlayheadManager4.add(a),this.$OzPlayheadManager2.addSubscriptions(a.addEventListener("buffer_updated",function(){return this.$OzPlayheadManager17(a,c)}.bind(this)))};a.prototype.$OzPlayheadManager17=function(a,b){__p&&__p();var c=[];if(this.$OzPlayheadManager6.getBool("check_buffer_range_once_for_playhead_update",!1)&&this.$OzPlayheadManager10.has(a))return;this.$OzPlayheadManager4.forEach(function(a){a=a.getBufferedRanges();a.length&&c.push(a[0])});c.length>0&&this.$OzPlayheadManager10.add(a);a=this.$OzPlayheadManager6.getBool("seek_ahead_use_native_current_time",!1)?this.$OzPlayheadManager1.currentTime:this.$OzPlayheadManager7.getCurrentTime();a=h(a,c);var d=this.$OzPlayheadManager6.getNumber("timeline_offset_threshold",0);a>0&&(d===0||a<d)&&this.$OzPlayheadManager18(this.$OzPlayheadManager1.currentTime+a,"first_available_buffer","source_buffer",b)};a.prototype.setTimeRangeProvider=function(a){this.$OzPlayheadManager3.release(),this.$OzPlayheadManager3.engage(),this.$OzPlayheadManager3.addSubscriptions(a.addUpdateListener(this.$OzPlayheadManager16.bind(this,"time_range_updated"))),this.$OzPlayheadManager5=a,this.$OzPlayheadManager16("time_range_set")};a.prototype.$OzPlayheadManager15=function(){var a=this.$OzPlayheadManager1.duration;if(this.$OzPlayheadManager13!==0&&!this.$OzPlayheadManager14&&!isNaN(a)&&a!==Infinity){a=this.$OzPlayheadManager13>0?this.$OzPlayheadManager13:a+this.$OzPlayheadManager13;this.$OzPlayheadManager14=!0;this.$OzPlayheadManager18(a,"initial_playback_position","");this.emit("initialPlaybackPositionSet",a)}};a.prototype.$OzPlayheadManager16=function(a,c){__p&&__p();c===void 0&&(c=null);var d=this.$OzPlayheadManager9;if(d&&d.isEnabled(this.$OzPlayheadManager1,this.$OzPlayheadManager8)){d=d.computeNewPlayheadPosition(this.$OzPlayheadManager1,this.$OzPlayheadManager8);if(typeof d==="number"){this.$OzPlayheadManager18(d,"live_catch_up_strategy",a,c);return}}d=this.$OzPlayheadManager6.getNumber("auto_seek_playhead_slack",0);if(d===0)return;var e=this.$OzPlayheadManager5;if(!e)return;var f=this.$OzPlayheadManager7.getCurrentTime(),g=e.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}),h=new(b("oz-player/utils/OzNumericalRangeUtil"))().findNextRangeIndex(f,g);if((j(f,e.getTimeRanges())||i(f,e.getTimeRanges()))&&h!==-1){f=g[h];this.$OzPlayheadManager18(f.rangeStart+d,"jump_over_timeline_gap",a,c)}};a.prototype.destroy=function(){this.$OzPlayheadManager2.release(),this.$OzPlayheadManager3.release(),this.$OzPlayheadManager4.clear()};a.prototype.$OzPlayheadManager18=function(a,b,c,d){var e=a-this.$OzPlayheadManager1.currentTime,f=this.$OzPlayheadManager6.getNumber("seek_ahead_epsilon",0);if(f>0&&e<=f)return;this.$OzPlayheadManager11.getOperationLogger("playhead_adjustment").setLength(Math.round(e*1e3)).setReason(b).setInitiator(c).setType(d).log();this.$OzPlayheadManager12(a)};e.exports=a}),null);
__d("oz-player/playback_controls/OzPlayheadNudger",["oz-player/shims/OzEventListener","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){this.$2=new(b("oz-player/shims/OzSubscriptionsHandler"))(),this.$3=null,this.$1=c,this.$4=a,this.$2.addSubscriptions(b("oz-player/shims/OzEventListener").listen(this.$1,"timeupdate",this.$5.bind(this)),b("oz-player/shims/OzEventListener").listen(this.$1,"playing",this.$6.bind(this)),b("oz-player/shims/OzEventListener").listen(this.$1,"pause",this.$7.bind(this)))}a.prototype.$5=function(){var a=this.$4.getNumber("playhead_nudge_slack",0);if(a===0)return;var b=this.$3;b!=null&&!this.$1.paused&&this.$1.readyState===4&&(this.$1.currentTime===b&&(this.$1.currentTime+=a),this.$3=null)};a.prototype.$6=function(){this.$3=this.$1.currentTime};a.prototype.$7=function(){this.$3=null};a.prototype.destroy=function(){this.$2.release()};e.exports=a}),null);
__d("oz-player/shims/ozThrottle",["throttle"],(function(a,b,c,d,e,f){"use strict";e.exports=b("throttle")}),null);
__d("oz-player/states/OzObservedPlaybackState",["oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/shims/OzEventListener","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider,h=150;function a(a,c){c===void 0&&(c=new g([])),this.$3=new(b("oz-player/shims/OzSubscriptionsHandler"))(),this.$6=function(a){this.$4.getOperationLogger("pause").setState("paused").log()}.bind(this),this.$7=function(a){this.$5(),this.$4.getOperationLogger("playing").setState("playing").log()}.bind(this),this.$5=function(a){this.$2=this.$1.currentTime}.bind(this),this.$1=a,this.$4=c,this.$2=this.$1.currentTime,this.$3.addSubscriptions(b("oz-player/shims/OzEventListener").listen(this.$1,"seeked",this.$5),b("oz-player/shims/OzEventListener").listen(this.$1,"seeking",this.$5),b("oz-player/shims/OzEventListener").listen(this.$1,"timeupdate",b("oz-player/shims/ozThrottle")(this.$5,h)),b("oz-player/shims/OzEventListener").listen(this.$1,"pause",this.$6),b("oz-player/shims/OzEventListener").listen(this.$1,"playing",this.$7))}a.prototype.isPlaying=function(){return!this.$1.paused};a.prototype.getCurrentTime=function(){return this.$2};a.prototype.forceUpdateCurrentTime=function(){this.$5()};a.prototype.getDuration=function(){return this.$1.duration};a.prototype.addEventListener=function(a,c){return b("oz-player/shims/OzEventListener").listen(this.$1,a,c)};a.prototype.destroy=function(){this.$3.release()};e.exports=a}),null);
__d("oz-player/states/OzPlayerDimensions",[],(function(a,b,c,d,e,f){"use strict";function a(a){this.setDimensions(a)}a.prototype.setDimensions=function(a){this.$1=a.width,this.$2=a.height};a.prototype.getDimensions=function(){return{width:this.$1,height:this.$2}};e.exports=a}),null);
__d("oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy",["oz-player/networks/OzBandwidthEstimator"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){this.$1=a,this.$2=b}a.prototype.isActive=function(a){return!0};a.prototype.getSegmentsCount=function(a,c,d){var e=b("oz-player/networks/OzBandwidthEstimator").getBandwidth(this.$1),f=b("oz-player/networks/OzBandwidthEstimator").getStandardDeviationOfBandwidth(),g=this.$1.getNumber("bandwidth_boundary_standard_deviation_factor",1);a=this.$2.some(function(a){a=a.getBandwidth();return Math.abs(a-e)<f*g})?this.$1.getNumber("segments_to_stream_near_bandwidth_boundary",5):this.$1.getNumber("segments_to_stream",5);d=this.$3(c,e);return Math.min(a,d)};a.prototype.$3=function(a,b){__p&&__p();var c=Infinity;a=a.getByteRange();if(a){var d=a.endByte;if(d!==null&&d!==void 0){var e=this.$1.getNumber("per_stream_duration_target",0);d=d-a.startByte;e>1e-5&&d!==0&&(c=Math.ceil(e*b/(d*8)))}}return c};e.exports=a}),null);
__d("oz-player/strategies/OzPlaybackConfidenceUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=.8;function a(a,b,c,d,e,f,i,j){__p&&__p();c=Math.min(1,c/d);d=1+(1-c)*e;c=a.getBandwidth()*d;if(c>b)return g*(b/c);e=0;if(f!=null&&i!=null&&j>0){d=h(a,b,f,i);d!=null&&d>0&&(e=d/1e3*j)}return 1-(1-g)*c/b-e}function h(a,b,c,d){var e=a.getBandwidth();a=a.getSegment(0);if(a){a=a.getTimeRange();a=(a.endTime-a.startTime)*c;c=a*e/b*1e3+d;return c-a*1e3}}e.exports={getPlaybackConfidence:a,getEstimatedDownloadTimeBufferDeltaMs:h}}),null);
__d("oz-player/strategies/OzAbrManager",["oz-player/networks/OzBandwidthEstimator","oz-player/utils/OzAbrUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzPlaybackRestrictionsUtils","oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy","oz-player/strategies/OzPlaybackConfidenceUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/utils/OzAbrUtils").excludeLargeRepresentations,h=b("oz-player/utils/OzAbrUtils").getReasonToPreventEvaluation,i=b("oz-player/utils/OzBufferingUtils").getBufferAheadFromPlaybackStates,j=b("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions;function a(a,c,d,e,f,g,h){this.$2=0,this.$3=Date.now(),this.$4=!1,this.$12=null,this.$1=a,this.$5=c,this.$6=this.$15(c,d),this.$7=e,this.$8=f,this.$10=g,this.$13=h,this.$14=new(b("oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy"))(a,d)}a.prototype.setSourceBuffer=function(a){this.$9=a};a.prototype.$15=function(a,b){var c=this.$1.getNumber("abr_restrict_from_index",0),d=this.$1.getNumber("abr_restrict_to_index",0);if(d===0&&c===0)return b;var e=b.findIndex(function(b){return a.getID()===b.getID()});return e===-1?b:b.filter(function(a,b){return b-e>=c&&b-e<=d})};a.prototype.$16=function(a){a=g(this.$1,a,this.$10.getDimensions(),this.$13);a=j(this.$7,this.$10.getDimensions(),a);return a};a.prototype.getBestRepresentation=function(a){__p&&__p();a===void 0&&(a=null);var c=i(this.$9,this.$8),d=h(this.$1,this.$4,c,b("oz-player/networks/OzBandwidthEstimator").getSampleCount(),this.$2,this.$3);if(d!==null&&d!==void 0){this.$12=d;return this.$5}d=Date.now();this.$2=d;var e=b("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(this.$1),f=this.$16(this.$6),g=null;this.$1.getBool("abr_use_download_time",!1)&&a!=null?g=this.$17(f,e,a)||this.$18(f,e,c,a):g=this.$18(f,e,c,a);g=g||this.$6[0];if(this.$19(c,g)){this.$12="high_buffer";return this.$5}this.$5!==g&&(this.$4=!0,this.$3=d,this.$5=g);this.$12="bandwidth";return g};a.prototype.$18=function(a,c,d,e){e===void 0&&(e=null);var f=null;for(var g=0;g<a.length;g++){var h=b("oz-player/strategies/OzPlaybackConfidenceUtils").getPlaybackConfidence(a[g],c,d,this.$1.getNumber("low_buffer_bandwidth_target_threshold",10),this.$1.getNumber("low_buffer_bandwidth_target_increase_factor",0),e,b("oz-player/networks/OzBandwidthEstimator").getEstimatedTimeToFirstByteMs(this.$1),this.$1.getNumber("download_time_buffer_delta_penalty_factor",0));h>this.$1.getNumber("abr_confidence_threshold",.7)&&(!f||f.getBandwidth()<a[g].getBandwidth())&&(f=a[g])}return f};a.prototype.$17=function(a,c,d){for(var e=a.length-1;e>=0;e--){var f=b("oz-player/strategies/OzPlaybackConfidenceUtils").getEstimatedDownloadTimeBufferDeltaMs(a[e],c,d,b("oz-player/networks/OzBandwidthEstimator").getEstimatedTimeToFirstByteMs(this.$1)||0);if(f!=null&&f+this.$1.getNumber("minimum_download_additional_buffer_ms",0)<0)return a[e]}return null};a.prototype.$19=function(a,b){var c=this.$1.getNumber("abr_prevent_down_switch_buffer_threshold",0);return c>0&&a>=c&&this.$5.getBandwidth()>b.getBandwidth()?!0:!1};a.prototype.getStreamSegmentsCountStrategy=function(){return this.$14};a.prototype.getLastEvaluationReason=function(){return this.$12};e.exports=a}),null);
__d("oz-player/strategies/OzBufferAheadPriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime,i=6,j=1e3;c=babelHelpers.inherits(a,b("oz-player/shims/OzEventEmitter"));g=c&&c.prototype;function a(a){g.constructor.call(this),this.$OzBufferAheadPriorityStrategy3=new(b("oz-player/shims/OzSubscriptionsHandler"))(),this.$OzBufferAheadPriorityStrategy4=function(){this.emit("state_changed")}.bind(this),this.$OzBufferAheadPriorityStrategy1=a,this.$OzBufferAheadPriorityStrategy3.addSubscriptions(this.$OzBufferAheadPriorityStrategy1.addEventListener("progress",b("oz-player/shims/ozThrottle")(this.$OzBufferAheadPriorityStrategy4,j)),this.$OzBufferAheadPriorityStrategy1.addEventListener("timeupdate",b("oz-player/shims/ozThrottle")(this.$OzBufferAheadPriorityStrategy4,j)))}a.prototype.getName=function(){return"buffer_ahead"};a.prototype.setSourceBufferState=function(a){if(this.$OzBufferAheadPriorityStrategy2)return;this.$OzBufferAheadPriorityStrategy3.addSubscriptions(a.addEventListener("buffer_updated",b("oz-player/shims/ozThrottle")(this.$OzBufferAheadPriorityStrategy4,j)))};a.prototype.isActive=function(){return!0};a.prototype.getPriority=function(){var a=this.$OzBufferAheadPriorityStrategy2;if(!a)return 1;var b=this.$OzBufferAheadPriorityStrategy1.getCurrentTime();a=a.getBufferedRanges();b=h(b,a);return b>=i?0:1};a.prototype.destroy=function(){this.$OzBufferAheadPriorityStrategy3.release()};e.exports=a}),null);
__d("oz-player/strategies/OzBufferAheadTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";function a(a){this.$1=a}a.prototype.isActive=function(){return!0};a.prototype.getBufferTarget=function(){return this.$1.getNumber("buffer_ahead_target",10)};e.exports=a}),null);
__d("oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){this.$1=a,this.$2=b}a.prototype.isActive=function(a){return this.$2.getBool("only_bound_stream_segment_counts_when_paused",!1)?!a.isPlaying():!0};a.prototype.getSegmentsCount=function(a,b,c){__p&&__p();a=a.getCurrentTime();var d=this.$1.computeBufferTarget(),e=1,f=b;b=b.getTimeRange().startTime;while(f!==null&&b<d+a){f=c.getSegmentAfter(f);if(!f)break;b=f.getTimeRange().startTime;e++}return e};e.exports=a}),null);
__d("oz-player/strategies/OzBufferTargetCalculator",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=0,this.$2=a}a.prototype.computeBufferTarget=function(){__p&&__p();for(var a=this.$2,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;if(d.isActive()){d=d.getBufferTarget();this.$1=d;return d}}return this.$1};e.exports=a}),null);
__d("oz-player/strategies/OzLiveheadDeltaCatchupStrategy",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$3=a}a.prototype.isEnabled=function(a,b){return(!this.$3.getBool("live_catch_up_only_when_paused",!1)||a.paused)&&typeof b.getMinimumUpdatePeriod()==="number"};a.prototype.computeNewPlayheadPosition=function(a,b){a=a.currentTime;b=b.getVideoRepresentations()[0];if(!b)return null;b=b.getTimeRanges();if(b.length===0)return null;b=b[b.length-1].endTime;return b-a>this.$3.getNumber("live_catch_up_fall_behind_threshold",20)?b-this.$3.getNumber("live_catch_up_live_head_delta",6):null};e.exports=a}),null);
__d("oz-player/strategies/OzPausedStreamSegmentsCountStrategy",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){this.$1=a,this.$2=b}a.prototype.isActive=function(){return!this.$1.isPlaying()};a.prototype.getSegmentsCount=function(a,b,c){return this.$2.getNumber("paused_stream_segments_count",0)};e.exports=a}),null);
__d("oz-player/strategies/OzPlayheadAtInterruptionDetector",["oz-player/shims/OzEventEmitter","oz-player/shims/OzEventListener","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=1;c=babelHelpers.inherits(a,b("oz-player/shims/OzEventEmitter"));g=c&&c.prototype;function a(a){g.constructor.call(this),this.$OzPlayheadAtInterruptionDetector2=null,this.$OzPlayheadAtInterruptionDetector3=new(b("oz-player/shims/OzSubscriptionsHandler"))(),this.$OzPlayheadAtInterruptionDetector1=a,this.$OzPlayheadAtInterruptionDetector3.addSubscriptions(b("oz-player/shims/OzEventListener").listen(this.$OzPlayheadAtInterruptionDetector1,"waiting",this.$OzPlayheadAtInterruptionDetector4.bind(this)))}a.prototype.notifyStreamInterrupted=function(a){this.$OzPlayheadAtInterruptionDetector2=a,this.$OzPlayheadAtInterruptionDetector4()};a.prototype.notifyStreamResumed=function(){this.$OzPlayheadAtInterruptionDetector2=null};a.prototype.$OzPlayheadAtInterruptionDetector4=function(){if(this.$OzPlayheadAtInterruptionDetector2!=null){var a=this.$OzPlayheadAtInterruptionDetector2||0;Math.abs(this.$OzPlayheadAtInterruptionDetector1.currentTime-a)<h&&this.emit("playheadAtInterruption",a)}};a.prototype.destroy=function(){this.$OzPlayheadAtInterruptionDetector3.release()};e.exports=a}),null);
__d("oz-player/strategies/OzPlayingStatePriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("oz-player/shims/OzEventEmitter"));g=c&&c.prototype;function a(a){g.constructor.call(this),this.$OzPlayingStatePriorityStrategy1=new(b("oz-player/shims/OzSubscriptionsHandler"))(),this.$OzPlayingStatePriorityStrategy3=function(){this.emit("state_changed")}.bind(this),this.$OzPlayingStatePriorityStrategy2=a,this.$OzPlayingStatePriorityStrategy1.addSubscriptions(this.$OzPlayingStatePriorityStrategy2.addEventListener("playing",this.$OzPlayingStatePriorityStrategy3),this.$OzPlayingStatePriorityStrategy2.addEventListener("play",this.$OzPlayingStatePriorityStrategy3),this.$OzPlayingStatePriorityStrategy2.addEventListener("pause",this.$OzPlayingStatePriorityStrategy3))}a.prototype.isActive=function(){return!0};a.prototype.getName=function(){return"playing_state"};a.prototype.setSourceBufferState=function(a){};a.prototype.getPriority=function(){return this.$OzPlayingStatePriorityStrategy2.isPlaying()?1:0};a.prototype.destroy=function(){this.$OzPlayingStatePriorityStrategy1.release()};e.exports=a}),null);
__d("oz-player/strategies/OzPriorityCalculator",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("oz-player/shims/OzEventEmitter"));g=c&&c.prototype;function a(a){g.constructor.call(this);this.$OzPriorityCalculator2=new(b("oz-player/shims/OzSubscriptionsHandler"))();this.$OzPriorityCalculator1=a;(a=this.$OzPriorityCalculator2).addSubscriptions.apply(a,this.$OzPriorityCalculator1.map(function(a){return a.addListener("state_changed",function(b){this.emit("state_changed",this.compute(),a.getName())}.bind(this))}.bind(this)))}a.prototype.setSourceBufferState=function(a){this.$OzPriorityCalculator1.forEach(function(b){return b.setSourceBufferState(a)}),this.emit("state_changed",this.compute(),"source_buffer")};a.prototype.compute=function(){return this.$OzPriorityCalculator1.reduce(function(a,b){b=b.isActive()?b.getPriority():0;return a+b},0)};a.prototype.destroy=function(){this.$OzPriorityCalculator2.release()};e.exports=a}),null);
__d("oz-player/strategies/OzStartupBufferTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){this.$1=a,this.$3=b}a.prototype.isActive=function(){var a=this.$1.isPlaying();a&&(this.$2=!0);return!this.$2};a.prototype.getBufferTarget=function(){return this.$3.getNumber("pre_start_buffer_ahead_target",10)};e.exports=a}),null);
__d("oz-player/strategies/OzStaticStreamSegmentsStrategy",[],(function(a,b,c,d,e,f){"use strict";function a(a){this.$1=a}a.prototype.isActive=function(){return!0};a.prototype.getSegmentsCount=function(a,b,c){return this.$1.getNumber("segments_to_stream",5)};e.exports=a}),null);
__d("oz-player/strategies/OzStreamSegmentsCountCalculator",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=1;function a(a){this.$1=a}a.prototype.computeMin=function(a,b,c){__p&&__p();var d=Number.MAX_VALUE;for(var e=this.$1,f=Array.isArray(e),h=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;i.isActive(a)&&(d=Math.min(d,i.getSegmentsCount(a,b,c)))}return d===Number.MAX_VALUE?g:Math.max(d,g)};e.exports=a}),null);
__d("oz-player/streams/OzEndOfStreamWatcher",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozvariant"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("oz-player/shims/OzEventEmitter"));g=c&&c.prototype;function a(a,c){g.constructor.call(this),this.$OzEndOfStreamWatcher1=new Map(),this.$OzEndOfStreamWatcher2=new(b("oz-player/shims/OzSubscriptionsHandler"))(),this.$OzEndOfStreamWatcher3=a,this.$OzEndOfStreamWatcher4=c}a.prototype.registerMediaStream=function(a){this.$OzEndOfStreamWatcher1.has(a)&&b("oz-player/shims/ozvariant")(0,5191),this.$OzEndOfStreamWatcher1.set(a,!1)};a.prototype.notifyRepresentationSwitched=function(a){this.$OzEndOfStreamWatcher1.has(a)||b("oz-player/shims/ozvariant")(0,5192),this.$OzEndOfStreamWatcher5()};a.prototype.notifyMediaStreamEnded=function(a){this.$OzEndOfStreamWatcher1.has(a)||b("oz-player/shims/ozvariant")(0,5192),this.$OzEndOfStreamWatcher1.set(a,!0),this.$OzEndOfStreamWatcher5()};a.prototype.$OzEndOfStreamWatcher5=function(){var a=this.$OzEndOfStreamWatcher3.getMediaSource();(this.$OzEndOfStreamWatcher4.getBool("allow_queueing_end_of_stream_when_update",!1)||a.readyState==="open")&&this.$OzEndOfStreamWatcher6()&&(this.$OzEndOfStreamWatcher4.getBool("fix_end_of_stream_during_update",!1)?this.$OzEndOfStreamWatcher3.notifyEndOfStream():a.endOfStream(),this.emit("streamEnd"))};a.prototype.$OzEndOfStreamWatcher6=function(){__p&&__p();if(this.$OzEndOfStreamWatcher1.size===0)return!1;for(var a=this.$OzEndOfStreamWatcher1.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;if(!d)return!1}return!0};a.prototype.destroy=function(){this.$OzEndOfStreamWatcher1.clear()};e.exports=a}),null);
__d("oz-player/streams/OzHandleUserRepresentationSwitch",["oz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f){this.$4=null,this.$5=new(b("oz-player/shims/OzSubscriptionsHandler"))(),this.$1=a,this.$2=c,this.$3=d,this.$6=e,f.then(function(a){this.$4=a}.bind(this)),this.$5.addSubscriptions(e.addListener("switchRepresentation",this.$7.bind(this)))}a.prototype.cleanup=function(){this.$5.release(),this.$5.engage()};a.prototype.$7=function(a,b){__p&&__p();if(!this.$1.getBool("clear_buffer_on_user_quality_upgrade",!1)||a!=="user")return;a=this.$6.getRepresentationIDAtTime(this.$2.getCurrentTime());var c;if(this.$4){for(var d=0;d<this.$3.length;d++)this.$3[d].getID()===a&&(c=this.$3[d]);if(c&&b&&c.getBandwidth()<b.getBandwidth()){a=c.getSegmentByTime(this.$2.getCurrentTime());a&&(this.$4&&this.$4.clearRange(this.$2.getCurrentTime(),this.$2.getDuration()))}}};e.exports=a}),null);
__d("oz-player/networks/OzReadableStreamDataReader",["oz-player/utils/ozConcatArrayBuffer","oz-player/networks/OzTransformStream"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("oz-player/networks/OzTransformStream"));g=c&&c.prototype;function a(a){g.constructor.call(this),this.$OzReadableStreamDataReader1=new ArrayBuffer(0),this.$OzReadableStreamDataReader2=a}a.prototype.onDataWritten=function(a){this.$OzReadableStreamDataReader1=b("oz-player/utils/ozConcatArrayBuffer")(this.$OzReadableStreamDataReader1,a.buffer)};a.prototype.onClose=function(){this.$OzReadableStreamDataReader2(this.$OzReadableStreamDataReader1)};e.exports=a}),null);
__d("oz-player/shims/ozPerformanceNow",["performanceNow"],(function(a,b,c,d,e,f){"use strict";e.exports=b("performanceNow")}),null);
__d("oz-player/networks/OzStreamingTask",["Promise","oz-player/loggings/OzLoggingUtils","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/ozPerformanceNow","oz-player/utils/OzError","oz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation,h=b("oz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes;function a(a,c){this.$3=new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise")),this.$5=!1,this.$1=this.$2=new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise")),this.$6=this.$3.getPromise(),this.$7=b("oz-player/shims/ozPerformanceNow")(),this.$8=c,this.$9=a}a.prototype.run=function(){var a=this.$8;if(a){var c=b("oz-player/shims/ozPerformanceNow")()-this.$7;g(this.$6,a,"streaming_task",function(){},function(a){a.setTimeToRequestSent(Math.floor(c))})}this.$2.resolve();return this.$6};a.prototype.cancel=function(){this.$3.reject(new(b("oz-player/utils/OzError"))({type:"OZ_STREAMING_TASK",description:"task cancelled"})),this.$5=!0};a.prototype.finish=function(){this.$3.resolve()};a.prototype.isCancelled=function(){return this.$5};a.prototype.addStream=function(a,c,d){var e=new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise"));this.$10({pausableStreamPromise:b("Promise").resolve({pausableStream:a,loggingPayloads:d}),changeStatusDeferred:e,createStreamDeferred:new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise")),loggerProviderWithStreamContext:c,loggingPayloads:d});return{getStream:function(){return a.getStream()},cancel:function(){return a.pauseStream()},getStatusChangePromise:function(){return e.getPromise()}}};a.prototype.addStreamDeferred=function(a,c){var d=new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise")),e=new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise"));this.$10({pausableStreamPromise:a,changeStatusDeferred:d,createStreamDeferred:e,loggerProviderWithStreamContext:c});var f=function(){return e.getPromise()};return{genStream:f,cancel:function(){f().then(function(a){return a.pauseStream()})},getStatusChangePromise:function(){return d.getPromise()}}};a.prototype.$10=function(a){__p&&__p();var c=a.pausableStreamPromise,d=a.changeStatusDeferred,e=a.createStreamDeferred,f=a.loggerProviderWithStreamContext,i=a.loggingPayloads;a=this.$1.getPromise();var j=b("oz-player/shims/ozPerformanceNow")(),k=this.$1=new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise"));a.then(function(){return c}).then(function(a){__p&&__p();if(a){var c=a.pausableStream;a.loggingPayloads&&(i=a.loggingPayloads);e.resolve(c.getStream());this.$4=c;var d=b("oz-player/shims/ozPerformanceNow")();a=this.$11(c.startStream());f&&g(a,f,"fetch_stream",function(){},function(a){i&&h(a,i.getRequestUrl(),i.isPrefetch(),i.segments,d-j)});return a}return null}.bind(this)).then(function(a){this.$4=null,k.resolve(),d.resolve(a||"cancelled")}.bind(this))["catch"](function(a){this.$4=null,this.$3.reject(a),this.$9.getBool("throw_network_error",!1)&&d.reject(a)}.bind(this))};a.prototype.$11=function(a){return a.then(function(a){a=a.statusPromise;return a.then(function(a){return a==="stream_done"?"done":"error"})})};e.exports=a}),null);
__d("oz-player/networks/OzStreamingTaskStateManager",["Promise","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/networks/OzStreamingTask","oz-player/networks/OzStreamingTaskQueueProvider"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e){this.$3=new(b("oz-player/shims/OzSubscriptionsHandler"))(),this.$4=0,this.$9=!1,this.$5=a,this.$1=c,this.$6=b("oz-player/networks/OzStreamingTaskQueueProvider").getQueue(this.$5),this.$7=d,this.$8=e,this.$8.getBool("real_time_priority_update",!1)&&this.$3.addSubscriptions(this.$1.addListener("state_changed",function(a,b){this.$10(a,b),this.$2&&this.$6.updatePriority(this.$2,this.$4)}.bind(this)))}a.prototype.startStream=function(a){__p&&__p();var b=a.streamableSegments,c=a.networkManager;a=a.segmentsLoggerProvider;var d=this.$11(a);c=c.createPausableStream(b);b=c.pausableStream;c=c.loggingPayloads;this.$9=!0;d=d.addStream(b,a,c);b={getStream:d.getStream,cancel:d.cancel,getStatusChangePromise:this.$12(d.getStatusChangePromise)};return b};a.prototype.startStreamDeferred=function(a){__p&&__p();var c=a.segmentsPromise,d=a.networkManager;a=a.segmentsLoggerProvider;var e=this.$11(a),f=new(b("oz-player/shims/OzMaybeNativePromise"))(function(a,b){c.then(function(b){b.length>0?a(d.createPausableStream(b)):a(null)})["catch"](function(a){return b(a)})});this.$9=!0;e=e.addStreamDeferred(f,a);f={genStream:e.genStream,cancel:e.cancel,getStatusChangePromise:this.$12(e.getStatusChangePromise)};return f};a.prototype.$11=function(a){a=this.$2;this.$10(this.$1.compute(),"start_stream");!a||a.isCancelled()?(a=this.$2=new(b("oz-player/networks/OzStreamingTask"))(this.$8,this.$7),this.$6.enqueue(a,this.$4)):this.$6.updatePriority(a,this.$4);return a};a.prototype.$12=function(a){return function(){return a().then(function(a){this.$13();return a}.bind(this))["catch"](function(a){this.$13();return b("Promise").reject(a)}.bind(this))}.bind(this)};a.prototype.finishTaskIfNoOngoingStream=function(){this.$9||this.$14()};a.prototype.destroy=function(){this.$3.release()};a.prototype.$13=function(){this.$9=!1,this.$10(this.$1.compute(),"end_stream"),this.$4<b("oz-player/networks/OzStreamingTaskQueueProvider").OZ_QUEUE_MAX_PRIORITY&&this.$14()};a.prototype.$14=function(){this.$2&&(this.$2.finish(),this.$2=null)};a.prototype.$10=function(a,b){if(a===this.$4)return;this.$4=a;this.$7&&this.$7.getOperationLogger("priority_changed").setPriorityFloat(this.$4).setInitiator(b).log()};e.exports=a}),null);
__d("oz-player/shims/OzTaggedTimeRanges",["TaggedTimeRanges"],(function(a,b,c,d,e,f){"use strict";function a(a){this.$1=new(b("TaggedTimeRanges"))(a)}a.prototype.add=function(a,b,c){this.$1.add(a,b,{id:c.id})};a.prototype.get=function(a){return this.$1.get(a)};e.exports=a}),null);
__d("oz-player/strategies/OzStreamLengthStrategy",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getStreamingSegments:function(a,b,c,d,e){__p&&__p();var f=a.getNumber("segments_to_stream_under_playhead_threshold",0);a=a.getNumber("low_segment_stream_playhead_threshold",0);f>0&&d.getCurrentTime()<a&&(b=f);d=[];d.push(e);for(var a=1;a<b;a++){f=c.getSegmentAfter(e);if(!f)break;e=f;d.push(e)}return d}};e.exports=a}),null);
__d("oz-player/streams/OzMediaStreamLoopDriver",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();this.$2=null,this.$3=!1,this.$4=function(){__p&&__p();this.$5();if(this.$3)return;var a=this.$1.execute(),b=this.$1.getLoopInterval();b&&(this.$2=setTimeout(function(){this.$4()}.bind(this),b));a&&a.then(this.$4)["catch"](function(a){this.$5();a=this.$1.handleError(a);a?this.$2=setTimeout(this.$4,a):this.$3=!0}.bind(this))}.bind(this),this.$1=a}a.prototype.start=function(){if(this.$3)throw new Error("restart is not implemented");this.$4()};a.prototype.stop=function(){this.$5(),this.$3=!0};a.prototype.$5=function(){this.$2&&(clearTimeout(this.$2),this.$2=null)};e.exports=a}),null);
__d("oz-player/utils/OzRangeUtils",[],(function(a,b,c,d,e,f){"use strict";a={getRangeForTime:function(a,b){b=b.filter(function(b){return b.startTime<=a&&b.endTime>=a});return b!=null&&b.length>0?b[0]:null}};e.exports=a}),null);
__d("oz-player/streams/OzSegmentLocator",["oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzRangeUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/utils/OzRangeUtils").getRangeForTime;a={getSegment:function(a,c,d,e,f,h,i,j){__p&&__p();var k=c.getCurrentTime();k=e?g(k,e.getBufferedRanges()):null;e=h?h.getTimeRange().endTime:0;if(i.getBool("use_stream_end_time_in_segment_locator",!1)&&k&&k.endTime===j)return null;h=c.getCurrentTime()||0;e?h=e:k&&(h=k.endTime);j=h-c.getCurrentTime();if(i.getBool("compute_buffer_ahead_with_timeline_gaps",!1)){e=f.getTimeRanges();j=new(b("oz-player/utils/OzNumericalRangeUtil"))().findDiffCoveredByRanges(c.getCurrentTime(),h,e.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}))}if(j>d)return null;k=a.getSegment(0);i.getNumber("auto_seek_playhead_slack",0)===0&&k&&k.getTimeRange().startTime>h&&(h=k.getTimeRange().startTime);f=a.getSegmentByTime(h);return f}};e.exports=a}),null);
__d("oz-player/utils/OzMimeUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){return(a.split("/")[0]||"").trim()}e.exports={getMimeType:a}}),null);
__d("oz-player/streams/OzMediaStream",["oz-player/networks/OzNetworkManager","oz-player/networks/OzReadableStreamDataReader","oz-player/networks/OzStreamingTask","oz-player/networks/OzStreamingTaskQueueProvider","oz-player/networks/OzStreamingTaskStateManager","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/OzTaggedTimeRanges","oz-player/shims/ozvariant","oz-player/strategies/OzStreamLengthStrategy","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/utils/OzMimeUtil","oz-player/utils/OzRangeUtils","oz-player/streams/OzMediaStreamLoopDriver","oz-player/streams/OzSegmentLocator","oz-player/shims/OzEventEmitter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("oz-player/utils/OzMimeUtil").getMimeType,i=b("oz-player/utils/OzRangeUtils").getRangeForTime,j=1e3,k=.2;c=babelHelpers.inherits(a,b("oz-player/shims/OzEventEmitter"));g=c&&c.prototype;function a(a,c,d,e,f,i,j,k,l,m,n,o,p,q){g.constructor.call(this),this.$OzMediaStream9=null,this.$OzMediaStream11=!1,this.$OzMediaStream12=null,this.$OzMediaStream13=new(b("oz-player/shims/OzSubscriptionsHandler"))(),this.$OzMediaStream15=[],this.$OzMediaStream19=0,this.$OzMediaStream26=!0,this.$OzMediaStream28=!1,this.$OzMediaStream29=null,this.$OzMediaStream30=new(b("oz-player/utils/OzErrorEmitter"))(),this.$OzMediaStream1=a,this.$OzMediaStream2=c,this.$OzMediaStream2.then(function(a){this.$OzMediaStream3=a,this.$OzMediaStream12&&this.$OzMediaStream12.setSourceBuffer(a),this.$OzMediaStream24.setSourceBufferState(a.getSourceBufferState()),this.$OzMediaStream32()}.bind(this)),this.$OzMediaStream17=d,this.$OzMediaStream8=e,this.$OzMediaStream4=f,this.$OzMediaStream10=i,this.$OzMediaStream10.registerMediaStream(this),this.$OzMediaStream23=j,this.$OzMediaStream24=k,this.$OzMediaStream25=l,this.$OzMediaStream12=m,this.$OzMediaStream14=p.cloneContext(),this.$OzMediaStream22=new(b("oz-player/shims/OzTaggedTimeRanges"))(function(a,b){return a.id===b.id}),this.$OzMediaStream13.addSubscriptions(this.$OzMediaStream4.addEventListener("seeking",function(){this.$OzMediaStream1.getBool("fix_seek_performance",!1)?this.$OzMediaStream33():((!this.$OzMediaStream1.getBool("keep_anchor_when_seeking_into_same_buffer",!1)||!this.$OzMediaStream34())&&(this.$OzMediaStream6=null),this.$OzMediaStream28=!1,this.$OzMediaStream21&&this.$OzMediaStream21.resolve())}.bind(this))),this.$OzMediaStream18=h(o.getMimeCodecs()),this.$OzMediaStream27=new(b("oz-player/networks/OzStreamingTaskStateManager"))(this.$OzMediaStream18,this.$OzMediaStream24,this.$OzMediaStream14,this.$OzMediaStream1),this.$OzMediaStream20=new(b("oz-player/streams/OzMediaStreamLoopDriver"))(this),n===o.getID()?this.$OzMediaStream5=o:this.$OzMediaStream35(o)}a.prototype.start=function(){this.$OzMediaStream20.start()};a.prototype.getCurrentRepresentation=function(){return this.$OzMediaStream5};a.prototype.switchRepresentation=function(a){this.$OzMediaStream35(a,"user")};a.prototype.onError=function(a){return this.$OzMediaStream30.onError(a)};a.prototype.updateRunTimeConfigs=function(a){a=a.videoStreamDataHandler;a!==void 0&&(this.$OzMediaStream31=a)};a.prototype.$OzMediaStream35=function(a,c){c===void 0&&(c="internal");this.$OzMediaStream1.getBool("clear_buffer_on_user_quality_upgrade",!1)&&(this.$OzMediaStream6=null);var d=this.$OzMediaStream14.cloneContext().setType(this.$OzMediaStream18+";init"),e=this.$OzMediaStream8.request([a.getInitSegment()],d),f=d.getOperationLogger("stream_switch").setPreviousRepresentationID(this.$OzMediaStream5?this.$OzMediaStream5.getID():null).setRepresentationID(a.getID()).setReason(this.$OzMediaStream12&&this.$OzMediaStream12.getLastEvaluationReason()).start();this.$OzMediaStream5=a;this.emit("switchRepresentation",c,a);this.$OzMediaStream36(e.getStream(),function(){f.log(),this.emit("initAppended"),this.$OzMediaStream10.notifyRepresentationSwitched(this)}.bind(this),function(a){f.setError(a).log(),this.$OzMediaStream1.getBool("fallback_on_append_error",!1)&&a instanceof b("oz-player/utils/OzError")&&a.getType()!=="OZ_NETWORK"&&this.$OzMediaStream30.emitError(a)}.bind(this),d.cloneContext(),0)};a.prototype.getLoopInterval=function(){return this.$OzMediaStream19};a.prototype.execute=function(){var a=this.$OzMediaStream37();if(a){var c=this.$OzMediaStream21=new(b("oz-player/shims/OzDeferred"))(b("oz-player/shims/OzMaybeNativePromise"));a.then(function(){return c.resolve()})["catch"](function(a){return c.reject(a)});return c.getPromise()}return null};a.prototype.$OzMediaStream38=function(a){a===void 0&&(a=null);if(this.$OzMediaStream12&&this.$OzMediaStream26&&(this.$OzMediaStream1.getBool("enable_abr_for_first_request",!1)||this.$OzMediaStream11||this.$OzMediaStream17>0)){a=this.$OzMediaStream12.getBestRepresentation(a);if(this.$OzMediaStream5!==a)return a}return null};a.prototype.$OzMediaStream39=function(a){var c=this.$OzMediaStream3?this.$OzMediaStream3.getSourceBufferState():null,d=this.$OzMediaStream17>0?this.$OzMediaStream5.getSegment(this.$OzMediaStream17-1):null,e=null;a&&(e=this.$OzMediaStream5.getCustomFieldFirstSegment());e||(e=b("oz-player/streams/OzSegmentLocator").getSegment(this.$OzMediaStream5,this.$OzMediaStream4,this.$OzMediaStream23.computeBufferTarget(),c,this.$OzMediaStream5,this.$OzMediaStream6||d,this.$OzMediaStream1,this.$OzMediaStream29));return e};a.prototype.$OzMediaStream40=function(){return!this.$OzMediaStream11&&this.$OzMediaStream17===0};a.prototype.$OzMediaStream41=function(a,c){__p&&__p();var d=[];if(c)d=[a];else{c=this.$OzMediaStream25.computeMin(this.$OzMediaStream4,a,this.$OzMediaStream5);if(this.$OzMediaStream1.getBool("switch_when_getting_segments",!1)){var e=this.$OzMediaStream38(c);if(e){this.$OzMediaStream35(e);e=this.$OzMediaStream39(!1);if(e)return this.$OzMediaStream41(e,!1)}}d=b("oz-player/strategies/OzStreamLengthStrategy").getStreamingSegments(this.$OzMediaStream1,c,this.$OzMediaStream5,this.$OzMediaStream4,a);d=b("oz-player/networks/OzNetworkManager").getStreamableSegmentsRange(d)}return d};a.prototype.$OzMediaStream42=function(){return new(b("oz-player/shims/OzMaybeNativePromise"))(function(a,b){var c=this.getCurrentRepresentation().addUpdateListener(function(){a(),this.$OzMediaStream16=null,c.remove()}.bind(this));this.$OzMediaStream16=c}.bind(this))};a.prototype.$OzMediaStream43=function(a,c){return new(b("oz-player/shims/OzMaybeNativePromise"))(function(b,c){c=this.$OzMediaStream39(a);c==null?b([]):b(this.$OzMediaStream41(c,a))}.bind(this))};a.prototype.$OzMediaStream37=function(){__p&&__p();var a=this.$OzMediaStream3?this.$OzMediaStream3.getSourceBufferState():null,c=this.$OzMediaStream40(),d=this.$OzMediaStream39(c),e=this.$OzMediaStream28&&this.$OzMediaStream1.getBool("block_stream_on_ongoing_stream",!1);if(this.$OzMediaStream28&&this.$OzMediaStream1.getBool("no_new_loop_body_promise_when_stream_ongoing",!1)){this.$OzMediaStream19=j;return null}if(!d||e){this.$OzMediaStream19=j;this.$OzMediaStream28||this.$OzMediaStream27.finishTaskIfNoOngoingStream();return this.$OzMediaStream42()}this.$OzMediaStream19=0;var f=this.$OzMediaStream41(d,c);if(!this.$OzMediaStream1.getBool("switch_when_getting_segments",!1)){e=this.$OzMediaStream38(f.length);if(e){this.$OzMediaStream35(e);return b("oz-player/shims/OzMaybeNativePromise").resolve()}}this.$OzMediaStream11=!0;var g=f[f.length-1]||null;this.$OzMediaStream1.getBool("updates_stream_anchor_when_promise_resolved",!1)||(this.$OzMediaStream6=g);g&&(this.$OzMediaStream17=0);var h=!1;g&&(h=this.$OzMediaStream5.isEndingSegment(g));b("oz-player/shims/ozvariant")(f.length!==0,"There must be one or more segment");d=f[0];e=d.getTimeRange().startTime;var i=g.getTimeRange().endTime,k=this.$OzMediaStream14.cloneContext();k.setRepresentationID(this.$OzMediaStream5.getID()).setSegmentStartTime(e).setSegmentEndTime(i);var l,m,n=null,o=this.$OzMediaStream1.getBool("scheduler_ignore_prefetch",!1)&&c,p=this.$OzMediaStream1.getBool("disable_audio_scheduler",!1)&&this.$OzMediaStream18.indexOf("audio")!==-1;if(this.$OzMediaStream1.getBool("use_scheduler",!1)&&!p&&!o)if(this.$OzMediaStream1.getBool("use_streaming_task_state_manager",!1))this.$OzMediaStream1.getBool("use_deferred_streaming_task",!1)?m=this.$OzMediaStream27.startStreamDeferred({segmentsPromise:this.$OzMediaStream43(c,f),networkManager:this.$OzMediaStream8,sourceBufferState:a,playbackState:this.$OzMediaStream4,segmentsLoggerProvider:k}):l=this.$OzMediaStream27.startStream({streamableSegments:f,networkManager:this.$OzMediaStream8,sourceBufferState:a,playbackState:this.$OzMediaStream4,segmentsLoggerProvider:k});else{p=b("oz-player/networks/OzStreamingTaskQueueProvider").getQueue(this.$OzMediaStream18);o=this.$OzMediaStream8.createPausableStream(f,this.$OzMediaStream14);c=o.pausableStream;a=o.loggingPayloads;n=new(b("oz-player/networks/OzStreamingTask"))(this.$OzMediaStream1,this.$OzMediaStream14);o=this.$OzMediaStream24.compute();l=n.addStream(c,k,a);p.enqueue(n,o)}else l=this.$OzMediaStream8.request(f,k);this.$OzMediaStream9=l;this.$OzMediaStream28=!0;var q=0,r=null;q=this.$OzMediaStream44(d,g,f.length);r={startTime:e,endTime:i,tag:{id:this.$OzMediaStream5.getID()}};var s=k.getOperationLogger("queued_append");s.start().setReason(this.$OzMediaStream12&&this.$OzMediaStream12.getLastEvaluationReason());var t=function(a){this.$OzMediaStream36(a,function(a){s.setAppendedBufferMs(Math.round(a*1e3)).log(),f.forEach(function(a){this.emit("SegmentAppended",this.$OzMediaStream45(a))}.bind(this)),h&&this.endStream()}.bind(this),function(a){s.setError(a).log(),this.$OzMediaStream1.getBool("fallback_on_append_error",!1)&&a instanceof b("oz-player/utils/OzError")&&a.getType()!=="OZ_NETWORK"&&this.$OzMediaStream30.emitError(a)}.bind(this),k,q,r)}.bind(this),u;b("oz-player/shims/ozvariant")(!!m||!!l,"request tracker must exist");m?(m.genStream().then(function(a){return t(a)})["catch"](function(a){return this.$OzMediaStream30.emitError(a)}.bind(this)),u=m.getStatusChangePromise()):l&&(t(l.getStream()),u=l.getStatusChangePromise());return u.then(function(a){this.$OzMediaStream46(a,g);return this.$OzMediaStream47(n)}.bind(this))["catch"](function(a){return this.$OzMediaStream48(a,n)}.bind(this))};a.prototype.handleError=function(a){return 0};a.prototype.$OzMediaStream46=function(a,b){this.$OzMediaStream1.getBool("updates_stream_anchor_when_promise_resolved",!1)&&a!=="cancelled"&&(this.$OzMediaStream6=b)};a.prototype.$OzMediaStream47=function(a){this.$OzMediaStream28=!1,a&&a.finish()};a.prototype.$OzMediaStream48=function(a,c){__p&&__p();this.$OzMediaStream28=!1;if(this.$OzMediaStream1.getBool("throw_network_error",!1)){var d,e;a instanceof b("oz-player/utils/OzError")?(d=a.getExtra().code||"",e=a):(d=a.status.toString(),e=new(b("oz-player/utils/OzError"))({type:"OZ_NETWORK",description:a.message,extra:{originalError:a,code:d,url:a.url}}));var f=JSON.parse(this.$OzMediaStream1.getString("network_retry_intervals_json","{}")),g=f[d];if(g){c&&c.finish();this.$OzMediaStream27.finishTaskIfNoOngoingStream();return this.$OzMediaStream1.getBool("retry_error_during_stream",!1)&&this.$OzMediaStream3?this.$OzMediaStream3.cancelOperationAndCleanQueue().then(function(){return new(b("oz-player/shims/OzMaybeNativePromise"))(function(a,b){setTimeout(a,g)})}):new(b("oz-player/shims/OzMaybeNativePromise"))(function(a,b){setTimeout(a,g)})}this.$OzMediaStream30.emitError(e)}return a instanceof b("oz-player/utils/OzError")&&a.getType()==="OZ_NETWORK"&&this.$OzMediaStream3?this.$OzMediaStream3.cancelOperationAndCleanQueue():b("oz-player/shims/OzMaybeNativePromise").resolve()};a.prototype.$OzMediaStream36=function(a,b,c,d,e,f){f===void 0&&(f=null),this.$OzMediaStream15.push({stream:a,dataAppendedCallback:b,dataAppendedErrorCallback:c,loggerProvider:d,appendTarget:e,timeRange:f}),this.$OzMediaStream3&&this.$OzMediaStream32()};a.prototype.$OzMediaStream32=function(){this.$OzMediaStream15.forEach(function(a){var c=a.stream,d=a.dataAppendedCallback,e=a.dataAppendedErrorCallback,f=a.loggerProvider,g=a.appendTarget,h=a.timeRange;a=this.$OzMediaStream31==null?c:c.pipeThrough(new(b("oz-player/networks/OzReadableStreamDataReader"))(this.$OzMediaStream31.bind(this,this.$OzMediaStream5)));this.$OzMediaStream3&&this.$OzMediaStream3.queueData(a,f,g).then(function(a){d(a),h&&this.$OzMediaStream22.add(h.startTime,h.endTime,h.tag)}.bind(this))["catch"](function(a){e(a)})}.bind(this)),this.$OzMediaStream15=[]};a.prototype.$OzMediaStream44=function(a,b,c){var d=0,e=this.$OzMediaStream1.getNumber("appends_per_segment",0);if(e>0){a=a.getByteRange();b=b.getByteRange();a&&b&&b.endByte!=null&&(d=Math.ceil((b.endByte-a.startByte+1)/(c*e)))}d===0&&(d=this.$OzMediaStream1.getNumber("append_byte_target_without_range",0));return d};a.prototype.enableAdaptation=function(){this.$OzMediaStream26=!0};a.prototype.disableAdaptation=function(){this.$OzMediaStream26=!1};a.prototype.cleanup=function(){this.$OzMediaStream2.then(function(a){a.destroy()}),this.$OzMediaStream27.destroy(),this.$OzMediaStream13.release(),this.$OzMediaStream13.engage(),this.$OzMediaStream16&&this.$OzMediaStream16.remove(),this.$OzMediaStream20.stop()};a.prototype.getRepresentationIDAtTime=function(a){var b=this.$OzMediaStream22.get(a);if(!b&&this.$OzMediaStream1.getBool("fix_tagged_range_at_end_of_stream",!1)){var c=this.$OzMediaStream5.getTimeRanges();c=c[c.length-1];var d=.001;c&&a>=c.endTime&&a<=this.$OzMediaStream4.getDuration()+d&&(b=this.$OzMediaStream22.get(c.endTime-d))}return b?b.id:null};a.prototype.endStream=function(){this.$OzMediaStream10.notifyMediaStreamEnded(this),this.$OzMediaStream49()};a.prototype.endStreamIfBufferedToEndTime=function(){var a=this.$OzMediaStream5.getTimeRanges();if(a.length>0){a=a[a.length-1].endTime;if(this.$OzMediaStream3){var b=this.$OzMediaStream3.getSourceBufferState().getBufferedRanges();b.length>0&&(Math.abs(b[b.length-1].endTime-a)<k&&this.endStream())}}};a.prototype.$OzMediaStream45=function(a){return{type:this.$OzMediaStream18.charAt(0),segment:a,sourceBuffer:this.$OzMediaStream3?this.$OzMediaStream3.getDebug().SourceBuffer:null}};a.prototype.$OzMediaStream33=function(){(!this.$OzMediaStream1.getBool("keep_anchor_when_seeking_into_same_buffer",!1)||!this.$OzMediaStream34())&&(this.$OzMediaStream6=null),this.$OzMediaStream28=!1,this.$OzMediaStream9&&this.$OzMediaStream9.cancel(),this.$OzMediaStream19!==0&&this.$OzMediaStream21&&this.$OzMediaStream21.resolve()};a.prototype.$OzMediaStream34=function(){var a=this.$OzMediaStream3?this.$OzMediaStream3.getSourceBufferState():null;a=a?i(this.$OzMediaStream4.getCurrentTime(),a.getBufferedRanges()):null;return this.$OzMediaStream6&&a?a.endTime>this.$OzMediaStream6.getTimeRange().startTime:!1};a.prototype.$OzMediaStream49=function(){if(this.$OzMediaStream3){var a=this.$OzMediaStream3.getSourceBufferState().getBufferedRanges();a.length>0&&(this.$OzMediaStream29=a[a.length-1].endTime)}};a.prototype.getDebug=function(){return{SourceBufferManager:this.$OzMediaStream3,MediaStreamAbrManager:this.$OzMediaStream12}};e.exports=a}),null);
__d("oz-player/utils/getRepresentationInCache",["oz-player/mocks/MockRequestParamCreator"],(function(a,b,c,d,e,f){"use strict";var g=new(b("oz-player/mocks/MockRequestParamCreator"))();function a(a,b){b===void 0&&(b=null);return a.find(function(a){a=a.getInitSegment();var c=a&&a.getByteRange();return a&&c&&b?b.hasCacheValue(g.createRequestParam(a.getURI(),c).uri.toString()):!1})||null}e.exports=a}),null);
__d("oz-player/Player",["Promise","oz-player/loggings/OzDevConsolePerfLogger","oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/loggings/OzOperationLoggerObserver","oz-player/manifests/OzVideoRepresentation","oz-player/media_source/MediaSourceManager","oz-player/media_source/OzMediaSeekableRangeManager","oz-player/networks/OzNetworkManager","oz-player/parsers/OzMpdParser","oz-player/parsers/OzMpdUpdater","oz-player/playback_controls/OzPlaybackTimeRangeManager","oz-player/playback_controls/OzPlayheadManager","oz-player/playback_controls/OzPlayheadNudger","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzObservedPlaybackState","oz-player/states/OzPlayerDimensions","oz-player/strategies/OzAbrManager","oz-player/strategies/OzBufferAheadPriorityStrategy","oz-player/strategies/OzBufferAheadTargetStrategy","oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy","oz-player/strategies/OzBufferTargetCalculator","oz-player/strategies/OzLiveheadDeltaCatchupStrategy","oz-player/strategies/OzPausedStreamSegmentsCountStrategy","oz-player/strategies/OzPlayheadAtInterruptionDetector","oz-player/strategies/OzPlayingStatePriorityStrategy","oz-player/strategies/OzPriorityCalculator","oz-player/strategies/OzStartupBufferTargetStrategy","oz-player/strategies/OzStaticStreamSegmentsStrategy","oz-player/strategies/OzStreamSegmentsCountCalculator","oz-player/streams/OzEndOfStreamWatcher","oz-player/streams/OzHandleUserRepresentationSwitch","oz-player/streams/OzMediaStream","oz-player/utils/getRepresentationInCache","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/utils/OzPlaybackRestrictionsUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("oz-player/loggings/OzDevConsolePerfLogger").OzDevConsolePerfLoggerProvider,i=b("oz-player/loggings/OzLoggingUtils").executeOperationAndLog,j=b("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation,k=b("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider,l=b("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions;c=babelHelpers.inherits(a,b("oz-player/shims/OzEventEmitter"));g=c&&c.prototype;function a(a,c,d,e,f,h,i,j,l,m,n,o,p,q,r,s,t){__p&&__p();f===void 0&&(f=null);h===void 0&&(h={perfLoggerProviders:[],observedOperationLoggers:[],isOzDevConsoleEnabled:!1});i===void 0&&(i=null);l===void 0&&(l=[]);m===void 0&&(m=new Map());n===void 0&&(n="");o===void 0&&(o=[]);p===void 0&&(p={});q===void 0&&(q=null);r===void 0&&(r=null);s===void 0&&(s=null);t===void 0&&(t=0);g.constructor.call(this);this.$Player3=new Map();this.$Player4=new Map();this.$Player9=new(b("oz-player/shims/OzSubscriptionsHandler"))();this.$Player10=new(b("oz-player/utils/OzErrorEmitter"))();this.$Player24=[];this.$Player30=null;this.$Player31=null;this.$Player35=function(a){};this.$Player39=!0;var u=h,v=u.perfLoggerProviders;u=u.observedOperationLoggers;h=h;h=h.isOzDevConsoleEnabled;this.$Player15=h||!1;this.$Player14=new k(this.$Player41().concat(v));this.$Player2=c;this.$Player42();this.$Player21=new(b("oz-player/loggings/OzOperationLoggerObserver"))();this.$Player21.observe(u,this.$Player14);this.$Player23=i;h=i&&i.getCachedRepresentations(n);this.$Player24=h||l;this.$Player26=m;this.$Player29=o;this.$Player27=p;this.$Player33=q;this.$Player34=r;s&&(this.$Player35=s);this.$Player37=0;this.$Player38=t;a instanceof HTMLVideoElement?(this.$Player1=a,this.$Player5=new(b("oz-player/media_source/MediaSourceManager"))(this.$Player1,this.$Player2,this.$Player14)):(this.$Player1=a.getVideoNode(),this.$Player5=a.getMediaSourceManager(),this.$Player6=a);this.$Player40=j;this.$Player11=new(b("oz-player/networks/OzNetworkManager"))(this.$Player2,this.$Player23,this.$Player40);this.$Player16=f;this.$Player7=d;this.$Player12=new(b("oz-player/states/OzObservedPlaybackState"))(this.$Player1,this.$Player14);this.$Player28=new(b("oz-player/states/OzPlayerDimensions"))(e);this.$Player13=new(b("oz-player/streams/OzEndOfStreamWatcher"))(this.$Player5,this.$Player2);this.$Player9.addSubscriptions(this.$Player13.addListener("streamEnd",this.emit.bind(this,"streamEnd")));this.$Player22=new(b("oz-player/media_source/OzMediaSeekableRangeManager"))(this.$Player5,this.$Player2);this.$Player25=this.$Player43()}a.prototype.setupPlayer=function(){__p&&__p();this.$Player2.getBool("listen_for_quick_starter_errors",!1)&&this.$Player6&&this.$Player9.addSubscriptions(this.$Player6.onError(this.$Player10.emitError));try{this.$Player8=i(this.$Player14,"parse_manifest",this.$Player44.bind(this,this.$Player7));if(this.$Player16!==null&&this.$Player16!==void 0){var a=new(b("oz-player/parsers/OzMpdUpdater"))(this.$Player2,this.$Player8,this.$Player11,this.$Player12,this.$Player14);this.$Player45(a);this.$Player9.addSubscriptions(a.onError(this.$Player10.emitError),a.addListener("streamGone",this.$Player46.bind(this)),a.addListener("streamTransitionToStatic",this.$Player47.bind(this)));a.setupUpdateLoop();this.$Player20=a}this.$Player37=this.$Player8.isStaticMpd()?this.$Player37:this.$Player38;this.$Player17=new(b("oz-player/playback_controls/OzPlayheadManager"))({video:this.$Player1,mpd:this.$Player8,playheadCatchup:this.$Player32,playbackState:this.$Player12,config:this.$Player2,perfLoggerProvider:this.$Player14,seekHandler:this.$Player34,initialPlaybackPosition:this.$Player37});this.$Player18=new(b("oz-player/playback_controls/OzPlayheadNudger"))(this.$Player2,this.$Player1);this.$Player19=new(b("oz-player/playback_controls/OzPlaybackTimeRangeManager"))(this.$Player2,this.$Player1,this.$Player8);this.setupStreamsAndFireDebugEvent()}catch(a){if(a instanceof b("oz-player/utils/OzError"))this.$Player10.emitError(a);else throw a}};a.prototype.updatePlayerRunTimeConfig=function(a){a=a.videoStreamDataHandler;if(a!==void 0){var b=this.$Player3.get("video");b&&b.updateRunTimeConfigs({videoStreamDataHandler:a})}};a.prototype.$Player48=function(a,b){var c=a.getMimeCodecs(),d,e=0,f=null,g=this.$Player6;g&&(d=g.getSourceBufferManagerPromise(c),e=g.getPrependedSegmentsCount(c),this.$Player2.getBool("fix_quick_starter_overhead",!1)&&(f=g.getRepresentationId(c)));d||(d=this.$Player5.createSourceBufferManager(c,this.$Player2.getBool("set_source_buffer_append_window_end",!1)));this.$Player49(d,b,f,a,e);return j(d,this.$Player14,"source_attach",function(a){a.setType(b)}).then(function(a){return this.$Player17.observeSourceBufferState(a.getSourceBufferState(),b)}.bind(this))};a.prototype.$Player50=function(a){a=[this.$Player2,a,this.$Player8.getVideoRepresentations(),this.$Player29,this.$Player12,this.$Player28,window.devicePixelRatio||1];return this.$Player33?this.$Player33.apply(this,a):new(Function.prototype.bind.apply(b("oz-player/strategies/OzAbrManager"),[null].concat(a)))()};a.prototype.$Player49=function(a,c,d,e,f){var g=this.$Player4.get(c),h=new(b("oz-player/streams/OzMediaStream"))(this.$Player2,a,f,this.$Player11,this.$Player12,this.$Player13,this.$Player25,this.$Player51(),this.$Player52(g),g,d,e,this.$Player14.cloneContext().setType(c));this.$Player37===0?h.start():this.$Player9.addSubscriptions(this.$Player17.addListener("initialPlaybackPositionSet",function(){this.$Player12.forceUpdateCurrentTime(),h.start()}.bind(this)));this.$Player9.addSubscriptions(h.onError(this.$Player10.emitError),this.$Player22.listenToMediaStreamInitAppended(h));c==="video"&&(this.$Player31=new(b("oz-player/streams/OzHandleUserRepresentationSwitch"))(this.$Player2,this.$Player12,l(this.$Player29,this.$Player28.getDimensions(),this.$Player8.getVideoRepresentations()),h,a));this.$Player3.set(c,h);this.$Player9.addSubscriptions(h.addListener("switchRepresentation",function(){c==="video"&&this.emit("switchVideoRepresentation")}.bind(this)),h.addListener("SegmentAppended",function(a){this.$Player53("SegmentAppended",a)}.bind(this)))};a.prototype.$Player43=function(){return new(b("oz-player/strategies/OzBufferTargetCalculator"))([new(b("oz-player/strategies/OzStartupBufferTargetStrategy"))(this.$Player12,this.$Player2),new(b("oz-player/strategies/OzBufferAheadTargetStrategy"))(this.$Player2)])};a.prototype.$Player45=function(a){if(this.$Player2.getNumber("stream_interrupt_check_mpd_stale_count_threshold",0)>0){var c=new(b("oz-player/strategies/OzPlayheadAtInterruptionDetector"))(this.$Player1);this.$Player9.addSubscriptions(c.addListener("playheadAtInterruption",function(a){return this.emit("streamInterruptAt",a)}.bind(this)),a.addListener("streamInterruptAt",function(a){return c.notifyStreamInterrupted(a)}),a.addListener("streamResumedAt",function(a){c.notifyStreamResumed(),this.emit("streamResumedAt",a)}.bind(this)));this.$Player30=c}};a.prototype.$Player51=function(){var a=[];this.$Player2.getBool("scheduler_with_priority_update",!1)&&(a=[new(b("oz-player/strategies/OzPlayingStatePriorityStrategy"))(this.$Player12),new(b("oz-player/strategies/OzBufferAheadPriorityStrategy"))(this.$Player12)]);return new(b("oz-player/strategies/OzPriorityCalculator"))(a)};a.prototype.$Player52=function(a){var c=[new(b("oz-player/strategies/OzStaticStreamSegmentsStrategy"))(this.$Player2)];this.$Player2.getBool("buffer_target_bounded_stream_count",!1)&&c.push(new(b("oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy"))(this.$Player25,this.$Player2));this.$Player2.getNumber("paused_stream_segments_count",0)!==0&&c.push(new(b("oz-player/strategies/OzPausedStreamSegmentsCountStrategy"))(this.$Player12,this.$Player2));if(a){a=a.getStreamSegmentsCountStrategy();a&&c.push(a)}return new(b("oz-player/strategies/OzStreamSegmentsCountCalculator"))(c)};a.prototype.onError=function(a){return this.$Player10.onError(a)};a.prototype.getCurrentQuality=function(){var a=this.$Player3.get("video");a=a&&a.getCurrentRepresentation();return a instanceof b("oz-player/manifests/OzVideoRepresentation")?a.getQualityLabel():this.$Player8.getVideoRepresentations()[0].getQualityLabel()};a.prototype.switchToVideoQuality=function(a){var b=this.$Player8.getVideoRepresentations().find(function(b){return b.getQualityLabel()===a});if(b){var c=this.$Player3.get("video");c&&(c.switchRepresentation(b),c.disableAdaptation())}};a.prototype.enableVideoQualityAdaptation=function(){var a=this.$Player3.get("video");a&&a.enableAdaptation()};a.prototype.getVideoQualities=function(){return this.$Player8.getVideoRepresentations().map(function(a){return a.getQualityLabel()})};a.prototype.setEnableLiveheadCatchup=function(a){this.$Player19&&(a?this.$Player14.getOperationLogger("live_catchup_enabled").log():this.$Player14.getOperationLogger("live_catchup_disabled").log(),this.$Player19.setTimelineBlockingEnabled(a))};a.prototype.setupStreamsAndFireDebugEvent=function(){var a=[this.setupVideoStream(),this.setupAudioStreamIfExist()],c=[];return b("Promise").all(a).then(function(){var a=this.$Player3.get("video"),b=this.$Player3.get("audio");a&&c.push(a.getCurrentRepresentation());b&&c.push(b.getCurrentRepresentation());c.forEach(function(a){this.$Player9.addSubscriptions(a.addUpdateListener(function(){this.$Player53("SegmentIndexesUpdated",c)}.bind(this)))}.bind(this));this.$Player53("InitialSegmentIndexes",c)}.bind(this))};a.prototype.setupVideoStream=function(){__p&&__p();var a=l(this.$Player29,this.$Player28.getDimensions(),this.$Player8.getVideoRepresentations());if(!a.length)return b("oz-player/shims/OzMaybeNativePromise").reject(new Error("no representation available."));this.$Player22.setTimeRangeProvider(a[0]);this.$Player17.setTimeRangeProvider(a[0]);this.$Player19!=null&&this.$Player19.setTimeRangeProvider(a[0]);var c=this.$Player54("video",a);if(this.$Player2.getBool("enable_adaptation",!1)){var d=this.$Player50(c||a[0]);this.$Player4.set("video",d);this.$Player2.getBool("use_abr_for_missing_default_representation",!1)&&!c&&(c=d.getBestRepresentation())}return this.$Player48(c||a[0],"video")};a.prototype.setupAudioStreamIfExist=function(){var a=this.$Player8.getAudioRepresentations();return a.length?this.$Player48(this.$Player54("audio",a)||a[0],"audio"):b("oz-player/shims/OzMaybeNativePromise").resolve()};a.prototype.getMpd=function(){return this.$Player8};a.prototype.destroy=function(){__p&&__p();var a=this.$Player14.getOperationLogger("unload").start();this.$Player3.forEach(function(a){a.cleanup()});this.$Player31&&this.$Player31.cleanup();this.$Player3=new Map();this.$Player9.release();this.$Player9.engage();this.$Player12.destroy();this.$Player17.destroy();this.$Player18&&(this.$Player18.destroy(),this.$Player18=null);this.$Player19&&(this.$Player19.destroy(),this.$Player19=null);var c=b("Promise").resolve();this.$Player2.getBool("cleanup_video_node_on_destroy",!1)&&(this.$Player1.pause(),this.$Player1.src="",this.$Player1.setMediaKeys&&"function"===typeof this.$Player1.setMediaKeys&&(c=this.$Player1.setMediaKeys(null)));this.$Player20&&this.$Player20.destroy();this.$Player30&&this.$Player30.destroy();this.$Player21.destroy();this.$Player22.destroy();a.log();this.emit("destroyed");a=[c];return b("Promise").all(a)};a.prototype.$Player54=function(a,c){__p&&__p();var d;d=c.find(function(a){return this.$Player24.indexOf(a.getID())!==-1}.bind(this));if(!d&&this.$Player6&&this.$Player2.getBool("fix_quick_starter_overhead",!1)){var e=this.$Player6.getRepresentationId(a);e!==null&&e!==void 0&&(d=c.find(function(a){return a.getID()===e}))}d||(d=b("oz-player/utils/getRepresentationInCache")(c,this.$Player23));return d||null};a.prototype.$Player44=function(a){var c=new(b("oz-player/parsers/OzMpdParser"))(this.$Player2,{mpdUrl:this.$Player16,customParsers:this.$Player26,customRepresentationParsers:this.$Player27},this.$Player11,this.$Player14);this.$Player9.addSubscriptions(c.onError(this.$Player10.emitError));return c.parse(a)};a.prototype.$Player41=function(){var a=[];this.$Player15&&a.push(new h());return a};a.prototype.setDimensions=function(a){this.$Player28.setDimensions(a)};a.prototype.$Player55=function(a,b){b=this.$Player3.get(b);return b?b.getRepresentationIDAtTime(a):null};a.prototype.getAudioRepresentationIDAtTime=function(a){return this.$Player55(a,"audio")};a.prototype.getVideoRepresentationIDAtTime=function(a){return this.$Player55(a,"video")};a.prototype.$Player46=function(){this.$Player35!=null&&this.$Player35(Array.from(this.$Player3.values()))};a.prototype.$Player47=function(){this.$Player2.getBool("end_buffered_streams_on_transition_to_static",!1)&&this.$Player3.forEach(function(a){return a.endStreamIfBufferedToEndTime()})};a.prototype.getDebug=function(){var a=this.$Player3.get("video"),b=this.$Player3.get("audio"),c,d,e,f,g;a&&(c=a.getDebug().MediaStreamAbrManager,d=a.getDebug().SourceBufferManager,d&&(e=d.getDebug().SourceBuffer));b&&(f=b.getDebug().SourceBufferManager,f&&(g=f.getDebug().SourceBuffer));return{getManifest:function(){return this.$Player8}.bind(this),indentifiersIntact:!0,VideoSourceStream:a,VideoAbrManager:c,VideoBufferManager:d,VideoSourceBuffer:e,AudioSourceStream:b,AudioBufferManager:f,AudioSourceBuffer:g}};a.prototype.$Player53=function(a,b){this.emit("debug/dashPlayerEvent",{detail:{type:a,event:b}})};a.prototype.$Player42=function(){this.$Player2.getBool("live_playhead_catch_up",!1)&&(this.$Player32=new(b("oz-player/strategies/OzLiveheadDeltaCatchupStrategy"))(this.$Player2))};e.exports=a}),null);
__d("oz-player",["oz-player/Player"],(function(a,b,c,d,e,f){"use strict";e.exports=b("oz-player/Player")}),null);
__d("oz-player/strategies/OzBufferingDetectorStates",["oz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/utils/OzBufferingUtils").BUFFER_OVERFLOW_THRESHOLD,h=b("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD,i=b("oz-player/utils/OzBufferingUtils").hasEnoughBuffer;function j(a,b){this.$1=a,this.$2=b}j.prototype.handleEvent=function(a,b,c){if(a.type==="pause"||b.paused)return new k(this.$1);a=this.$2 instanceof l?this.$1.getNumber("in_play_buffer_overflow_target",g):this.$1.getNumber("start_buffer_underflow_target",g);return i(b,a,c,this.$1)?new l(this.$1):this};function k(a){this.$1=a}k.prototype.handleEvent=function(a,b,c){if(a.type==="play"||a.type==="playing"||!b.paused){a=this.$1.getNumber("start_buffer_underflow_target",h);return i(b,a,c,this.$1)?new l(this.$1):new j(this.$1,this)}return this};function l(a){this.$1=a}l.prototype.handleEvent=function(a,b,c){if(a.type==="pause"||b.paused)return new k(this.$1);a=this.$1.getNumber("in_play_buffer_underflow_target",h);return!i(b,a,c,this.$1)?new j(this.$1,this):this};e.exports={OzVideoBufferingState:j,OzVideoPausedState:k,OzVideoPlayingState:l}}),null);
__d("oz-player/shims/OzEvent",["Event"],(function(a,b,c,d,e,f){"use strict";e.exports=b("Event")}),null);
__d("oz-player/utils/OzDomEventCapturer",["oz-player/shims/OzEvent","oz-player/shims/OzEventListener"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$2=new Map(),this.$1=a}a.prototype.capture=function(a,c){var d=this.$1.parentNode;return!d?{remove:function(){}}:b("oz-player/shims/OzEventListener").capture(d,a,function(a){if(a.target!==this.$1)return;var b=c(a);b&&this.$3(a)}.bind(this))};a.prototype.dispatchIfSuppressed=function(a){var b=this.$2.get(a);b&&this.$1.dispatchEvent(b);this.$2["delete"](a)};a.prototype.$3=function(a){b("oz-player/shims/OzEvent").kill(a),this.$2.set(a.type,a)};e.exports=a}),null);
__d("oz-player/strategies/OzBufferingDetector",["oz-player/shims/OzEventEmitter","oz-player/shims/OzEventListener","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/OzBufferingUtils","oz-player/utils/OzDomEventCapturer","oz-player/strategies/OzBufferingDetectorStates"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("oz-player/utils/OzBufferingUtils").BUFFER_OVERFLOW_THRESHOLD;var h=b("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD,i=b("oz-player/utils/OzBufferingUtils").hasEnoughBuffer,j=b("oz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState,k=b("oz-player/strategies/OzBufferingDetectorStates").OzVideoPausedState,l=b("oz-player/strategies/OzBufferingDetectorStates").OzVideoPlayingState,m=150;c=babelHelpers.inherits(a,b("oz-player/shims/OzEventEmitter"));g=c&&c.prototype;function a(a,c,d){__p&&__p();g.constructor.call(this),this.$OzBufferingDetector3=new(b("oz-player/shims/OzSubscriptionsHandler"))(),this.$OzBufferingDetector7=function(a){__p&&__p();a=this.$OzBufferingDetector1.handleEvent(a,this.$OzBufferingDetector2,this.$OzBufferingDetector6());var b=this.$OzBufferingDetector1;this.$OzBufferingDetector1=a;var c=a instanceof j,d=b instanceof j;if(a===b)return a;if(c){c=b instanceof l?"in_play":"start/unpause";this.emit("enter_buffering",c)}else d&&this.emit("leave_buffering");a instanceof l&&this.$OzBufferingDetector4.dispatchIfSuppressed("playing");return a}.bind(this),this.$OzBufferingDetector8=function(a){a=this.$OzBufferingDetector7(a)instanceof j;return this.$OzBufferingDetector5.getBool("suppress_playing_event_while_buffering",!1)?a:!1}.bind(this),this.$OzBufferingDetector2=a,this.$OzBufferingDetector5=c,this.$OzBufferingDetector6=d,this.$OzBufferingDetector2.paused?this.$OzBufferingDetector1=new k(this.$OzBufferingDetector5):this.$OzBufferingDetector1=i(this.$OzBufferingDetector2,this.$OzBufferingDetector5.getNumber("in_play_buffer_underflow_target",h),this.$OzBufferingDetector6(),this.$OzBufferingDetector5)?new l(this.$OzBufferingDetector5):new j(this.$OzBufferingDetector5,null),this.$OzBufferingDetector4=new(b("oz-player/utils/OzDomEventCapturer"))(this.$OzBufferingDetector2),this.$OzBufferingDetector3.addSubscriptions(b("oz-player/shims/OzEventListener").listen(this.$OzBufferingDetector2,"pause",this.$OzBufferingDetector7),b("oz-player/shims/OzEventListener").listen(this.$OzBufferingDetector2,"play",this.$OzBufferingDetector7),this.$OzBufferingDetector4.capture("playing",this.$OzBufferingDetector8),b("oz-player/shims/OzEventListener").listen(this.$OzBufferingDetector2,"progress",b("oz-player/shims/ozThrottle")(this.$OzBufferingDetector7,m)),b("oz-player/shims/OzEventListener").listen(this.$OzBufferingDetector2,"timeupdate",b("oz-player/shims/ozThrottle")(this.$OzBufferingDetector7,m)),b("oz-player/shims/OzEventListener").listen(this.$OzBufferingDetector2,"seeked",this.$OzBufferingDetector7),b("oz-player/shims/OzEventListener").listen(this.$OzBufferingDetector2,"seeking",this.$OzBufferingDetector7),b("oz-player/shims/OzEventListener").listen(this.$OzBufferingDetector2,"waiting",this.$OzBufferingDetector7))}a.prototype.destroy=function(){this.$OzBufferingDetector3.release()};e.exports=a}),null);
__d("VideoPlayerHTML5Oz",["invariant","Promise","BanzaiODS","Deferred","EventEmitter","EventListener","FBLogger","MaybeNativePromise","OzDashPrefetchCache","OzMinimumSmallestDimensionRestriction","OzMosThresholdRestriction","OzNetworkRequestStreamHandler","RepomenAbrManager","SubscriptionsHandler","TimeRanges","URI","VideoPlayerConnectionQuality","VideoPlayerOzWWWConfig","VideoPlayerOzWWWGlobalConfig","VideoPlayerPlayLogger","VideoPlayerShakaPerformanceLogger","VideoPlayerVersions","VideoQualityClass","XHRRequest","extractCEA608","getCrossOriginTransport","gkx","oz-player","oz-player/configs/OzGlobalConfig","oz-player/loggings/OzLoggingUtils","oz-player/networks/OzBandwidthEstimator","oz-player/shims/OzURI","oz-player/strategies/OzBufferingDetector","oz-player/utils/OzError","oz-player/utils/OzNetworkRequestLoggingUtils","parseHeaders","setTimeout","throttle"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation,j=b("oz-player/utils/OzNetworkRequestLoggingUtils").setPerformanceLoggingAttributes;b("oz-player/configs/OzGlobalConfig").setGlobalConfig(b("VideoPlayerOzWWWGlobalConfig"));var k=720;a=babelHelpers.inherits(l,b("EventEmitter"));h=a&&a.prototype;l.isSupported=function(a){__p&&__p();var c,d=function(a){__p&&__p();if(!a||typeof a!=="string")return!1;var c=/mimeType=\"([^\"]*)\"\s*codecs=\"([^\"]*)\"/g,d;while(d=c.exec(a)){d=d[1]+'; codecs="'+d[2]+'"';if(!window.MediaSource.isTypeSupported(d)){b("FBLogger")("www_video_oz").warn("Unsupported DASH type: %s",d);return!0}}return!1};!a.hasDashManifest()&&!a.getLiveManifestUrl()?c="noDashManifest":!window.MediaSource?c="noMediaSourceSupport":!window.fetch?c="noFetch":!window.ReadableStream?c="noReadableStream":!window.WritableStream?c="noWritableStream":a.getDashManifest()&&d(a.getDashManifest())&&(c="codecNotSupported");if(c){b("BanzaiODS").bumpEntityKey("VideoPlayerHtml5Oz","fallback."+c);return!1}return!0};l.getEstimatedBandwidth=function(){return b("oz-player/networks/OzBandwidthEstimator").getBandwidth(b("VideoPlayerOzWWWGlobalConfig"))};function l(a,c,d){__p&&__p();var e=d.config,f=d.manifest,g=d.manifestUrl,i=d.videoID,j=d.isLive,k=d.isServableViaFbms,l=d.accessToken,m=d.playerOrigin,n=d.playerSuborigin,o=d.playerInstanceKey,p=d.prefetchCache,q=d.width,r=d.height,s=d.minPlayQuality,t=d.startTimestamp,u=d.seekHandler;d=d.videoLiveTrace;h.constructor.call(this);this.$VideoPlayerHTML5Oz5=1;this.$VideoPlayerHTML5Oz6=!1;this.$VideoPlayerHTML5Oz8=null;this.$VideoPlayerHTML5Oz22=!1;this.$VideoPlayerHTML5Oz23=!1;this.$VideoPlayerHTML5Oz24=null;this.$VideoPlayerHTML5Oz25=null;this.$VideoPlayerHTML5Oz26=0;this.$VideoPlayerHTML5Oz27=null;this.$VideoPlayerHTML5Oz28=!1;this.$VideoPlayerHTML5Oz31=!0;this.$VideoPlayerHTML5Oz32=!1;this.$VideoPlayerHTML5Oz1=a;this.$VideoPlayerHTML5Oz2=f;this.$VideoPlayerHTML5Oz3=new(b("VideoPlayerOzWWWConfig"))(e);this.$VideoPlayerHTML5Oz16=c;this.$VideoPlayerHTML5Oz14=g;this.$VideoPlayerHTML5Oz15=p;this.$VideoPlayerHTML5Oz17=i;this.$VideoPlayerHTML5Oz18=q;this.$VideoPlayerHTML5Oz19=r;this.$VideoPlayerHTML5Oz20=t;this.$VideoPlayerHTML5Oz29=u;this.$VideoPlayerHTML5Oz30=d;this.$VideoPlayerHTML5Oz9=b("VideoPlayerShakaPerformanceLogger").shouldInitialize()?new(b("VideoPlayerShakaPerformanceLogger"))({videoID:i,video:a,representationId:null,isLive:j,isServableViaFbms:k,accessToken:l,playerOrigin:m,playerSuborigin:n,playerVersion:this.getPlayerVersion(),uniqueID:o,getBandwidthEstimate:function(a){return b("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(this.$VideoPlayerHTML5Oz3)}.bind(this)}):null;this.$VideoPlayerHTML5Oz9&&(this.$VideoPlayerHTML5Oz21=new(b("VideoPlayerPlayLogger"))(this.$VideoPlayerHTML5Oz1,this.$VideoPlayerHTML5Oz9));this.$VideoPlayerHTML5Oz13=s;(!this.$VideoPlayerHTML5Oz15||typeof this.$VideoPlayerHTML5Oz15.getCachedRepresentations!=="function")&&(this.$VideoPlayerHTML5Oz15=null);!this.$VideoPlayerHTML5Oz15&&this.$VideoPlayerHTML5Oz3.getBool("use_prefetch_cache",!1)&&(this.$VideoPlayerHTML5Oz15=new(b("OzDashPrefetchCache"))());this.$VideoPlayerHTML5Oz33()}l.prototype.$VideoPlayerHTML5Oz33=function(){this.$VideoPlayerHTML5Oz12=new(b("SubscriptionsHandler"))();this.$VideoPlayerHTML5Oz34();var a=this.$VideoPlayerHTML5Oz3.getBool("fix_live_video_duration_buffering",!1);this.$VideoPlayerHTML5Oz7=new(b("oz-player/strategies/OzBufferingDetector"))(this.$VideoPlayerHTML5Oz1,this.$VideoPlayerHTML5Oz3,function(){return!a||this.$VideoPlayerHTML5Oz28?this.$VideoPlayerHTML5Oz1.duration:Infinity}.bind(this));this.$VideoPlayerHTML5Oz3.getBool("cleanup_buffering_detector_on_unload",!1)||(this.$VideoPlayerHTML5Oz7.addListener("enter_buffering",this.$VideoPlayerHTML5Oz35.bind(this)),this.$VideoPlayerHTML5Oz7.addListener("leave_buffering",this.$VideoPlayerHTML5Oz36.bind(this)));this.$VideoPlayerHTML5Oz12.addSubscriptions(b("EventListener").listen(this.$VideoPlayerHTML5Oz1,"timeupdate",function(a){this.$VideoPlayerHTML5Oz37(a.target.currentTime)}.bind(this)));this.$VideoPlayerHTML5Oz3.getBool("cleanup_buffering_detector_on_unload",!1)&&this.$VideoPlayerHTML5Oz12.addSubscriptions(this.$VideoPlayerHTML5Oz7.addListener("enter_buffering",this.$VideoPlayerHTML5Oz35.bind(this)),this.$VideoPlayerHTML5Oz7.addListener("leave_buffering",this.$VideoPlayerHTML5Oz36.bind(this)))};l.prototype.setup=function(){var a=[];this.$VideoPlayerHTML5Oz9&&a.push(this.$VideoPlayerHTML5Oz9);var b=[];this.$VideoPlayerHTML5Oz3.getBool("force_initial_representation",!1)&&(b=this.$VideoPlayerHTML5Oz16);this.$VideoPlayerHTML5Oz2?this.$VideoPlayerHTML5Oz38({manifest:this.$VideoPlayerHTML5Oz2,manifestUrl:this.$VideoPlayerHTML5Oz14,loggerProviders:a,prefetchCache:this.$VideoPlayerHTML5Oz15,initialRepresentations:b,videoID:this.$VideoPlayerHTML5Oz17,width:this.$VideoPlayerHTML5Oz18,height:this.$VideoPlayerHTML5Oz19}):(!this.$VideoPlayerHTML5Oz14&&g(0,1106),this.$VideoPlayerHTML5Oz39(this.$VideoPlayerHTML5Oz14,a,b))};l.prototype.$VideoPlayerHTML5Oz39=function(a,c,d){this.$VideoPlayerHTML5Oz40(a).then(function(b){this.$VideoPlayerHTML5Oz38({manifest:b,manifestUrl:a,loggerProviders:c,prefetchCache:this.$VideoPlayerHTML5Oz15,initialRepresentations:d,videoID:this.$VideoPlayerHTML5Oz17,width:this.$VideoPlayerHTML5Oz18,height:this.$VideoPlayerHTML5Oz19})}.bind(this))["catch"](function(e){if(e instanceof b("oz-player/utils/OzError")&&this.$VideoPlayerHTML5Oz26<this.$VideoPlayerHTML5Oz3.getNumber("initial_manifest_request_retry_count",0)){var f=JSON.parse(this.$VideoPlayerHTML5Oz3.getString("network_retry_intervals_json","{}"));f=f[e.getExtra().code];typeof f==="number"&&f>0?(this.$VideoPlayerHTML5Oz26++,b("setTimeout")(function(){this.$VideoPlayerHTML5Oz39(a,c,d)}.bind(this),f)):this.$VideoPlayerHTML5Oz41(e)}else this.$VideoPlayerHTML5Oz41(e)}.bind(this))};l.prototype.$VideoPlayerHTML5Oz40=function(a){__p&&__p();var c=new(b("Deferred"))();this.$VideoPlayerHTML5Oz9&&(this.$VideoPlayerHTML5Oz27=this.$VideoPlayerHTML5Oz9.getOperationLogger("request").setType("manifest").setResource(a).start());new(b("XHRRequest"))(new(b("URI"))(a)).setMethod("GET").setResponseType("text").setTransportBuilder(b("getCrossOriginTransport")).setErrorHandler(function(d){__p&&__p();if(this.$VideoPlayerHTML5Oz3.getBool("enable_double_ingest",!1)&&d&&d.errorRawResponseHeaders){var e=b("parseHeaders")(d.errorRawResponseHeaders);e=e["x-fb-video-replica"];if(e!=null){this.emit("replicaSwitch",{replica:parseInt(e,10),url:a,status:d.rawTransportStatus,timestamp:new Date().valueOf()});return}}c.reject(d?new(b("oz-player/utils/OzError"))({type:d.errorCode,description:d.errorMsg,extra:{code:d.errorRawTransportStatus,url:a}}):d);this.$VideoPlayerHTML5Oz27&&(this.$VideoPlayerHTML5Oz27.setError(d).log(),this.$VideoPlayerHTML5Oz27=null)}.bind(this)).setResponseHandler(Object.assign(function(b){this.$VideoPlayerHTML5Oz27&&(j(this.$VideoPlayerHTML5Oz27,a),this.$VideoPlayerHTML5Oz27&&this.$VideoPlayerHTML5Oz27.log(),this.$VideoPlayerHTML5Oz27=null),c.resolve(b)}.bind(this),{includeHeaders:!0})).send();return c.getPromise()};l.prototype.$VideoPlayerHTML5Oz38=function(a){__p&&__p();var c=a.manifest,d=a.manifestUrl,e=a.loggerProviders,f=a.prefetchCache,g=a.initialRepresentations,h=a.videoID,i=a.width;a=a.height;c=this.$VideoPlayerHTML5Oz4=new(b("oz-player"))(this.$VideoPlayerHTML5Oz1,this.$VideoPlayerHTML5Oz3,c,{width:i,height:a},d,{perfLoggerProviders:e,observedOperationLoggers:[],isOzDevConsoleEnabled:b("gkx")("722076")},f,new(b("OzNetworkRequestStreamHandler"))(this.$VideoPlayerHTML5Oz3,function(a,b){this.$VideoPlayerHTML5Oz30&&this.$VideoPlayerHTML5Oz30.handleHeaders(a,b)}.bind(this)),g||[],this.$VideoPlayerHTML5Oz42(),h,this.$VideoPlayerHTML5Oz43(),this.$VideoPlayerHTML5Oz44(),this.$VideoPlayerHTML5Oz45(),this.$VideoPlayerHTML5Oz29,this.$VideoPlayerHTML5Oz46(),this.$VideoPlayerHTML5Oz3.getNumber("live_initial_playback_position",0));!this.$VideoPlayerHTML5Oz3.getBool("cleanup_all_ozplayer_subscriptions",!1)?(c.onError(this.$VideoPlayerHTML5Oz41.bind(this)),c.addListener("destroyed",this.$VideoPlayerHTML5Oz47.bind(this)),c.addListener("debug/dashPlayerEvent",this.$VideoPlayerHTML5Oz48.bind(this)),c.addListener("streamEnd",this.$VideoPlayerHTML5Oz49.bind(this))):this.$VideoPlayerHTML5Oz12.addSubscriptions(c.onError(this.$VideoPlayerHTML5Oz41.bind(this)),c.addListener("destroyed",this.$VideoPlayerHTML5Oz47.bind(this)),c.addListener("debug/dashPlayerEvent",this.$VideoPlayerHTML5Oz48.bind(this)),c.addListener("streamEnd",this.$VideoPlayerHTML5Oz49.bind(this)));c.setupPlayer();this.$VideoPlayerHTML5Oz50(c);this.$VideoPlayerHTML5Oz3.getBool("emit_cea_608_availability",!1)&&this.$VideoPlayerHTML5Oz51(c);this.$VideoPlayerHTML5Oz30&&this.$VideoPlayerHTML5Oz52(c);this.$VideoPlayerHTML5Oz53()&&c.updatePlayerRunTimeConfig({videoStreamDataHandler:this.$VideoPlayerHTML5Oz54()})};l.prototype.$VideoPlayerHTML5Oz54=function(){__p&&__p();return this.$VideoPlayerHTML5Oz3.getBool("parse_cea_608",!1)?function(a,c){__p&&__p();if(!this.$VideoPlayerHTML5Oz53()||!this.$VideoPlayerHTML5Oz31)return;try{a=a.getCustomField("timescale")||0;if(!a||typeof a!=="number")return;c=b("extractCEA608")(c,a).then(function(a){this.emit("cea608CaptionsParsed",a)}.bind(this));this.$VideoPlayerHTML5Oz9&&i(c,this.$VideoPlayerHTML5Oz9,"cea608_extraction")}catch(a){this.$VideoPlayerHTML5Oz41(a)}}.bind(this):null};l.prototype.$VideoPlayerHTML5Oz43=function(){var a=[];this.$VideoPlayerHTML5Oz3.getBool("respect_force_hd_prop",!1)&&this.$VideoPlayerHTML5Oz13===b("VideoQualityClass").HD&&a.push(new(b("OzMinimumSmallestDimensionRestriction"))(k));var c=this.$VideoPlayerHTML5Oz3.getNumber("mos_upper_threshold",0),d=this.$VideoPlayerHTML5Oz3.getNumber("mos_lower_threshold",0);c>d&&a.push(new(b("OzMosThresholdRestriction"))(c,d,this.$VideoPlayerHTML5Oz3.getBool("keep_lowest_mos_above_upper_thresold",!1)));return a};l.prototype.$VideoPlayerHTML5Oz37=function(a){__p&&__p();if(this.$VideoPlayerHTML5Oz3.getBool("fix_representation_ended_timing",!1)&&(this.$VideoPlayerHTML5Oz1.paused||this.$VideoPlayerHTML5Oz1.seeking))return;if(!this.$VideoPlayerHTML5Oz4)return;a=this.$VideoPlayerHTML5Oz4.getVideoRepresentationIDAtTime(a);if(a!=null&&a!==this.$VideoPlayerHTML5Oz8){var b=this.$VideoPlayerHTML5Oz8;this.$VideoPlayerHTML5Oz8=a;b!=null&&this.emit("representation_ended",{representationID:b,nextRepresentationID:a})}};l.prototype.$VideoPlayerHTML5Oz34=function(){var a=this.$VideoPlayerHTML5Oz3.getNumber("connection_quality_context_throttle_frequency",0);if(a===0)return;var c=function(){this.$VideoPlayerHTML5Oz3.setContext("connection_quality",b("VideoPlayerConnectionQuality").evaluate(l.getEstimatedBandwidth))}.bind(this);this.$VideoPlayerHTML5Oz12.addSubscriptions(b("oz-player/networks/OzBandwidthEstimator").addListener("bandwidth_sampled",b("throttle")(c,a)));c()};l.prototype.$VideoPlayerHTML5Oz46=function(){return this.$VideoPlayerHTML5Oz3.getBool("end_all_streams_on_stream_gone",!1)?function(a){return a.forEach(function(a){return a.endStream()})}:null};l.prototype.$VideoPlayerHTML5Oz41=function(a){if(a instanceof b("oz-player/utils/OzError")){var c=a.getExtra();c.code==="417"&&c.headers&&c.headers.has("x-fb-video-replica")&&this.$VideoPlayerHTML5Oz3.getBool("enable_double_ingest",!1)?this.emit("replicaSwitch",{replica:parseInt(c.headers.get("x-fb-video-replica"),10),url:c.url,status:c.code,timestamp:new Date().valueOf()}):(this.emit("error",{error:a.getType(),message:a.getDescription(),httpStatus:c.code,url:c.url,stack:a.stack}),this.$VideoPlayerHTML5Oz4&&this.$VideoPlayerHTML5Oz4.destroy())}else this.emit("error",{error:"OZ_JAVASCRIPT_NATIVE",message:a.name+" "+a.message,httpStatus:null,url:null,stack:a.stack})};l.prototype.$VideoPlayerHTML5Oz49=function(){this.$VideoPlayerHTML5Oz28=!0};l.prototype.$VideoPlayerHTML5Oz47=function(){this.$VideoPlayerHTML5Oz4=null};l.prototype.$VideoPlayerHTML5Oz48=function(a){this.emit("debug/dashPlayerEvent",a.detail)};l.prototype.$VideoPlayerHTML5Oz55=function(){var a=1;return this.$VideoPlayerHTML5Oz24!=null&&Math.abs(this.$VideoPlayerHTML5Oz1.currentTime-this.$VideoPlayerHTML5Oz24)<a||this.$VideoPlayerHTML5Oz25!=null&&Math.abs(this.$VideoPlayerHTML5Oz1.currentTime-this.$VideoPlayerHTML5Oz25)<a?!0:!1};l.prototype.$VideoPlayerHTML5Oz35=function(a){this.$VideoPlayerHTML5Oz55()||(this.$VideoPlayerHTML5Oz22=!0,this.emit("bufferingStart"),this.$VideoPlayerHTML5Oz9&&(this.$VideoPlayerHTML5Oz10=this.$VideoPlayerHTML5Oz9.getOperationLogger("buffering").setType(a))),this.$VideoPlayerHTML5Oz3.getBool("throttle_playback_rate_on_stall",!1)&&this.$VideoPlayerHTML5Oz56()};l.prototype.$VideoPlayerHTML5Oz36=function(){(!this.$VideoPlayerHTML5Oz3.getBool("buffer_end_only_when_buffering",!1)||this.$VideoPlayerHTML5Oz22)&&(this.emit("bufferingEnd"),this.$VideoPlayerHTML5Oz10&&(this.$VideoPlayerHTML5Oz10.log(),this.$VideoPlayerHTML5Oz10=null),this.$VideoPlayerHTML5Oz22=!1),this.$VideoPlayerHTML5Oz3.getBool("throttle_playback_rate_on_stall",!1)&&this.$VideoPlayerHTML5Oz57()};l.prototype.$VideoPlayerHTML5Oz56=function(){this.$VideoPlayerHTML5Oz5==null&&(this.$VideoPlayerHTML5Oz5=this.$VideoPlayerHTML5Oz1.playbackRate),this.$VideoPlayerHTML5Oz1.playbackRate=0};l.prototype.$VideoPlayerHTML5Oz57=function(){this.$VideoPlayerHTML5Oz5&&(this.$VideoPlayerHTML5Oz1.playbackRate=this.$VideoPlayerHTML5Oz5),this.$VideoPlayerHTML5Oz5=null};l.prototype.$VideoPlayerHTML5Oz52=function(a){var b=a.getMpd();a=function(){if(this.$VideoPlayerHTML5Oz30){var a=b.getCustomField("loapStreamType");typeof a==="number"&&this.$VideoPlayerHTML5Oz30&&this.$VideoPlayerHTML5Oz30.setStreamType(a)}}.bind(this);a();this.$VideoPlayerHTML5Oz12.addSubscriptions(b.addListener("updated",a))};l.prototype.$VideoPlayerHTML5Oz51=function(a){var b=a.getMpd();a=this.$VideoPlayerHTML5Oz3.getBool("enable_asr_captions",!1);this.$VideoPlayerHTML5Oz32=!!b.getCustomField("hasInlinedSubtitlesFromUsingASRCaptions")&&a;a=function(){this.$VideoPlayerHTML5Oz58(!!b.getCustomField("hasInlinedSubtitles")||this.$VideoPlayerHTML5Oz32)}.bind(this);a();this.$VideoPlayerHTML5Oz12.addSubscriptions(b.addListener("updated",a))};l.prototype.$VideoPlayerHTML5Oz58=function(a){if(this.$VideoPlayerHTML5Oz6===a)return;this.$VideoPlayerHTML5Oz6=a;this.emit("cea608AvailabilityChanged")};l.prototype.$VideoPlayerHTML5Oz53=function(){return this.$VideoPlayerHTML5Oz6};l.prototype.$VideoPlayerHTML5Oz50=function(a){a=a;if(!a)return;this.$VideoPlayerHTML5Oz3.getNumber("stream_interrupt_check_mpd_stale_count_threshold",0)>0&&this.$VideoPlayerHTML5Oz12.addSubscriptions(a.addListener("streamInterruptAt",function(a){this.$VideoPlayerHTML5Oz24=a,this.$VideoPlayerHTML5Oz22&&(this.emit("bufferingEnd"),this.$VideoPlayerHTML5Oz10&&(this.$VideoPlayerHTML5Oz10.log(),this.$VideoPlayerHTML5Oz10=null)),this.$VideoPlayerHTML5Oz59()}.bind(this)),a.addListener("streamResumedAt",function(a){this.$VideoPlayerHTML5Oz25=a,this.$VideoPlayerHTML5Oz23&&this.$VideoPlayerHTML5Oz60()}.bind(this)))};l.prototype.$VideoPlayerHTML5Oz59=function(){this.emit("streamInterrupted"),this.$VideoPlayerHTML5Oz22=!1,this.$VideoPlayerHTML5Oz23=!0,this.$VideoPlayerHTML5Oz9&&(this.$VideoPlayerHTML5Oz11=this.$VideoPlayerHTML5Oz9.getOperationLogger("stream_interrupted"))};l.prototype.$VideoPlayerHTML5Oz60=function(){this.emit("streamResumed"),this.$VideoPlayerHTML5Oz11&&(this.$VideoPlayerHTML5Oz11.log(),this.$VideoPlayerHTML5Oz11=null),this.$VideoPlayerHTML5Oz23=!1};l.prototype.$VideoPlayerHTML5Oz42=function(){__p&&__p();return new Map([["fbProjection",function(a){try{return a.Period[0].AdaptationSet[0].$.FBProjection||null}catch(a){return null}}],["hasInlinedSubtitles",function(a){a=a.Period[0];a=a&&a.AdaptationSet[0].Accessibility;return a&&a[0]?a[0].$.schemeIdUri==="urn:scte:dash:cc:cea-608:2015":!1}],["hasInlinedSubtitlesFromUsingASRCaptions",function(a){a=Number.parseInt(a.$.usingASRCaptions,0);return!isNaN(a)&&a!=0}],["isFBIsLiveTemplated",function(a){return a.$.FBIsLiveTemplated==="true"}],["loapStreamType",function(a){return a.$.loapStreamType?parseInt(a.$.loapStreamType,10):0}]])};l.prototype.$VideoPlayerHTML5Oz44=function(){__p&&__p();var a={timescale:function(a){a=a.SegmentTemplate;if(a&&a.length>0){a=a[0].$;if(a)return Number.parseInt(a.timescale,0)||null}return null}},c=this.$VideoPlayerHTML5Oz3.getNumber("mos_upper_threshold",0),d=this.$VideoPlayerHTML5Oz3.getNumber("mos_lower_threshold",0);c>d&&(a.playbackResolutionMos=function(a){try{return a.$.FBPlaybackResolutionMos}catch(a){return null}});this.$VideoPlayerHTML5Oz3.getBool("parse_custom_quality_label",!1)&&(a.qualityLabel=function(a){try{return a.$.FBQualityLabel}catch(a){return null}});this.$VideoPlayerHTML5Oz3.getBool("parse_first_segment",!1)&&(a.firstSegmentParser=function(a){if(this.$VideoPlayerHTML5Oz20!=null&&this.$VideoPlayerHTML5Oz20>0)return null;try{var c=a.SegmentBase[0].$.FBFirstSegmentRange.split("-").map(Number),d={startByte:c[0],endByte:c[1]},e=new(b("oz-player/shims/OzURI"))(a.BaseURL[0]._);return{getURI:function(){return e},getByteRange:function(){return d},getTimeRange:function(){return{startTime:0,endTime:2}}}}catch(a){return null}}.bind(this));return a};l.prototype.$VideoPlayerHTML5Oz45=function(){return this.$VideoPlayerHTML5Oz3.getBool("use_repomen_abr",!1)?function(a,c,d,e,f,g,h){return new(b("RepomenAbrManager"))(a,c,d,e,f,g,h)}:null};l.prototype.play=function(){this.$VideoPlayerHTML5Oz21&&this.$VideoPlayerHTML5Oz21.playStarted();return this.$VideoPlayerHTML5Oz1.play()};l.prototype.pause=function(){this.$VideoPlayerHTML5Oz1.pause()};l.prototype.reload=function(){if(this.$VideoPlayerHTML5Oz3.getBool("enable_abortload_and_reload",!1)){this.$VideoPlayerHTML5Oz33();this.setup();return b("MaybeNativePromise").resolve()}return b("Promise").reject()};l.prototype.unload=function(){this.$VideoPlayerHTML5Oz12.release();this.$VideoPlayerHTML5Oz10&&(this.$VideoPlayerHTML5Oz10.log(),this.$VideoPlayerHTML5Oz10=null);this.$VideoPlayerHTML5Oz11&&(this.$VideoPlayerHTML5Oz11.log(),this.$VideoPlayerHTML5Oz11=null);this.$VideoPlayerHTML5Oz21&&this.$VideoPlayerHTML5Oz21.unload();this.$VideoPlayerHTML5Oz26=0;var a=b("Promise").resolve();this.$VideoPlayerHTML5Oz3.getBool("cleanup_buffering_detector_on_unload",!1)&&this.$VideoPlayerHTML5Oz7&&this.$VideoPlayerHTML5Oz7.destroy();this.$VideoPlayerHTML5Oz3.getBool("enable_abortload_and_reload",!1)&&(this.$VideoPlayerHTML5Oz36(),this.$VideoPlayerHTML5Oz4&&(a=this.$VideoPlayerHTML5Oz4.destroy(),this.$VideoPlayerHTML5Oz4=null));return a};l.prototype.getVideoStreamInfoIDForTimePosition=function(a){return!this.$VideoPlayerHTML5Oz4?null:this.$VideoPlayerHTML5Oz4.getVideoRepresentationIDAtTime(a)};l.prototype.getAudioStreamInfoIDForTimePosition=function(a){return!this.$VideoPlayerHTML5Oz4?null:this.$VideoPlayerHTML5Oz4.getAudioRepresentationIDAtTime(a)};l.prototype.getDashAudioConfiguration=function(){return""};l.prototype.getLocalEstimator=function(){return null};l.prototype.setDimensions=function(a,b){this.$VideoPlayerHTML5Oz4&&this.$VideoPlayerHTML5Oz4.setDimensions({width:a,height:b})};l.prototype.getLongestInitResponseTime=function(){return 0};l.prototype.setPlaybackRate=function(a){this.$VideoPlayerHTML5Oz5=a,this.$VideoPlayerHTML5Oz1.playbackRate=a};l.prototype.hasSubtitles=function(){return this.$VideoPlayerHTML5Oz53()};l.prototype.areSubtitlesAutogenerated=function(){return this.$VideoPlayerHTML5Oz32};l.prototype.enableSubtitles=function(a){this.$VideoPlayerHTML5Oz31=a};l.prototype.setPreferredVideoQuality=function(a){if(!this.$VideoPlayerHTML5Oz4)return;this.$VideoPlayerHTML5Oz4.switchToVideoQuality(a)};l.prototype.setVideoStreamOffset=function(a){};l.prototype.getSelectedVideoQuality=function(){return!this.$VideoPlayerHTML5Oz4?null:this.$VideoPlayerHTML5Oz4.getCurrentQuality()};l.prototype.unsetPreferredVideoQuality=function(){this.$VideoPlayerHTML5Oz4&&this.$VideoPlayerHTML5Oz4.enableVideoQualityAdaptation()};l.prototype.getAvailableVideoQualities=function(){return!this.$VideoPlayerHTML5Oz4?[]:this.$VideoPlayerHTML5Oz4.getVideoQualities()};l.prototype.getIsAbrEnabled=function(){return this.$VideoPlayerHTML5Oz3.getBool("enable_adaptation",!1)};l.prototype.canAutoSelectVideoQuality=function(){return!0};l.prototype.isDrm=function(){return!1};l.prototype.setPreloadDisabled=function(a){};l.prototype.restoreStreamBufferSize=function(){};l.prototype.getDebug=function(){return{manifest:this.$VideoPlayerHTML5Oz2,DashPlayer:this.$VideoPlayerHTML5Oz4,AbrManager:this.$VideoPlayerHTML5Oz4?this.$VideoPlayerHTML5Oz4.getDebug().VideoAbrManager:null,BandwidthEstimator:b("oz-player/networks/OzBandwidthEstimator")}};l.prototype.setSmartBufferAdjustmentEnabled=function(a){};l.prototype.getVideoProjection=function(){return!this.$VideoPlayerHTML5Oz4?null:this.$VideoPlayerHTML5Oz4.getMpd().getCustomField("fbProjection")};l.prototype.isPlayingLiveVODHighlights=function(){return!1};l.prototype.setEnableLiveheadCatchup=function(a){this.$VideoPlayerHTML5Oz4&&this.$VideoPlayerHTML5Oz4.setEnableLiveheadCatchup(a)};l.prototype.isFBWasLive=function(){return!1};l.prototype.clearBufferAfterSeekingIfLowerQuality=function(a){};l.prototype.isFBIsLiveTemplated=function(){if(this.$VideoPlayerHTML5Oz4){var a=this.$VideoPlayerHTML5Oz4.getMpd().getCustomField("isFBIsLiveTemplated");return!!a}return!1};l.prototype.isFBMS=function(){return!1};l.prototype.isLiveheadCatchupEnabled=function(){return!1};l.prototype.getSeekableRanges=function(){__p&&__p();if(this.$VideoPlayerHTML5Oz4){var a=this.$VideoPlayerHTML5Oz4.getMpd();a=a.getVideoRepresentations();if(a.length){a=a[0];a=a.getTimeRanges();if(a.length){var c=a[0].startTime;a=Math.max(a[a.length-1].endTime-this.$VideoPlayerHTML5Oz3.getNumber("live_rewind_seek_to_live_delta",8),c);return new(b("TimeRanges"))([{startTime:c,endTime:a}])}}}return null};l.prototype.refreshDashManifest=function(){return b("Promise").reject()};l.prototype.refreshLiveVODHighlightsManifest=function(){return b("Promise").reject()};l.prototype.switchReplicaSet=function(a){var c=new(b("URI"))(this.$VideoPlayerHTML5Oz14);c.addQueryData("replica",a);this.$VideoPlayerHTML5Oz14=c.toString()};l.prototype.getPlaybackRate=function(){return 1};l.prototype.getPlayerVersion=function(){return b("VideoPlayerVersions").OZ};l.prototype.$VideoPlayerHTML5Oz61=function(a){a=a.trim();var b=a[a.length-1];return b.toLowerCase()==="p"?a:a+"p"};l.prototype.$VideoPlayerHTML5Oz62=function(a){a=a.trim();var b=a[a.length-1];return b.toLowerCase()==="p"?a.substr(0,a.length-1):a};l.prototype.getManifestUrl=function(){return this.$VideoPlayerHTML5Oz14};e.exports=l}),null);