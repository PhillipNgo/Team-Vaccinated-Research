if (self.CavalryLogger) { CavalryLogger.start_js(["Ywy+h"]); }

__d("VisualPollAttachmentComponent_question.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},b={kind:"ScalarField",alias:null,name:"viewer_has_voted",args:null,storageKey:null},c=[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}];return{kind:"Fragment",name:"VisualPollAttachmentComponent_question",type:"Question",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"can_viewer_post",args:null,storageKey:null},a,{kind:"ScalarField",alias:null,name:"is_viewer_author",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"response_method",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"poll_end_time",args:null,storageKey:null},b,{kind:"ScalarField",alias:null,name:"hidden_results",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"options",storageKey:'options(first:2,orderby:["creation_time"])',args:[{kind:"Literal",name:"first",value:2,type:"Int"},{kind:"Literal",name:"orderby",value:["creation_time"],type:"[QuestionOptionsOrdering]"}],concreteType:"QuestionOptionsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"QuestionOptionsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"QuestionOption",plural:!1,selections:[a,b,{kind:"LinkedField",alias:null,name:"text_with_entities",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"voters",storageKey:null,args:null,concreteType:"QuestionOptionVotersConnection",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"count",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"associated_external_image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:c},{kind:"LinkedField",alias:null,name:"associated_image",storageKey:null,args:null,concreteType:"Photo",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:c}]}]}]}]}]}}();e.exports=a}),null);
__d("VisualPollAttachmentComponent_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"VisualPollAttachmentComponent_viewer",type:"Viewer",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"actor",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]};e.exports=a}),null);
__d("VisualPollAttachmentQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"question",type:"ID!",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"question",type:"ID!"}],c={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},e={kind:"ScalarField",alias:null,name:"viewer_has_voted",args:null,storageKey:null},f=[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}];return{kind:"Request",fragment:{kind:"Fragment",name:"VisualPollAttachmentQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:"viewer",name:"__viewer_viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"FragmentSpread",name:"VisualPollAttachmentComponent_viewer",args:null}]},{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[{kind:"InlineFragment",type:"Question",selections:[{kind:"FragmentSpread",name:"VisualPollAttachmentComponent_question",args:null}]}]}]},operation:{kind:"Operation",name:"VisualPollAttachmentQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"actor",storageKey:null,args:null,concreteType:null,plural:!1,selections:[c,d]}]},{kind:"LinkedHandle",alias:null,name:"viewer",args:null,handle:"viewer",key:"",filters:null},{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[c,d,{kind:"InlineFragment",type:"Question",selections:[{kind:"ScalarField",alias:null,name:"can_viewer_post",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_viewer_author",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"response_method",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"poll_end_time",args:null,storageKey:null},e,{kind:"ScalarField",alias:null,name:"hidden_results",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"options",storageKey:'options(first:2,orderby:["creation_time"])',args:[{kind:"Literal",name:"first",value:2,type:"Int"},{kind:"Literal",name:"orderby",value:["creation_time"],type:"[QuestionOptionsOrdering]"}],concreteType:"QuestionOptionsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"QuestionOptionsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"QuestionOption",plural:!1,selections:[d,e,{kind:"LinkedField",alias:null,name:"text_with_entities",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"voters",storageKey:null,args:null,concreteType:"QuestionOptionVotersConnection",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"count",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"associated_external_image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:f},{kind:"LinkedField",alias:null,name:"associated_image",storageKey:null,args:null,concreteType:"Photo",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:f},d]}]}]}]}]}]}]},params:{operationKind:"query",name:"VisualPollAttachmentQuery",id:"1896077367083695",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VisualPollUnvoteMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"QuestionRemoveVoteData!",defaultValue:null}],b={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"viewer_has_voted",args:null,storageKey:null};b=[{kind:"LinkedField",alias:null,name:"question_remove_vote",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input",type:"QuestionRemoveVoteData!"}],concreteType:"QuestionRemoveVoteResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"option",storageKey:null,args:null,concreteType:"QuestionOption",plural:!1,selections:[b,c,{kind:"LinkedField",alias:null,name:"voters",storageKey:null,args:null,concreteType:"QuestionOptionVotersConnection",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"count",args:null,storageKey:null}]}]},{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[b,c]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"VisualPollUnvoteMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"VisualPollUnvoteMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"VisualPollUnvoteMutation",id:"1613120932078401",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VisualPollVoteMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"QuestionAddVoteData!",defaultValue:null}],b={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},c={kind:"ScalarField",alias:null,name:"viewer_has_voted",args:null,storageKey:null};b=[{kind:"LinkedField",alias:null,name:"question_add_vote",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input",type:"QuestionAddVoteData!"}],concreteType:"QuestionAddVoteResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"option",storageKey:null,args:null,concreteType:"QuestionOption",plural:!1,selections:[b,c,{kind:"LinkedField",alias:null,name:"voters",storageKey:null,args:null,concreteType:"QuestionOptionVotersConnection",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"count",args:null,storageKey:null}]}]},{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[b,c]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"VisualPollVoteMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"VisualPollVoteMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"VisualPollVoteMutation",id:"1766381183403674",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VisualPollVoteSubscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"QuestionVoteSubscribeData!",defaultValue:null}],b=[{kind:"Variable",name:"data",variableName:"input",type:"QuestionVoteSubscribeData!"}],c=[{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[{kind:"FragmentSpread",name:"VisualPollAttachmentComponent_question",args:null}]}],d={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},e={kind:"ScalarField",alias:null,name:"viewer_has_voted",args:null,storageKey:null},f=[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}];e=[{kind:"LinkedField",alias:null,name:"question",storageKey:null,args:null,concreteType:"Question",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"can_viewer_post",args:null,storageKey:null},d,{kind:"ScalarField",alias:null,name:"is_viewer_author",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"response_method",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"poll_end_time",args:null,storageKey:null},e,{kind:"ScalarField",alias:null,name:"hidden_results",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"options",storageKey:'options(first:2,orderby:["creation_time"])',args:[{kind:"Literal",name:"first",value:2,type:"Int"},{kind:"Literal",name:"orderby",value:["creation_time"],type:"[QuestionOptionsOrdering]"}],concreteType:"QuestionOptionsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"QuestionOptionsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"QuestionOption",plural:!1,selections:[d,e,{kind:"LinkedField",alias:null,name:"text_with_entities",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"voters",storageKey:null,args:null,concreteType:"QuestionOptionVotersConnection",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"count",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"associated_external_image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:f},{kind:"LinkedField",alias:null,name:"associated_image",storageKey:null,args:null,concreteType:"Photo",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:f},d]}]}]}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"VisualPollVoteSubscription",type:"Subscription",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"question_vote_subscribe",storageKey:null,args:b,concreteType:null,plural:!1,selections:[{kind:"InlineFragment",type:"QuestionRemoveVoteResponsePayload",selections:c},{kind:"InlineFragment",type:"QuestionAddVoteResponsePayload",selections:c}]}]},operation:{kind:"Operation",name:"VisualPollVoteSubscription",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"question_vote_subscribe",storageKey:null,args:b,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"InlineFragment",type:"QuestionRemoveVoteResponsePayload",selections:e},{kind:"InlineFragment",type:"QuestionAddVoteResponsePayload",selections:e}]}]},params:{operationKind:"subscription",name:"VisualPollVoteSubscription",id:"1966433156719006",text:null,metadata:{subscriptionName:"question_vote_subscribe"}}}}();e.exports=a}),null);
__d("VisualPollUnvoteMutation",["RelayModern","VisualPollUnvoteMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("VisualPollUnvoteMutation.graphql")};function a(a,b,c){b={input:{question_id:b.question_id,option_id:b.option_id,actor_id:b.actor_id}};return g(a,{mutation:h,variables:b,onCompleted:c&&c.onCompleted,onError:c&&c.onError,optimisticUpdater:c&&c.optimisticUpdater,optimisticResponse:c&&c.optimisticResponse,updater:c&&c.updater})}e.exports={commit:a}}),null);
__d("VisualPollVoteListener",["cx","Arbiter"],(function(a,b,c,d,e,f,g){"use strict";var h="visual_poll_vote_";a={EVENT_KEY:h,initCTAListener:function(a,c){b("Arbiter").subscribe(h+a,function(){c.classList.remove("_62z6")})}};e.exports=a}),null);
__d("VisualPollVoteMutation",["RelayModern","VisualPollVoteMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("VisualPollVoteMutation.graphql")};function a(a,b,c){b={input:{question_id:b.question_id,option_id:b.option_id,actor_id:b.actor_id,tracking:b.tracking}};return g(a,{mutation:h,variables:b,onCompleted:c&&c.onCompleted,onError:c&&c.onError,optimisticUpdater:c&&c.optimisticUpdater,optimisticResponse:c&&c.optimisticResponse,updater:c&&c.updater})}e.exports={commit:a}}),null);
__d("VisualPollVoteSubscription",["RelayModern","VisualPollVoteSubscription.graphql"],(function(a,b,c,d,e,f){"use strict";b("RelayModern").graphql;var g=b("RelayModern").requestSubscription,h=function(){return b("VisualPollVoteSubscription.graphql")};function a(a,b,c){b={input:b};return g(a,{subscription:h,variables:b,onCompleted:c&&c.onCompleted,onError:c&&c.onError,onNext:c&&c.onNext})}e.exports={subscribe:a}}),null);
__d("XVisualPollVotesDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/polls/visual_poll/votes/dialog/",{question_id:{type:"FBID",required:!0},actor_id:{type:"Int"},__asyncDialog:{type:"Int"}})}),null);
__d("VisualPollAttachmentComponent.react",["ix","cx","fbt","Arbiter","AsyncDialog","AsyncRequest","DateConsts","Image.react","LineClamp.react","QuestionPollType","React","RelayModern","TextWithEntities.react","VisualPollUnvoteMutation","VisualPollVoteListener","VisualPollVoteMutation","VisualPollVoteSubscription","XVisualPollVotesDialogController","asset","clearTimeout","intlSummarizeNumber","setTimeout","timeString","VisualPollAttachmentComponent_viewer.graphql","VisualPollAttachmentComponent_question.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("DateConsts").MS_PER_SEC;c=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var l={checkmark:"_204n",checkmarkOverlay:"_6985",footer:"_204o",footerEndTime:"_204p",footerUndoButtonText:"_4kpd",footerVoteCount:"_204q",footerVoteCountLink:"_62bz",footerVoteInfo:"_62b-",gifImage:"_204t",option:"_204u",options:"_204v",optionButton:"_42ft _4jy0 _517h _51sy _204w",mediaOptionButton:"_42ft _4jy0 _517h _51sy _64gp _204w",optionContainer:"_4s7t",optionResult:"_204x",optionText:"_1gt-",percentageBar:"_22ts",percentageBarInner:"_2_xu",percentageContainer:"_22tu",percentageText:"_22tv",resultOverlay:"_22tw",resultOverlayHiddenResults:"_6986",vtOptionResult:"_2utf",vtOptionResultText:"_2utm",vtPercentageText:"_2utn",vtProgressBar:"_5e4h _2uto",root:"_204y"};d=babelHelpers.inherits(a,b("React").Component);j=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=j.constructor).call.apply(a,[this].concat(d)),this.subscription=null,this.$1=null,b}a.prototype.componentDidMount=function(){var a;a=(a=this.props.question)==null?void 0:a.id;a!=null&&(this.subscription=b("VisualPollVoteSubscription").subscribe(this.props.relay.environment,{question_id:a}));this.$1=this.$2()};a.prototype.componentDidUpdate=function(a){a=a.question.poll_end_time;var c=this.props.question.poll_end_time;a!==c&&(b("clearTimeout")(this.$1),this.$1=this.$2())};a.prototype.componentWillUnmount=function(){this.subscription!=null&&this.subscription.dispose(),b("clearTimeout")(this.$1)};a.prototype.render=function(){__p&&__p();var a=this.props.question;if(!a||!a.options)return null;var c=a.options.edges.slice(0,2),d=c.reduce(function(a,b){return a+b.node.voters.count},0),e=a.response_method;a=c.map(function(a,c){if(e===b("QuestionPollType").GIF_CHOOSE_ONE||e===b("QuestionPollType").IMAGE_CHOOSE_ONE)return this.$3(a,c,d);else if(e===b("QuestionPollType").VISUAL_TEXT_CHOOSE_ONE)return this.$4(a,c,d);return null}.bind(this));return b("React").createElement("div",{className:l.root},b("React").createElement("div",{className:e===b("QuestionPollType").GIF_CHOOSE_ONE||e===b("QuestionPollType").IMAGE_CHOOSE_ONE?l.options:null},a),this.$5(d))};a.prototype.$6=function(){var a=this.props.question;return!this.props.disableVote&&!!a.can_viewer_post&&!a.viewer_has_voted&&!this.$7()};a.prototype.$8=function(){var a=this.props.question;return!this.props.disableVote&&!!a.can_viewer_post&&!!a.viewer_has_voted&&!this.$7()};a.prototype.$7=function(){var a=this.props.question.poll_end_time;return!!a&&a*k-Date.now()<0};a.prototype.$9=function(){var a=this.props.question,b=a.hidden_results;a=a.is_viewer_author;var c=this.$7();if(c||a||!b)return!0;return b?!1:!0};a.prototype.$10=function(a,c){__p&&__p();var d,e;a=(a=this.props.question)!=null?a.id:a;e=(e=this.props.viewer)!=null?(e=e.actor)!=null?e.id:e:e;d=(d=c)!=null?(d=d.node)!=null?d.id:d:d;c=c.node.voters.count;this.$7()&&this.forceUpdate();if(!this.$6()||!a||!e||!d||typeof c!=="number")return;b("Arbiter").inform(b("VisualPollVoteListener").EVENT_KEY+a);b("VisualPollVoteMutation").commit(this.props.relay.environment,{option_id:d,question_id:a,actor_id:e,tracking:this.props.tracking},{optimisticResponse:{question_add_vote:{option:{id:d,viewer_has_voted:!0,voters:{count:c+1}},question:{id:a,viewer_has_voted:!0}}}})};a.prototype.$11=function(){__p&&__p();var a,c,d;d=(d=this.props.question)!=null?d.id:d;c=(c=this.props.viewer)!=null?(c=c.actor)!=null?c.id:c:c;a=(a=this.props.question)!=null?(a=a.options)!=null?a.edges:a:a;this.$7()&&this.forceUpdate();if(!this.$8()||!d||!c||!a)return;var e=null,f=null;for(var a=a,g=Array.isArray(a),h=0,a=g?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i,j;if(g){if(h>=a.length)break;j=a[h++]}else{h=a.next();if(h.done)break;j=h.value}j=j;if((i=j)!=null?(i=i.node)!=null?i.viewer_has_voted:i:i){e=(i=j.node)!=null?i.id:i;f=(i=j.node)!=null?(i=i.voters)!=null?i.count:i:i}}if(!e||typeof f!=="number")return;b("VisualPollUnvoteMutation").commit(this.props.relay.environment,{option_id:e,question_id:d,actor_id:c},{optimisticResponse:{question_remove_vote:{option:{id:e,viewer_has_voted:!1,voters:{count:f-1}},question:{id:d,viewer_has_voted:!1}}}})};a.prototype.$5=function(a){__p&&__p();var c=this.props.question,d=c.hidden_results,e=c.is_viewer_author,f=c.poll_end_time;c=c.viewer_has_voted;var g=null;this.$7()?g=i._("This poll has ended."):f&&(c||e)&&d?g=b("React").createElement("div",null,i._("The results of this poll will be shown {end_time}",[i._param("end_time",b("timeString")(f*k))])):f&&(g=b("React").createElement("div",null,i._("This poll ends {end_time}",[i._param("end_time",b("timeString")(f*k))])));g!=null&&(g=b("React").createElement("div",{className:l.footerEndTime},g));d=null;this.$8()&&(d=b("React").createElement("a",{href:"#",onClick:this.$11.bind(this)},b("React").createElement("div",{className:l.footerUndoButtonText},i._("Undo Vote"))));f=null;a>0&&this.$9()&&(f=b("React").createElement("div",{className:l.footerVoteCount},i._({"*":"{number} Votes","_1":"1 Vote"},[i._plural(a,"number",b("intlSummarizeNumber")(a))])),(c||e)&&(f=b("React").createElement("a",{className:l.footerVoteCountLink,href:"#",onClick:this.$12.bind(this)},f)));return g!=null||f!=null?b("React").createElement("div",{className:l.footer},g,d,b("React").createElement("div",{style:{flexGrow:1}}),b("React").createElement("div",{className:l.footerVoteInfo},f)):null};a.prototype.$3=function(a,c,d){__p&&__p();var e=null,f=a.node.associated_image,h=a.node.associated_external_image,i=this.$9();if(f&&f.image&&f.image.uri)e=f.image.uri;else if(h&&h.uri)e=h.uri;else return null;f=this.$6();h=a.node.viewer_has_voted;var j={cursor:f?"pointer":null,marginRight:c===0?"4px":0};return b("React").createElement("div",{className:l.option,key:a.node.id,onClick:function(){return this.$10(c,a)}.bind(this),role:"button",style:j,tabIndex:c},b("React").createElement("div",{className:l.optionContainer},b("React").createElement(b("Image.react"),{className:l.gifImage,src:e}),i?this.$13(a,d):this.$14(a)),b("React").createElement("div",{className:f?l.mediaOptionButton:l.optionResult},b("React").createElement(b("LineClamp.react"),{lines:2,lineHeight:16,disableNative:!1,fitHeightToShorterText:!0,enableTooltipOnOverflow:!0},b("React").createElement(b("TextWithEntities.react"),{className:l.optionText,renderEmoji:!0,renderEmoticons:!0,text:a.node.text_with_entities.text})),h&&i?b("React").createElement(b("Image.react"),{className:l.checkmark,src:g("383003")}):null))};a.prototype.$4=function(a,c,d){var e=this.$6(),f=a.node.viewer_has_voted,h=this.props.question.hidden_results,i=this.props.question.is_viewer_author,j={cursor:e?"pointer":null,marginBottom:c===0?"8px":0};d=d===0?0:this.$15(a.node.voters.count/d*100);f=f?b("React").createElement(b("Image.react"),{className:l.checkmark,src:g("383003")}):null;var k;e?k=b("React").createElement(b("TextWithEntities.react"),{className:l.optionText,renderEmoji:!0,renderEmoticons:!0,text:a.node.text_with_entities.text}):h&&!i?k=b("React").createElement("div",null,b("React").createElement(b("TextWithEntities.react"),{className:l.optionText,renderEmoji:!0,renderEmoticons:!0,text:a.node.text_with_entities.text}),f):k=b("React").createElement("div",{className:l.vtOptionResult},b("React").createElement("span",{className:l.vtPercentageText,style:{marginRight:"8px"}},d,"%"),b("React").createElement(b("TextWithEntities.react"),{className:l.vtOptionResultText,renderEmoji:!0,renderEmoticons:!0,text:a.node.text_with_entities.text}),f);return b("React").createElement("div",{className:l.option,key:a.node.id,onClick:function(){return this.$10(c,a)}.bind(this),role:"button",style:j,tabIndex:c},e||h&&!i?null:b("React").createElement("div",{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":d,className:l.vtProgressBar},b("React").createElement("div",{className:"_5e4k",style:{width:"calc(12px + "+d+" * (100% - 12px) / 100)"}})),b("React").createElement("div",{className:e||h&&!i?l.optionButton:l.vtOptionResult},k))};a.prototype.$14=function(a){a=a.node.viewer_has_voted;return this.$6()||!a?null:b("React").createElement("div",{className:l.percentageContainer},b("React").createElement("div",{className:l.resultOverlayHiddenResults},b("React").createElement(b("Image.react"),{className:l.checkmarkOverlay,src:g("512850")})))};a.prototype.$13=function(a,c){if(this.$6())return null;a=c===0?0:this.$15(a.node.voters.count/c*100);return b("React").createElement("div",{className:l.resultOverlay},b("React").createElement("div",{className:l.percentageContainer},b("React").createElement("div",{style:{display:"flex"}},b("React").createElement("div",{className:l.percentageText},a,"%"),b("React").createElement("div",{className:l.percentageBar},b("React").createElement("div",{className:l.percentageBarInner,style:{width:"calc((100% - 12px) * "+a/100+" + 12px)"}})))))};a.prototype.$15=function(a){__p&&__p();if(a<49.5||a>50.5){var b=Math.round(a);a+.5===b&&a<50&&b--;b===0&&a>0?b=1:b===100&&a<100&&(b=99);return b}b=a*10;a=Math.round(b);b+.5===a&&b<500&&a--;a===500&&(b<a?a--:b>a&&a++);return a/10};a.prototype.$12=function(){var a=b("XVisualPollVotesDialogController").getURIBuilder().setFBID("question_id",this.props.question.id).getURI();b("AsyncDialog").send(new(b("AsyncRequest"))(a))};a.prototype.$2=function(){var a=this.props.question.poll_end_time;return a==null||this.$7()?null:b("setTimeout")(function(){return this.forceUpdate()}.bind(this),a*k-Date.now())};e.exports=c(a,{viewer:function(){return b("VisualPollAttachmentComponent_viewer.graphql")},question:function(){return b("VisualPollAttachmentComponent_question.graphql")}})}),null);
__d("VisualPollAttachment.react",["React","RelayFBEnvironment","RelayModern","VisualPollAttachmentComponent.react","VisualPollAttachmentQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("RelayModern").QueryRenderer;b("RelayModern").graphql;function a(a){__p&&__p();var c=g||(g=function(){return b("VisualPollAttachmentQuery.graphql")}),d=function(c){var d=c.error;c=c.props;if(d)return b("React").createElement("div",null,d.message);else if(!c)return null;return b("React").createElement(b("VisualPollAttachmentComponent.react"),babelHelpers["extends"]({},c,{question:c.node,tracking:a.tracking,disableVote:a.disableVote}))};return b("React").createElement(h,{environment:b("RelayFBEnvironment"),query:c,variables:{question:a.question},render:d})}e.exports=a}),null);