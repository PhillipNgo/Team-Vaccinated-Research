if (self.CavalryLogger) { CavalryLogger.start_js(["a8eaL"]); }

__d("Asset3DBackgroundMap",[],(function(a,b,c,d,e,f){e.exports={one:{story:{normal:"3d-bkgrd-1.jpg",hd:"3d-bkgrd-1-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-1.jpg",hd:"3d-bkgrd-btn-1-2x.jpg"}},two:{story:{normal:"3d-bkgrd-2.jpg",hd:"3d-bkgrd-2-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-2.jpg",hd:"3d-bkgrd-btn-2-2x.jpg"}},three:{story:{normal:"3d-bkgrd-3.jpg",hd:"3d-bkgrd-3-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-3.jpg",hd:"3d-bkgrd-btn-3-2x.jpg"}},four:{story:{normal:"3d-bkgrd-4.jpg",hd:"3d-bkgrd-4-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-4.jpg",hd:"3d-bkgrd-btn-4-2x.jpg"}},five:{story:{normal:"3d-bkgrd-5.jpg",hd:"3d-bkgrd-5-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-5.jpg",hd:"3d-bkgrd-btn-5-2x.jpg"}},six:{story:{normal:"3d-bkgrd-6.jpg",hd:"3d-bkgrd-6-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-6.jpg",hd:"3d-bkgrd-btn-6-2x.jpg"}},seven:{story:{normal:"3d-bkgrd-7.jpg",hd:"3d-bkgrd-7-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-7.jpg",hd:"3d-bkgrd-btn-7-2x.jpg"}},eight:{story:{normal:"3d-bkgrd-8.jpg",hd:"3d-bkgrd-8-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-8.jpg",hd:"3d-bkgrd-btn-8-2x.jpg"}},nine:{story:{normal:"3d-bkgrd-9.jpg",hd:"3d-bkgrd-9-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-9.jpg",hd:"3d-bkgrd-btn-9-2x.jpg"}},ten:{story:{normal:"3d-bkgrd-10.jpg",hd:"3d-bkgrd-10-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-10.jpg",hd:"3d-bkgrd-btn-10-2x.jpg"}},eleven:{story:{normal:"3d-bkgrd-11.jpg",hd:"3d-bkgrd-11-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-11.jpg",hd:"3d-bkgrd-btn-11-2x.jpg"}},twelve:{story:{normal:"3d-bkgrd-12.jpg",hd:"3d-bkgrd-12-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-12.jpg",hd:"3d-bkgrd-btn-12-2x.jpg"}},thirteen:{story:{normal:"3d-bkgrd-13.jpg",hd:"3d-bkgrd-13-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-13.jpg",hd:"3d-bkgrd-btn-13-2x.jpg"}},fourteen:{story:{normal:"3d-bkgrd-14.jpg",hd:"3d-bkgrd-14-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-14.jpg",hd:"3d-bkgrd-btn-14-2x.jpg"}},fifteen:{story:{normal:"3d-bkgrd-15.jpg",hd:"3d-bkgrd-15-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-15.jpg",hd:"3d-bkgrd-btn-15-2x.jpg"}},sixteen:{story:{normal:"3d-bkgrd-16.jpg",hd:"3d-bkgrd-16-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-16.jpg",hd:"3d-bkgrd-btn-16-2x.jpg"}},seventeen:{story:{normal:"3d-bkgrd-17.jpg",hd:"3d-bkgrd-17-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-17.jpg",hd:"3d-bkgrd-btn-17-2x.jpg"}},eighteen:{story:{normal:"3d-bkgrd-18.jpg",hd:"3d-bkgrd-18-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-18.jpg",hd:"3d-bkgrd-btn-18-2x.jpg"}},twenty:{story:{normal:"3d-bkgrd-20.jpg",hd:"3d-bkgrd-20-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-20.jpg",hd:"3d-bkgrd-btn-20-2x.jpg"}},twentyone:{story:{normal:"3d-bkgrd-21.jpg",hd:"3d-bkgrd-21-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-21.jpg",hd:"3d-bkgrd-btn-21-2x.jpg"}},twentytwo:{story:{normal:"3d-bkgrd-22.jpg",hd:"3d-bkgrd-22-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-22.jpg",hd:"3d-bkgrd-btn-22-2x.jpg"}},twentythree:{story:{normal:"3d-bkgrd-23.jpg",hd:"3d-bkgrd-23-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-23.jpg",hd:"3d-bkgrd-btn-23-2x.jpg"}},twentyfour:{story:{normal:"3d-bkgrd-24.jpg",hd:"3d-bkgrd-24-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-24.jpg",hd:"3d-bkgrd-btn-24-2x.jpg"}},twentyfive:{story:{normal:"3d-bkgrd-25.jpg",hd:"3d-bkgrd-25-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-25.jpg",hd:"3d-bkgrd-btn-25-2x.jpg"}},twentysix:{story:{normal:"3d-bkgrd-26.jpg",hd:"3d-bkgrd-26-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-26.jpg",hd:"3d-bkgrd-btn-26-2x.jpg"}},twentyseven:{story:{normal:"3d-bkgrd-27.jpg",hd:"3d-bkgrd-27-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-27.jpg",hd:"3d-bkgrd-btn-27-2x.jpg"}},twentyeight:{story:{normal:"3d-bkgrd-28.jpg",hd:"3d-bkgrd-28-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-28.jpg",hd:"3d-bkgrd-btn-28-2x.jpg"}},twentynine:{story:{normal:"3d-bkgrd-29.jpg",hd:"3d-bkgrd-29-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-29.jpg",hd:"3d-bkgrd-btn-29-2x.jpg"}},thirty:{story:{normal:"3d-bkgrd-30.jpg",hd:"3d-bkgrd-30-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-30.jpg",hd:"3d-bkgrd-btn-30-2x.jpg"}},thirtyone:{story:{normal:"3d-bkgrd-31.jpg",hd:"3d-bkgrd-31-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-31.jpg",hd:"3d-bkgrd-btn-31-2x.jpg"}},thirtytwo:{story:{normal:"3d-bkgrd-32.jpg",hd:"3d-bkgrd-32-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-32.jpg",hd:"3d-bkgrd-btn-32-2x.jpg"}},thirtythree:{story:{normal:"3d-bkgrd-33.jpg",hd:"3d-bkgrd-33-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-33.jpg",hd:"3d-bkgrd-btn-33-2x.jpg"}},thirtyfour:{story:{normal:"3d-bkgrd-34.jpg",hd:"3d-bkgrd-34-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-34.jpg",hd:"3d-bkgrd-btn-34-2x.jpg"}},thirtyfive:{story:{normal:"3d-bkgrd-35.jpg",hd:"3d-bkgrd-35-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-35.jpg",hd:"3d-bkgrd-btn-35-2x.jpg"}},thirtysix:{story:{normal:"3d-bkgrd-36.jpg",hd:"3d-bkgrd-36-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-36.jpg",hd:"3d-bkgrd-btn-36-2x.jpg"}},"default":{story:{normal:null,hd:null},thumbnail:{normal:null,hd:null}},medium:{story:{normal:"3d-bkgrd-medium.jpg",hd:"3d-bkgrd-medium-2x.jpg"},thumbnail:{normal:null,hd:null}},spaces:{story:{normal:"3d-bkgrd-spaces.jpg",hd:"3d-bkgrd-spaces-2x.jpg"},thumbnail:{normal:null,hd:null}},creator:{story:{normal:"3d-bkgrd-creator.jpg",hd:"3d-bkgrd-creator-2x.jpg"},thumbnail:{normal:null,hd:null}}}}),null);
__d("PhotosUploadWaterfallErrorCodes",[],(function(a,b,c,d,e,f){e.exports={SECURITY:1,FILE_IO:2,IMAGE_IO:3,UPLOAD_IO:4,INVALID_SERVER_RESULT:5,RESIZE_FAILURE:6,ENCODE_FAILURE:7,INVALID_DOMAIN:8,BAD_JPEG_MARKERS:9,BAD_SERVER_RESPONSE:10,EXTERNAL_INTERFACE_UNAVAILABLE:11,JS_CALL_FAILED:12,UNCAUGHT_ERROR:13,UPLOAD_SWF_FAILED_LOAD:14,FILE_IO_TIMEOUT:15,IMAGE_SECURITY:16,BAD_IMAGE_FILE:17,IMAGE_IO_TIMEOUT:18,BLACK_PHOTO:19,EMPTY_FILE_LOADED:20,FILE_READ_DISABLED:21,BAD_NETWORK:22,FLASH_LOAD_TIMEOUT:23,FLASH_LOAD_FAILURE:24,FLASH_UPGRADE_REQUIRED:25,SPHERICAL_CHECK_FAILED:26,SPHERICAL_CHECK_TIMEOUT:27}}),null);
__d("ReactComposerJSONCollageLayoutData",[],(function(a,b,c,d,e,f){e.exports={1:[{validActors:3,photoLayouts:[[0,1,1,0]]}],2:[{validActors:3,photoLayouts:[[0,3,3,0],[0,6,3,3]]},{validActors:3,photoLayouts:[[0,6,3,0],[3,6,6,0]]},{validActors:3,photoLayouts:[[0,3,6,0],[0,6,6,3]]},{validActors:1,photoLayouts:[[0,6,2,0],[2,6,4,0]]}],3:[{validActors:3,photoLayouts:[[0,6,3,0],[3,3,6,0],[3,6,6,3]]},{validActors:3,photoLayouts:[[0,3,6,0],[0,6,3,3],[3,6,6,3]]},{validActors:2,photoLayouts:[[0,2,2,0],[0,4,2,2],[0,6,2,4]]},{validActors:1,photoLayouts:[[0,6,4,0],[4,3,6,0],[4,6,6,3]]},{validActors:1,photoLayouts:[[0,4,6,0],[0,6,3,4],[3,6,6,4]]},{validActors:1,photoLayouts:[[0,6,2,0],[2,6,4,0],[4,6,6,0]]},{validActors:1,photoLayouts:[[0,2,6,0],[0,4,6,2],[0,6,6,4]]}],4:[{validActors:3,photoLayouts:[[0,3,3,0],[0,6,3,3],[3,3,6,0],[3,6,6,3]]},{validActors:3,photoLayouts:[[0,6,4,0],[4,2,6,0],[4,4,6,2],[4,6,6,4]]},{validActors:3,photoLayouts:[[0,4,6,0],[0,6,2,4],[2,6,4,4],[4,6,6,4]]}],5:[{validActors:1,photoLayouts:[[0,3,3,0],[3,3,6,0],[0,6,2,3],[2,6,4,3],[4,6,6,3]]},{validActors:1,photoLayouts:[[0,3,3,0],[0,6,3,3],[3,2,5,0],[3,4,5,2],[3,6,5,4]]}]}}),null);
__d("SphericalPhotoConstants",[],(function(a,b,c,d,e,f){e.exports={QE_SPHERICAL_PHOTO_UNIVERSE:"spherical_photo",QE_WWW_UNIVERSE:"spherical_photo_www_universe",QE_WWW_COMPOSER_UNIVERSE:"spherical_photo_www_composer_universe",FEED_TRACKING_KEY:"spherical_photo_interaction"}}),null);
__d("Asset3DBackgroundSize",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({THUMBNAIL:"thumbnail",STORY:"story"})}),null);
__d("XAsset3DUpdateFallbackImageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/3d/update/",{id:{type:"FBID",required:!0}})}),null);
__d("dataUriToBlob",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){__p&&__p();var b=a.split(",")[0].indexOf("base64")>=0,c=a.split(",")[0].split(":")[1].split(";")[0];a=b?atob(a.split(",")[1]):decodeURIComponent(a.split(",")[1]);if(b){b=new Uint8Array(a.length);for(var d=0;d<a.length;d++)b[d]=a.charCodeAt(d);d=[b]}else d=[a];return new Blob(d,{type:c})}e.exports=a}),null);
__d("isHDScreen",[],(function(a,b,c,d,e,f){"use strict";function a(){if(window.devicePixelRatio>1.5)return!0;var a="(-webkit-min-device-pixel-ratio: 1.5),(min--moz-device-pixel-ratio: 1.5),(-o-min-device-pixel-ratio: 3/2),(min-resolution: 1.5dppx)";return window.matchMedia&&window.matchMedia(a).matches?!0:!1}e.exports=a}),null);
__d("Asset3DUtils",["ActorURI","Asset3DBackgroundMap","Asset3DBackgroundSize","AsyncRequest","XAsset3DUpdateFallbackImageController","dataUriToBlob","isHDScreen"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="/images/asset3d/backgrounds/",h="/images/asset3d/backgrounds/thumbnails/";a={fileEquals:function(a,b){return!!a&&!!b&&a.name===b.name&&a.size===b.size&&a.lastModified===b.lastModified},getBackgroundStyles:function(a,c){__p&&__p();if(!a)return null;a=b("Asset3DBackgroundMap")[a];a&&(b("isHDScreen")()?a=a[c].hd:a=a[c].normal);if(a)switch(c){case b("Asset3DBackgroundSize").STORY:a=g+a;return{backgroundImage:"url("+a+")",backgroundSize:"cover"};case b("Asset3DBackgroundSize").THUMBNAIL:a=h+a;return{backgroundImage:"url("+a+")",backgroundSize:"100%"}}return null},takeScreenshot:function(a){return b("dataUriToBlob")(a.toDataURL("image/png"))},saveScreenshot:function(a,c,d,e){c=b("ActorURI").create(b("XAsset3DUpdateFallbackImageController").getURIBuilder().setFBID("id",String(c)).getURI(),d);d=new FormData();d.append("fallback_image",a);e&&d.append("fallback_depth_image",e);new(b("AsyncRequest"))().setURI(c).setMethod("POST").setRawData(d).setErrorHandler(function(a){a&&a.errorDescription}).send()},getPanSpeed:function(a,b){var c=b.x,d=b.y;b=b.z;var e=a.x,f=a.y;a=a.z;c=Math.sqrt((c-e)*(c-e)+(d-f)*(d-f)+(b-a)*(b-a));return c},getCameraOrientation:function(a){__p&&__p();var b=a.target();b=b.position;a=a.model();a=a.position;a=a.clone().sub(b).normalize();b=a.x;var c=a.y;a=a.z;c=Math.asin(c);var d=Math.atan(b/a);if(b*a>0)if(b>0)return{yaw:d,pitch:c};else return{yaw:d+Math.PI,pitch:c};else if(b>0)return{yaw:d+Math.PI,pitch:c};else return{yaw:d,pitch:c}},polarCoordToCartesianCoord:function(a,b){var c=Math.cos(b)*Math.sin(a),d=Math.sin(b);b=Math.cos(b)*Math.cos(a);return{x:c,y:d,z:b}}};e.exports=a}),null);
__d("MentionSpan.react",["cx","React"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";return b("React").createElement("span",babelHelpers["extends"]({},this.props,{"data-offset-key":this.props.offsetKey,className:"_247o",spellCheck:!1}),this.props.children)};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("WeakMentionSpan.react",["cx","React"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";return b("React").createElement("span",{"data-offset-key":this.props.offsetKey,className:"_whq",spellCheck:!1},this.props.children)};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("getMentionsInputDecorator",["CompositeDraftDecorator","EmoticonSpan.react","HashtagSpan.react","MentionSpan.react","WeakMentionSpan.react","getEntityMatcher","getHashtagMatches"],(function(a,b,c,d,e,f){__p&&__p();var g;function a(){if(!g){var a=[{strategy:b("getEntityMatcher")(function(a){var b=a.getData();return a.getType()==="MENTION"&&b&&b.isWeak}),component:b("WeakMentionSpan.react")},{strategy:b("getEntityMatcher")(function(a){return a.getType()==="MENTION"}),component:b("MentionSpan.react")},{strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOTICON"}),component:b("EmoticonSpan.react")},{strategy:b("getHashtagMatches"),component:b("HashtagSpan.react")}];g=new(b("CompositeDraftDecorator"))(a)}return g}e.exports=a}),null);
__d("EmojiInputDecorator",["EmojiRenderer","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").List,h=".",i="emoji";function a(a,b,c){this.__installedDecorators={emojiDecorator:!0},this.$1=a,this.$2=b,this.$3=c,b&&Object.assign(this.__installedDecorators,b.__installedDecorators)}a.prototype.getDecorations=function(a,c){__p&&__p();var d=this.$2?this.$2.getDecorations(a,c).toArray():Array(a.getText().length).fill(null),e=0;b("EmojiRenderer").parse(a.getText()).forEach(function(a){__p&&__p();var b=a.offset;a=b+a.length;var c=!0;for(var f=b;f<a;f++)if(d[f]!=null){c=!1;break}if(c){for(var f=b;f<a;f++)d[f]=i+h+e;e++}});return g(d)};a.prototype.getComponentForKey=function(a){return!this.$2||a.split(h)[0]===i?this.$1:this.$2.getComponentForKey(a)};a.prototype.getPropsForKey=function(a){return!this.$2||a.split(h)[0]===i?this.$3:this.$2.getPropsForKey(a)};e.exports=a}),null);
__d("ComposerTargetData",[],(function(a,b,c,d,e,f){function a(a,b,c,d){"use strict";this.targetID=a,this.targetSupportsMultiplePhotos=b,this.viewerIsTarget=c,this.targetSupportsMultiMedia=d}e.exports=a}),null);
__d("TextDelightInputDecorator",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").List,h=".",i="delight";function a(a,b){this.__installedDecorators={textDelightsDecorator:!0},this.$2=a,this.$1=b,b&&Object.assign(this.__installedDecorators,b.__installedDecorators)}a.prototype.getDecorations=function(a,b){var c=this.$1?this.$1.getDecorations(a,b).toArray():Array(a.getText().length).fill(null),d=0,e=this.$2.strategy,f=function(a,b){j(c,a,b)&&(k(c,a,b,i+h+d),d++)};e(a,f,b);return g(c)};a.prototype.getComponentForKey=function(a){return!this.$1||a.split(h)[0]===i?this.$2.component:this.$1.getComponentForKey(a)};a.prototype.getPropsForKey=function(a){return!this.$1||a.split(h)[0]===i?this.$2.props:this.$1.getPropsForKey(a)};function j(a,b,c){for(var b=b;b<c;b++)if(a[b]!=null)return!1;return!0}function k(a,b,c,d){for(var b=b;b<c;b++)a[b]=d}e.exports=a}),null);
__d("TextDelightInComposerGating",["TextDelightConfig","TextDelightSurface","gkx"],(function(a,b,c,d,e,f){"use strict";var g=b("TextDelightConfig").composerOptions;a={checkGKForSurface:function(a){return a===b("TextDelightSurface").POST?b("gkx")("678313"):b("gkx")("678314")},isEnabled:function(a){return this.checkGKForSurface(a)&&g.enabled},isHighlightEnabled:function(a){return this.checkGKForSurface(a)&&g.enabled&&g.highlightEnabled},isBackspaceEnabled:function(a){return this.checkGKForSurface(a)&&g.enabled&&g.backspaceEnabled},isXbuttonEnabled:function(a){return this.checkGKForSurface(a)&&g.enabled&&g.xbuttonEnabled}};e.exports=a}),null);
__d("TextDelightInComposerLogger",["FunnelLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="TEXT_DELIGHTS_COMPOSER_FUNNEL",h="regex_matched",i="opt_out_tapped",j="opt_out_backspace",k="range_tapped";function l(a){var b=0;for(var c=0;c<a.length;c++)b=(b<<5)-b+a.charCodeAt(c),b&=b;return b}a={startFunnelInstance:function(a,c){a=l(a);if(b("FunnelLogger").getFunnelInstance(g,a))return;b("FunnelLogger").startFunnel(g,a);b("FunnelLogger").addFunnelTag(g,a,c)},_appendAction:function(a,c,d,e,f){this.startFunnelInstance(a,f),b("FunnelLogger").appendActionWithPayload(g,l(a),c,{campaign_id:d,keyword:e})},regexMatched:function(a,b,c,d){this._appendAction(a,h,b,c,d)},optOutTapped:function(a,b,c,d){this._appendAction(a,i,b,c,d)},optOutBackspace:function(a,b,c,d){this._appendAction(a,j,b,c,d)},rangeTapped:function(a,b,c,d){this._appendAction(a,k,b,c,d)},endFunnel:function(a){b("FunnelLogger").endFunnel(g,l(a))}};e.exports=a}),null);
__d("TextDelightSpan.react",["cx","Bootloader","React","SubscriptionsHandler","TextDelightInComposerGating","TextDelightInComposerLogger","createObjectFrom"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$2=!1,this.$3=new(b("SubscriptionsHandler"))(),this.$4=function(){var a=this.props.contentState.getEntity(this.props.entityKey).getData();b("TextDelightInComposerLogger").rangeTapped(a.funnelKey,a.campaignID,a.keyword,a.surface)}.bind(this),this.$5=function(){var a=this.props.contentState.mergeEntityData(this.props.entityKey,{disabled:!0});a=a.getEntity(this.props.entityKey).getData();b("TextDelightInComposerLogger").optOutTapped(a.funnelKey,a.campaignID,a.keyword,a.surface);this.props.onXOut&&this.props.onXOut(a);this.props.triggerChange&&this.props.triggerChange()}.bind(this),c}a.prototype.componentDidMount=function(){"use strict";__p&&__p();this.$2=!0;var a=this.props.contentState.getEntity(this.props.entityKey).getData();if(a.disabled)return;var c=a.campaignID;c&&b("Bootloader").loadModules(["TextDelightController"],function(b){if(this.$2===!1)return;this.$3.addSubscriptions(b.attachClickListener(this.$1,c,this.props.decoratedText,a.surface,this.$4))}.bind(this),"TextDelightSpan.react")};a.prototype.componentWillUnmount=function(){"use strict";this.$2=!1,this.$3.release()};a.prototype.render=function(){"use strict";__p&&__p();var a=this.props.contentState.getEntity(this.props.entityKey).getData();if(a.disabled)return this.props.children;var c=a.styles,d=Object.keys(c);d=b("createObjectFrom")(d.map(function(a){return a.replace(/-([a-z])/gi,function(a,b){return b.toUpperCase()})}),d.map(function(a){return c[a]}));a=b("TextDelightInComposerGating").isXbuttonEnabled(a.surface);var e=null;a&&(e=b("React").createElement("span",{role:"link",tabIndex:-1,className:"_6854",onClick:this.$5}));return b("React").createElement("span",babelHelpers["extends"]({},this.props,{style:d,"data-offset-key":this.props.offsetKey,className:"_3yzm",spellCheck:!1}),b("React").createElement("span",{className:"_2k9q",ref:function(a){this.$1=a}.bind(this)},this.props.children),e)};e.exports=a}),null);
__d("fileSliceName",["UserAgent_DEPRECATED"],(function(a,b,c,d,e,f){a="slice";(c=b("UserAgent_DEPRECATED").chrome())?c<21&&(a="webkitSlice"):(c=b("UserAgent_DEPRECATED").firefox())?c<13&&(a="mozSlice"):b("UserAgent_DEPRECATED").safari()||b("UserAgent_DEPRECATED").webkit()&&(a="webkitSlice");e.exports=a}),null);
__d("FileHasher",["WebWorker","emptyFunction","fileSliceName","FileHashWorkerResource"],(function(a,b,c,d,e,f){__p&&__p();a.isSupported=function(){"use strict";return b("WebWorker").isSupported()};function a(){"use strict";var a=b("FileHashWorkerResource");b("WebWorker").prepareResource(a);this.$1=new(b("WebWorker"))(a).setMessageHandler(function(a){this.$2(a)}.bind(this)).execute()}a.prototype.hash=function(a,c){"use strict";this.$2=c;this.$1.postMessage({file:a,fileSliceName:b("fileSliceName")});return this};a.prototype.destroy=function(){"use strict";this.$2=b("emptyFunction"),this.$1.terminate()};e.exports=a}),null);
__d("Collection",[],(function(a,b,c,d,e,f){__p&&__p();function g(a,b){if(!a.__collection__){var c=new Function();for(var d in a.prototype)c.prototype[d]=g._call.bind(null,d);a.__collection__=c}c=new a.__collection__();c._elements=b;return c}g._call=function(a){var b=Array.prototype.slice.call(arguments,1);this._elements.forEach(function(c){c[a].apply(c,b)});return this};e.exports=g}),null);
__d("Drag",["Arbiter","DOM","Event","Style","Vector"],(function(a,b,c,d,e,f){__p&&__p();var g={};g.currentDraggable=null;g.grab=function(a){g.currentDraggable&&g._onmouseup(),a.lastDragOver=null,g.attachDragEvents(),g.currentDraggable=a};g.attachDragEvents=function(){document.onselectstart=function(){document.onselectstart=null;return!1};if(g.dragEventsAttached)return;g.dragEventsAttached=!0;b("Arbiter").subscribe("scroller/scroll",g._onmousemove);b("Event").listen(document,{mousemove:g._onmousemove,mouseup:g._onmouseup})};g.droppables={};g.addDroppable=function(a,b){(g.droppables[a]=g.droppables[a]||[]).push(b)};g.removeDroppable=function(a,b){g.droppables[a]=g.droppables[a].filter(function(a){return a!=b})};g.getOffsetParent=function(a){if(b("DOM").isNodeOfType(a,["body","html"]))return document.body;while((a=a.parentNode)&&a!==document.body)if(b("Style").get(a,"position")!=="static")return a;return document.body};g._onmousemove=function(a,c){__p&&__p();if(!g.currentDraggable)return;c=c||b("Vector").getEventPosition(a);a=g.currentDraggable;var d=g.droppables[a.namespace];if(a.namespace&&a.active&&d){var e={};d.forEach(function(a){e[a.zIndex]=a.zIndex});var f=[];for(var h in e)f.push(e[h]);f.sort();var i=a.lastDragOver,j=null;for(var k=f.length-1;k>=0;k--)if(i&&i.dom!=null&&i.zIndex==f[k]&&i.isDraggedOver(c)){j=i;break}else{i&&i.ondragout&&i.ondragout(a);for(h=0;h<d.length;h++){if(f[k]!=d[h].zIndex)continue;if(i!=d[h]&&a.dom!=d[h].dom&&d[h].isDraggedOver(c)){j=d[h];k=-1;break}}}j&&j!=i&&(j.ondragover(a),g.currentDraggable.adjustCursorPosition());j&&j.ondragmove(a,c.sub(b("Vector").getElementPosition(j.dom)));a.lastDragOver=j}g.currentDraggable._onmousemove(c)};g._onmouseup=function(a){document.onselectstart=null,g.currentDraggable&&(g.currentDraggable._ondrop(),g.currentDraggable=null)};e.exports=g}),null);
__d("Scroller",["Arbiter","Event","Rect","Style","Vector","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this._onmousemove=function(a){this.cursor=b("Vector").getEventPosition(a)}.bind(this),this.canvas=a,this.scrollZone=50,this.velocity=100,this.coefficient=1}a.prototype.activate=function(){this.activate=b("emptyFunction"),this.event=b("Event").listen(document,"mousemove",this._onmousemove),this.interval=setInterval(this._intervalHandler.bind(this),50),this.cursor=null};a.prototype.deactivate=function(){delete this.activate,this.event&&this.event.remove(),this.event=null,clearInterval(this.interval)};a.prototype._intervalHandler=function(){__p&&__p();if(!this.cursor)return;var a=this.canvas==document.body?b("Rect").getViewportBounds():new(b("Rect"))(this.canvas);a=new(b("Rect"))(this.cursor.y-a.t,a.r-this.cursor.x,a.b-this.cursor.y,this.cursor.x-a.l);var c=new(b("Vector"))(0,0);a.t<a.b&&a.t<this.scrollZone?c.y=-this.scrollZone+a.t:a.b<this.scrollZone&&(c.y=this.scrollZone-a.b);c.y=this._doMath(c.y);a.l<a.r&&a.l<this.scrollZone?c.x=-this.scrollZone+a.l:a.r<this.scrollZone&&(c.x=this.scrollZone-a.r);c.x=this._doMath(c.x);if(c.x||c.y){c.scrollElementBy(this.canvas);if(document.body==this.canvas){a=b("Vector").getScrollPosition();c.scrollElementBy(this.canvas);var d=b("Vector").getScrollPosition();this.cursor=this.cursor.add(d.sub(a))}else c.scrollElementBy(this.canvas);b("Arbiter").inform("scroller/scroll",this.cursor)}};a.prototype._doMath=function(a){a=a>=0?Math.min(a,this.scrollZone):Math.max(a,-this.scrollZone);return Math.floor(Math.pow(a/this.scrollZone*this.velocity,this.coefficient))};a.findScrollParent=function(a){__p&&__p();var c;a=a.parentNode;while(a){if(a.scrollHeight!=a.offsetTop){c=b("Style").get(a,"overflowY");if(c=="scroll"||c=="auto")return a}a=a.parentNode}return document.body};e.exports=a}),null);
__d("Draggable",["Collection","DOM","Drag","Event","Rect","Scroller","Vector","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();function g(a){"use strict";__p&&__p();this._onclick=function(a){if(!this._shouldKillEvents)return!0;if(this.active)return b("Event").kill(a)}.bind(this);this._onmousedown=function(a){__p&&__p();if(!(a.which&&a.which===1||a.button&&a.button===1))return;var c=a.getTarget();if(b("DOM").isNodeOfType(c,["input","select","textarea","object","embed"]))return!0;c=b("Vector").getEventPosition(a);var d=b("Vector").getElementDimensions(this.dom);this.draggableInitialVector=b("Vector").getElementPosition(this.dom);this.cursorPositionVector=c.sub(this.draggableInitialVector);this.grabPctX=d.x===0?0:this.cursorPositionVector.x/d.x;this.grabPctY=d.y===0?0:this.cursorPositionVector.y/d.y;b("Drag").grab(this,a);this.gutter?this.cursorInitialVector=c:(this._setActive(!0),this._ongrab(c));return!this._shouldKillEvents?!0:b("Event").kill(a)}.bind(this);this._killUnlessActive=function(a){if(!this._shouldKillEvents)return;if(a.getTarget()!==document.activeElement)return a.kill()}.bind(this);if(!a)throw new Error("Element should be a DOM node");if(!(this instanceof g))if(a instanceof Array){var c=[];a.forEach(function(a){c.push(new g(a))});return new(b("Collection"))(g,c)}else return new g(a);else this.data={},this.handles=[],this.dom=a,this.boundingBox=null,this.useScroller=!0,this.scrollParents=null,this.manualPositioner=null,this.grabPctX=this.grabPctY=0,this._shouldKillEvents=!0,this._setInactiveTimeout=null,this.addHandle(this.dom)}g.prototype.destroy=function(){"use strict";this.handles.forEach(function(a){return this.removeHandle(a.obj)}.bind(this)),this.data=this.dom=null};g.prototype.adjustCursorPosition=function(){"use strict";var a=b("Vector").getElementDimensions(this.dom);this.cursorPositionVector=new(b("Vector"))(parseInt(this.grabPctX*a.x,10),parseInt(this.grabPctY*a.y,10))};g.prototype._ongrab=function(a){"use strict";__p&&__p();this.ongrab(a);this.useScroller&&(this.scrollers||(this.scrollers=this.scrollParents?this.scrollParents.map(function(a){return new(b("Scroller"))(a)}):[new(b("Scroller"))(b("Scroller").findScrollParent(this.dom))]),this.scrollers.forEach(function(a){return a.activate()}));if(this.active){this.oldPosition||(this.oldPosition=this.dom.style.position);this.oldTop||(this.oldTop=this.dom.style.top);var c=b("Drag").getOffsetParent(this.dom);c!==document.body&&(a=a.sub(b("Vector").getElementPosition(c)));this.dom.style.position=this.absolute?"absolute":"relative";a.sub(this.cursorPositionVector).setElementPosition(this.dom)}};g.prototype._onmousemove=function(a){"use strict";__p&&__p();this.active||a.distanceTo(this.cursorInitialVector)>=this.gutter&&(this._setActive(!0),this._ongrab(a));if(this.active){var c=a.sub(this.cursorPositionVector);if(this.boundingBox){var d=b("Rect").newFromVectors(c,b("Vector").getElementDimensions(this.dom));d=d.boundWithin(this.boundingBox);c=d.getPositionVector();this.boundingBox.w()===0&&this.boundingBox.h()===0?d=new(b("Vector"))(this.draggableInitialVector.x,this.draggableInitialVector.y,"document"):this.boundingBox.w()===0?d=new(b("Vector"))(this.draggableInitialVector.x,c.y,"document"):this.boundingBox.h()===0?d=new(b("Vector"))(c.x,this.draggableInitialVector.y,"document"):d=c}else d=c;c=b("Drag").getOffsetParent(this.dom);c!==document.body&&(d=d.sub(b("Vector").getElementPosition(c)));this.manualPositioner?this.manualPositioner.updateMousePosition(d):d.setElementPosition(this.dom);this.ondrag(a)}};g.prototype._ondrop=function(){"use strict";this.scrollers&&this.scrollers.forEach(function(a){return a.deactivate()}),this.active&&(this._setInactiveTimeout=setTimeout(function(){this._setInactiveTimeout=null,this._setActive(!1)}.bind(this),0),this.ondrop(this.scrollers&&this.scrollers[0].cursor),this.lastDragOver&&this.lastDragOver.ondrop(this))};g.prototype.killDrag=function(){"use strict";this._setActive(!1),b("Drag")._onmouseup()};g.prototype.forceDrop=function(){"use strict";b("Drag")._onmouseup()};g.prototype.triggerMouseDown=function(a){"use strict";this._onmousedown(a)};g.prototype.setBoundingBox=function(a){"use strict";this.boundingBox=a;return this};g.prototype.resetPosition=function(){var a;this.dom.style.position=this.oldPosition;this.oldPosition=null;this.dom.style.left="";this.dom.style.top=(a=this.oldTop)!=null?a:"";this.oldTop=null;return this};g.prototype.setUseAbsolute=function(a){"use strict";this.absolute=a;return this};g.prototype.setDragHandler=function(a){"use strict";this.ondrag=a;return this};g.prototype.setGrabHandler=function(a){"use strict";this.ongrab=a;return this};g.prototype.setDropHandler=function(a){"use strict";this.ondrop=a;return this};g.prototype.setGutter=function(a){"use strict";this.gutter=a;return this};g.prototype.setNamespace=function(a){"use strict";this.namespace=a;return this};g.prototype.setUseScroller=function(a){"use strict";this.useScroller=a;return this};g.prototype.setScrollParents=function(a){"use strict";this.scrollParents=a;return this};g.prototype.setAvoidKillingEvents=function(a){"use strict";this._shouldKillEvents=!a;return this};g.prototype.setManualPositioner=function(a){"use strict";this.manualPositioner=a;return this};g.prototype.addHandle=function(a){"use strict";this.handles.length==1&&this.handles[0].obj==this.dom&&this.removeHandle(this.dom);this.handles.push({obj:a,evt:[b("Event").listen(a,"mousedown",this._onmousedown),b("Event").listen(a,"click",this._onclick),b("Event").listen(a,"drag",this._killUnlessActive),b("Event").listen(a,"selectstart",this._killUnlessActive)]});return this};g.prototype.removeHandle=function(a){"use strict";this.handles=this.handles.filter(function(b){if(b.obj!=a)return!0;else{b.evt.forEach(function(a){a.remove()});return!1}})};g.prototype.getDOM=function(){"use strict";return this.dom};g.prototype.setKey=function(a,b){"use strict";this.data[a]=b;return this};g.prototype.getKey=function(a){"use strict";return this.data[a]};g.prototype._setActive=function(a){"use strict";if(!this.dom)return;a&&this._setInactiveTimeout!=null&&clearTimeout(this._setInactiveTimeout);this.dom.activeDrag=this.active=a;for(var b=0;b<this.handles.length;b++)this.handles[b].obj.activeDrag=a};g.prototype.ondrag=b("emptyFunction");g.prototype.ongrab=b("emptyFunction");g.prototype.ondrop=b("emptyFunction");g.prototype.gutter=0;g.prototype.handles=null;e.exports=g}),null);
__d("InstantGamesFeedTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.$1={}}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:InstantGamesFeedLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:InstantGamesFeedLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:InstantGamesFeedLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppID=function(a){this.$1.appid=a;return this};a.prototype.setAppversion=function(a){this.$1.appversion=a;return this};a.prototype.setClientUserID=function(a){this.$1.client_userid=a;return this};a.prototype.setClienttime=function(a){this.$1.clienttime=a;return this};a.prototype.setContentID=function(a){this.$1.content_id=a;return this};a.prototype.setCountry=function(a){this.$1.country=a;return this};a.prototype.setDeviceid=function(a){this.$1.deviceid=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setGameID=function(a){this.$1.game_id=a;return this};a.prototype.setGameSessionID=function(a){this.$1.game_session_id=a;return this};a.prototype.setGroupID=function(a){this.$1.group_id=a;return this};a.prototype.setGroupSize=function(a){this.$1.group_size=a;return this};a.prototype.setIsemployee=function(a){this.$1.isemployee=a;return this};a.prototype.setName=function(a){this.$1.name=a;return this};a.prototype.setPostID=function(a){this.$1.post_id=a;return this};a.prototype.setPostPrivacyID=function(a){this.$1.post_privacy_id=a;return this};a.prototype.setPosterID=function(a){this.$1.poster_id=a;return this};a.prototype.setRenderFailureReason=function(a){this.$1.render_failure_reason=a;return this};a.prototype.setSessionid=function(a){this.$1.sessionid=a;return this};a.prototype.setShareSurface=function(a){this.$1.share_surface=a;return this};a.prototype.setStoryInvalidationReason=function(a){this.$1.story_invalidation_reason=a;return this};a.prototype.setStoryTokenString=function(a){this.$1.story_token_string=a;return this};a.prototype.setTime=function(a){this.$1.time=a;return this};a.prototype.setTournamentID=function(a){this.$1.tournament_id=a;return this};a.prototype.setUISurface=function(a){this.$1.ui_surface=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setWeight=function(a){this.$1.weight=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={appid:!0,appversion:!0,client_userid:!0,clienttime:!0,content_id:!0,country:!0,deviceid:!0,event:!0,game_id:!0,game_session_id:!0,group_id:!0,group_size:!0,isemployee:!0,name:!0,post_id:!0,post_privacy_id:!0,poster_id:!0,render_failure_reason:!0,sessionid:!0,share_surface:!0,story_invalidation_reason:!0,story_token_string:!0,time:!0,tournament_id:!0,ui_surface:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("DurationFormatter",["fbt"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=60,i=3600;a={formatShort:function(a){__p&&__p();var b=Math.floor(a/i);a-=b*i;var c=Math.floor(a/h);a-=c*h;a=a%60;var d=b?b.toString()+":":"";d+=!b||c>=10?c.toString():"0"+c;d+=":";d+=a>=10?a.toString():"0"+a;return d},formatTime:function(a){if(a>=i)return this._formatHours(a);else if(a>=h)return this._formatMinutes(a);else return this._formatSeconds(a)},formatTimeWithMinuteGranularity:function(a){if(a>=i)return this._formatHours(a);else return this._formatMinutesWithoutSeconds(a)},_formatHours:function(a){var b=Math.floor(a/i);a=a-b*i;a=Math.floor(a/h);if(a>0)return g._({"*":{"*":"{hours} hours and {minute} minutes","_1":"{hours} hours and 1 minute"},"_1":{"*":"1 hour and {minute} minutes","_1":"1 hour and 1 minute"}},[g._plural(b,"hours"),g._plural(a,"minute")]);else return g._({"*":"{number} hours","_1":"1 hour"},[g._plural(b,"number")])},_formatMinutes:function(a){var b=Math.floor(a/h),c=Math.floor(a-b*h);if(c>0)return g._({"*":{"*":"{minutes} minutes and {seconds} seconds","_1":"{minutes} minutes and 1 second"},"_1":{"*":"1 minute and {seconds} seconds","_1":"1 minute and 1 second"}},[g._plural(b,"minutes"),g._plural(c,"seconds")]);else return this._formatMinutesWithoutSeconds(a)},_formatMinutesWithoutSeconds:function(a){a=Math.floor(a/h);return g._({"*":"{number} minutes","_1":"1 minute"},[g._plural(a,"number")])},_formatSeconds:function(a){a=Math.floor(a);return g._({"*":"{number} seconds","_1":"1 second"},[g._plural(a,"number")])}};e.exports=a}),null);
__d("ErrorDialog",["Dialog","emptyFunction"],(function(a,b,c,d,e,f){var g={showAsyncError:function(a){try{return g.show(a.getErrorSummary(),a.getErrorDescription())}catch(b){alert(a)}},show:function(a,c,d,e){return new(b("Dialog"))().setTitle(a).setBody(c).setButtons([b("Dialog").OK]).setStackable(!0).setModal(!0).setHandler(d||b("emptyFunction")).setButtonsMessage(e||"").show()}};e.exports=g}),null);
__d("fileSlice",["fileSliceName"],(function(a,b,c,d,e,f){c=a.File&&a.File.prototype[b("fileSliceName")];c||(c=a.Blob&&a.Blob.prototype[b("fileSliceName")]);e.exports=c}),null);
__d("LeftFillRightFitLayout.react",["invariant","Layout.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("Layout.react").Column,j=b("Layout.react").FillColumn;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.$1=function(){var a=[],c=this.props.children;c&&c.length===2||g(0,1534);b("React").Children.forEach(this.props.children,function(b){return a.push(b)},this);return{firstChild:a[0],secondChild:a[1]}};a.prototype.render=function(){var a=this.$1();return b("React").createElement(b("Layout.react"),{className:this.props.className,style:this.props.style},b("React").createElement(j,{className:this.props.fillColumnClassName},a.firstChild),b("React").createElement(i,{className:this.props.fitColumnClassName},a.secondChild))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("ReactPagesComposerGlobalFlags",[],(function(a,b,c,d,e,f){"use strict";a={_isPagesComposer:!1,_isObjectiveFirstPagesComposer:!1,setIsPagesComposer:function(a){this._isPagesComposer=a},setIsObjectiveFirstPagesComposer:function(a){this._isObjectiveFirstPagesComposer=a,this._isPagesComposer=this._isObjectiveFirstPagesComposer},getIsPagesComposer:function(){return this._isPagesComposer},getIsObjectiveFirstPagesComposer:function(){return this._isObjectiveFirstPagesComposer}};e.exports=a}),null);
__d("PagesComposerGraphMLGate",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};a={register:function(a,b){g[a]=b},getInstance:function(a){return!a?null:g[a]},shouldUseGraphMLForAdminStatus:function(a){a=this.getInstance(a);return a?a.useMLForAdminStatusCreation:!1},shouldUseGraphMLForVisitorStatus:function(a){a=this.getInstance(a);return a?a.useMLForVisitorStatusCreation:!1},shouldUseGraphMLForFeedTargetingFeature:function(a){a=this.getInstance(a);return a?a.useMLForFeedTargetingFeature:!1},shouldUseGraphMLForMediaPostCreation:function(a){a=this.getInstance(a);return a?a.useMLForMediaPostCreation:!1},shouldUseGraphMLForPageCTAPostCreation:function(a){a=this.getInstance(a);return a?a.useMLForPageCTAPostCreation:!1},shouldUseGraphMLForBoostedPostFeature:function(a){a=this.getInstance(a);return a?a.useMLForBoostedPostConfig:!1}};e.exports=a}),null);
__d("PagesComposerActionsTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({BACKDATE:null,SET_DRAFT:null,SCHEDULE:null,SET_ADS_POST:null,SET_BOOSTED_POST:null,SHOW_OFFER_UPSELL:null,ABANDON_OFFER_UPSELL:null,INSTAGRAM_CROSS_POSTING:null,SET_IS_REVIEWABLE_BRANDED_CONTENT:null,CLEAR_COMPOSER_DATA:null,PUBLISH_NOW:null,DID_SHOW_POST_CONFIRMATION:null,SET_CURRENT_LOCALE:null,SET_INTERCEPTION_CONFIG:null,SET_COMPOSER_TYPE:null,SET_PAGES_COMPOSER_CONFIG:null,SET_PAGES_COMPOSER_CONTEXT_CONFIG:null,SET_IS_ON_STORY_ENTRY_FOCUS:null});e.exports=a}),null);
__d("PagesHeaderDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationReactDispatcher"))({strict:!0})}),null);
__d("PagesHeaderPayloadType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACTIONS_UNIT_DATA:"actions_unit_data",COVER_PHOTO_CANCEL:"cover_photo_cancel",COVER_PHOTO_DATA:"cover_photo_data",COVER_VIDEO_DATA:"cover_video_data",COVER_VIDEO_UPLOAD_START:"cover_video_upload_start",COVER_VIDEO_UPLOAD_PROGRESSING:"cover_video_upload_progressing",COVER_VIDEO_UPLOAD_DONE:"cover_video_upload_done",COVER_VIDEO_ENCODE_PROGRESSING:"cover_video_encode_progressing",COVER_VIDEO_ENCODE_DONE:"cover_video_encode_done",COVER_VIDEO_PREVIEW:"cover_video_preview",COVER_VIDEO_PUBLISHING:"cover_video_publishing",COVER_VIDEO_PUBLISHED:"cover_video_published",COVER_VIDEO_CANCELLED:"cover_video_cancelled",PROFILE_PICTURE_DATA:"profile_picture_data",PROFILE_PICTURE_STORY_UPLOADING:"profile_picture_story_uploading",PROFILE_PICTURE_UPDATE:"profile_picture_update",UPDATE_VIDEO_PAGE_THEME_COLOR:"update_video_page_theme_color"})}),null);
__d("PagesProfilePictureActions",["PagesHeaderDispatcher","PagesHeaderPayloadType","immutable"],(function(a,b,c,d,e,f){"use strict";function a(){b("PagesHeaderDispatcher").dispatch({data:{loading:!0},type:b("PagesHeaderPayloadType").PROFILE_PICTURE_UPDATE})}function c(a){b("PagesHeaderDispatcher").dispatch({data:{profilePicStoryData:b("immutable").fromJS({storyCreationStatus:a})},type:b("PagesHeaderPayloadType").PROFILE_PICTURE_STORY_UPLOADING})}e.exports={updateProfilePicture:a,updateProfilePictureStory:c}}),null);
__d("PagesStoryCreationStatusTypes",["keyMirrorRecursive"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirrorRecursive")({STORY_CREATION_STARTED:"",STORY_CREATION_SUCCESS:"",STORY_CREATION_FAILURE:""},"PagesStoryCreationStatus");e.exports=a}),null);
__d("PhotosUploadWaterfallMixin",["PhotosUploadWaterfall","emptyFunction"],(function(a,b,c,d,e,f){a=b("emptyFunction");c={getUploaderApp:a,getWaterfallID:a,getAdditionalData:function(){return{}},logWaterfallStep:function(a,c,d){b("PhotosUploadWaterfall").sendSignal(babelHelpers["extends"]({qn:this.getWaterfallID(),uploader:this.getUploaderApp(),step:a,ref:this.getWaterfallSource&&this.getWaterfallSource()},this.getAdditionalData(),c),d)},logWaterfallStepUsingBanzai:function(a,c,d){b("PhotosUploadWaterfall").sendBanzai(babelHelpers["extends"]({qn:this.getWaterfallID(),uploader:this.getUploaderApp(),step:a,ref:this.getWaterfallSource&&this.getWaterfallSource()},this.getAdditionalData(),c),d)}};e.exports=c}),null);
__d("PhotoSourceTypes",["keyMirror"],(function(a,b,c,d,e,f){e.exports=b("keyMirror")({COMPUTER:null,POSTED_PHOTOS:null,SYNCED_PHOTOS:null,SUGGESTIONS:null,PAGES_POSTED_PHOTOS:null})}),null);
__d("BaseSelectionContainer",[],(function(a,b,c,d,e,f){__p&&__p();var g=0;function a(){"use strict";this.$1=(g++).toString()}a.prototype.getSelectionContainerID=function(){"use strict";return this.$1};a.prototype.getSource=function(){"use strict";throw new Error("This must be implemented by the child class")};a.prototype.getName=function(){"use strict";return null};a.prototype.getSize=function(){"use strict";return null};a.prototype.hasPlaceholderUI=function(){"use strict";throw new Error("This must be implemented by the child class")};e.exports=a}),null);
__d("SelectionSource",["PhotoSourceTypes"],(function(a,b,c,d,e,f){var g={FILE:"file",FLASH:"flash",VAULT:"vault",SUGGESTIONS:"suggestions",POSTED_PHOTOS:"posted_photos",PAGES_POSTED_PHOTOS:"pages_posted_photos",toPhotoSourceType:function(a){switch(a){case g.FILE:case g.FLASH:return b("PhotoSourceTypes").COMPUTER;case g.VAULT:return b("PhotoSourceTypes").SYNCED_PHOTOS;case g.SUGGESTIONS:return b("PhotoSourceTypes").SUGGESTIONS;case g.POSTED_PHOTOS:return b("PhotoSourceTypes").POSTED_PHOTOS;case g.PAGES_POSTED_PHOTOS:return b("PhotoSourceTypes").PAGES_POSTED_PHOTOS;default:throw new Error("No mapping for SelectionSource: "+a)}}};e.exports=g}),null);
__d("FileSelectionContainer",["BaseSelectionContainer","SelectionSource"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("BaseSelectionContainer"));g=c&&c.prototype;function a(a){"use strict";g.constructor.call(this),this.$FileSelectionContainer1=a}a.prototype.getFile=function(){"use strict";return this.$FileSelectionContainer1};a.prototype.getSource=function(){"use strict";return b("SelectionSource").FILE};a.prototype.getName=function(){"use strict";return this.$FileSelectionContainer1.fileName||this.$FileSelectionContainer1.name};a.prototype.getSize=function(){"use strict";return this.$FileSelectionContainer1.fileSize||this.$FileSelectionContainer1.size};a.prototype.hasPlaceholderUI=function(){"use strict";return!1};e.exports=a}),null);
__d("FilePickerEvent",[],(function(a,b,c,d,e,f){e.exports={BEGIN:"FilePickerEvent/BEGIN",SELECT_START:"FilePickerEvent/SELECT_START",SELECTED:"FilePickerEvent/SELECTED_FILES",ALBUM_LIMIT_EXCEEDED:"FilePickerEvent/ALBUM_LIMIT_EXCEEDED",SESSION_LIMIT_EXCEEDED:"FilePickerEvent/SESSION_LIMIT_EXCEEDED",SELECT_CANCELED:"FilePickerEvent/SELECT_CANCELED",FALLBACK:"FilePickerEvent/FALLBACK"}}),null);
__d("PUWApplications",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({WEB_SIMPLE:"web_simple",WEB_FLASH:"web_flash",WEB_HTML5:"web_html5",WEB_COMPOSER:"web_composer",WEB_ARCHIVE:"web_archive",WEB_MESSENGER:"web_messenger",WEB_OMNIPICKER:"web_omnipicker",WEB_MUSE_OMNIPICKER:"web_muse_omnipicker",WEB_SAY_THANKS:"web_say_thanks",WEB_GOODWILL_CAMPAIGN_OMNIPICKER:"web_goodwill_campaign_omnipicker",WEB_PRODUCT_PHOTO_OMNIPICKER:"web_product_photo_omnipicker",WEB_PAGES_MESSENGER:"web_pages_messenger",WEB_M_ZERO:"web_m_zero",WEB_M_BASIC:"web_m_basic",WEB_M_TOUCH:"web_m_touch",WEB_REACT_COMPOSER:"web_react_composer",MOBILE_FB4IOS:"mobile_fb4ios",MOBILE_FB4IOS_SNAP:"mobile_fb4ios_snap",MOBILE_FB4A:"mobile_fb4a",MOBILE_PMA_ANDROID:"mobile_pma_android",MOBILE_PMA_IOS:"mobile_pma_ios",THIRD_PARTY:"third_party"})}),null);
__d("PUWSteps",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CLIENT_FLOW_BEGIN:"client_flow_begin",CLIENT_SELECT_BEGIN:"client_select_begin",CLIENT_SELECT_SUCCESS:"client_select_success",CLIENT_SELECT_CANCEL:"client_select_cancel",CLIENT_SELECT_FAIL:"client_select_fail",CLIENT_FLOW_POST:"client_flow_post",CLIENT_TRANSFER_BATCH_BEGIN:"client_transfer_batch_begin",CLIENT_UPLOAD_BEGIN:"client_upload_begin",CLIENT_ATTACH_PHOTO:"client_attach_photo",CLIENT_PROCESS_BEGIN:"client_process_begin",CLIENT_PROCESS_SUCCESS:"client_process_success",CLIENT_PROCESS_CANCEL:"client_process_cancel",CLIENT_PROCESS_SKIP:"client_process_skip",CLIENT_PROCESS_FAIL:"client_process_fail",CLIENT_PROCESS_UNAVAILABLE:"client_process_unavailable",CLIENT_SPHERICAL_CHECK_SUCCESS:"client_spherical_check_success",CLIENT_SPHERICAL_CHECK_FAIL:"client_spherical_check_fail",CLIENT_TRANSFER_ENQUEUE:"client_transfer_enqueue",CLIENT_TRANSFER_BEGIN:"client_transfer_begin",CLIENT_TRANSFER_SUCCESS:"client_transfer_success",CLIENT_TRANSFER_CANCEL:"client_transfer_cancel",CLIENT_TRANSFER_FAIL:"client_transfer_fail",CLIENT_TRANSFER_MANUAL_RETRY:"client_transfer_manual_retry",CLIENT_UPLOAD_SUCCESS:"client_upload_success",CLIENT_UPLOAD_FAIL:"client_upload_fail",CLIENT_UPLOAD_CANCEL:"client_upload_cancel",CLIENT_UPLOAD_REMOVE:"client_upload_remove",CLIENT_FACEREC_BEGIN:"client_facerec_begin",CLIENT_FACEREC_SUCCESS:"client_facerec_success",CLIENT_FACEREC_FAIL:"client_facerec_fail",CLIENT_PHOTO_PREVIEW_OPEN:"client_photo_preview_open",CLIENT_PHOTO_PREVIEW_CLOSE:"client_photo_preview_close",CLIENT_TRANSFER_BATCH_SUCCESS:"client_transfer_batch_success",CLIENT_TRANSFER_BATCH_CANCEL:"client_transfer_batch_cancel",CLIENT_TRANSFER_BATCH_FAIL:"client_transfer_batch_fail",CLIENT_PUBLISH_ENQUEUE:"client_publish_enqueue",CLIENT_PUBLISH_BEGIN:"client_publish_begin",CLIENT_PUBLISH_SUCCESS:"client_publish_success",CLIENT_PUBLISH_FAIL:"client_publish_fail",CLIENT_ATTEMPT_FAIL:"client_attempt_fail",CLIENT_FLOW_SUCCESS:"client_flow_success",CLIENT_FLOW_FATAL:"client_flow_fatal",CLIENT_FLOW_GIVEUP:"client_flow_giveup",CLIENT_FLOW_CANCEL:"client_flow_cancel",CLIENT_FLOW_FAIL:"client_flow_fail",CLIENT_FLOW_INCOMPLETE:"client_flow_incomplete",CLIENT_ATTEMPT_INCOMPLETE:"client_attempt_incomplete",CLIENT_FLOW_RETRY:"client_flow_retry",CLIENT_ATTEMPT_RETRY:"client_attempt_retry",CLIENT_DIAGNOSTIC:"client_diagnostic",CLIENT_QUALITY_SWITCH:"client_quality_switch",CLIENT_CANCEL_SURVEY:"client_cancel_survey",CLIENT_PHOTO_EDIT_BEGIN:"client_photo_edit_begin",CLIENT_PHOTO_EDIT_SUCCESS:"client_photo_edit_success",SERVER_UPLOAD_BEGIN:"server_upload_begin",SERVER_UPLOAD_SUCCESS:"server_upload_success",SERVER_UPLOAD_FAIL:"server_upload_fail",SERVER_PUBLISH_BEGIN:"server_publish_begin",SERVER_PUBLISH_SUCCESS:"server_publish_success",SERVER_PUBLISH_FAIL:"server_publish_fail",SERVER_RECEIVER_BEGIN:"server_receiver_begin",SERVER_RECEIVER_PUBLISH_BEGIN:"server_receiver_publish_begin",SERVER_SENTRY_RESTRICTION:"server_sentry_restriction"})}),null);
__d("PhotosUploadWaterfallXMixin",["invariant","AsyncSignal","Banzai","PhotosUploadWaterfallXConfig","randomInt"],(function(a,b,c,d,e,f,g){__p&&__p();var h=new Map();function i(a,c){var d={};a.client_time=Math.round(Date.now()/1e3);b("PhotosUploadWaterfallXConfig").retryBanzai&&(d.retry=!0,a.nonce=b("randomInt")(4294967296));b("Banzai").post(b("PhotosUploadWaterfallXConfig").banzaiRoute,a,d);c&&setTimeout(c,0)}function j(a,c){if(b("PhotosUploadWaterfallXConfig").useBanzai)i(a,c);else{a=new(b("AsyncSignal"))(b("PhotosUploadWaterfallXConfig").loggingEndpoint,{data:JSON.stringify(a)}).setHandler(c);b("PhotosUploadWaterfallXConfig").timeout&&a.setTimeout(10*1e3);a.send()}}e.exports={logStep:function(a,b,c){var d=this.getWaterfallID&&this.getWaterfallID(),e=this.getWaterfallAppName&&this.getWaterfallAppName();if(!d||!e)return;j(babelHelpers["extends"]({step:a,qn:d,uploader:e,ref:this.getWaterfallSource&&this.getWaterfallSource()},b),c)},logPUWStep:function(a,b,c,d,e,f,g){if(f&&f.logOncePerSession){h.has(b)||h.set(b,new Set());if(h.get(b).has(a))return;h.get(b).add(a)}j(Object.assign({step:a,qn:b,uploader:c,ref:d},e),g)}}}),null);
__d("HTML5FilePicker",["cx","ArbiterMixin","BrowserSupport","CSS","DOM","FilePickerEvent","FileSelectionContainer","Keys","Parent","PhotosUploadID","PhotosUploadWaterfall","PhotosUploadWaterfallMixin","PhotosUploadWaterfallXMixin","PUWApplications","PUWSteps","getOrCreateDOMID"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a,c){__p&&__p();this._config=babelHelpers["extends"]({accept:void 0,multiple:void 0},c);this._button=a;this._beginInformed=!1;if(!b("BrowserSupport").hasFileAPI()){this.logStep(b("PUWSteps").CLIENT_PROCESS_UNAVAILABLE,{error:"no_file_api"});if(Object.prototype.hasOwnProperty.call(this._config,"fallbackFunction")){this._config.fallbackFunction.call(this);return}return}this._subscriptions=[];c=this._config.input||b("DOM").create("input",{type:"file",className:"_n"});Object.prototype.hasOwnProperty.call(this._config,"accept")&&(c.accept=this._config.accept);Object.prototype.hasOwnProperty.call(this._config,"multiple")&&(c.multiple=this._config.multiple);Object.prototype.hasOwnProperty.call(this._config,"title")&&(c.title=this._config.title);a=b("DOM").create("label",{className:"accessible_elem","for":b("getOrCreateDOMID")(c)},c.title);a=b("DOM").create("div",{className:"_3jk"},[a,c]);b("CSS").addClass(this._button,"_m");b("DOM").appendContent(this._button,a);this._button.setAttribute("rel","ignore");this._bindInput(c);this._button.onkeydown=function(a){a.keyCode===b("Keys").RETURN&&(this._input.click(),a&&a.stopPropagation&&a.stopPropagation())}.bind(this);a=b("Parent").byClass(this._button,"addPhotosDisabled");a&&(b("CSS").removeClass(a,"addPhotosDisabled"),b("CSS").addClass(a,"addPhotosEnabled"))}Object.assign(a.prototype,b("ArbiterMixin"),b("PhotosUploadWaterfallMixin"),b("PhotosUploadWaterfallXMixin"),{getUploaderApp:function(){return b("PhotosUploadWaterfall").APP_HTML5},getWaterfallID:function(){return this._config.qn},getWaterfallAppName:function(){return b("PUWApplications").WEB_HTML5},getWaterfallSource:function(){return this._config.ref},getSwfID:function(){return null},_constructFileList:function(){var a=Array.from(this._input.files);a.forEach(function(a){a.uploadID=b("PhotosUploadID").getNewID()});return a},_constructFileSelectionContainerList:function(){var a=Array.from(this._input.files);return a.map(function(a){return new(b("FileSelectionContainer"))(a)})},cleanup:function(){this._input&&(this._input.onclick=null,this._input.onchange=null),this._button&&(this._button.onkeydown=null)},_bindInput:function(a){this.cleanup(),a.onclick=function(){this.logWaterfallStep(b("PhotosUploadWaterfall").SELECT_START),this._beginInformed||(this._beginInformed=!0,this.inform(b("FilePickerEvent").BEGIN||"FilePickerEvent/BEGIN")),this.inform(b("FilePickerEvent").SELECT_START)}.bind(this),a.onchange=function(){this.inform(b("FilePickerEvent").SELECTED,{sender:this,files:this._constructFileList(),selections:this._constructFileSelectionContainerList()}),this._bindInput(this._input.cloneNode(!1))}.bind(this),this._input&&b("DOM").replace(this._input,a),this._input=a}});e.exports=a}),null);
__d("ReactComposerAttachmentActions",["ReactComposerAttachmentActionType","ReactComposerAttachmentStore","ReactComposerDispatcher"],(function(a,b,c,d,e,f){__p&&__p();a.prototype.registerAttachment=function(a,c){"use strict";a=babelHelpers["extends"]({composerID:a,type:b("ReactComposerAttachmentActionType").REGISTER_ATTACHMENT},c);b("ReactComposerDispatcher").dispatch(a)};a.prototype.initializeAttachment=function(a,c){"use strict";a={composerID:a,type:b("ReactComposerAttachmentActionType").INITIALIZE_ATTACHMENT,id:c};b("ReactComposerDispatcher").dispatch(a)};a.prototype.selectAttachmentLoggingOnlyDoNotUse=function(a,c,d,e){"use strict";a={composerID:a,type:b("ReactComposerAttachmentActionType").SELECT_ATTACHMENT_LOGGING_ONLY_DO_NOT_USE,featureType:c,source:d,sproutSurface:e};b("ReactComposerDispatcher").dispatch(a)};a.prototype.selectAttachment=function(a,c,d,e,f,g,h){d===void 0&&(d=!1);var i=b("ReactComposerAttachmentStore").getSelectedAttachmentID(a);if(!i)return;a={composerID:a,type:b("ReactComposerAttachmentActionType").SELECT_ATTACHMENT,id:c,activate:d,loggingName:e,uiElementName:e,source:h,currentAttachmentID:i,proxiedAttachmentID:g,sproutSurface:f};b("ReactComposerDispatcher").dispatch(a)};a.prototype.setInitialized=function(a,c){"use strict";a={composerID:a,type:b("ReactComposerAttachmentActionType").SET_INITIALIZED,id:c};b("ReactComposerDispatcher").dispatch(a)};a.prototype.setBootloaded=function(a,c,d,e){"use strict";a={composerID:a,type:b("ReactComposerAttachmentActionType").SET_BOOTLOADED,id:c,attachmentModule:d,postButtonModule:e};b("ReactComposerDispatcher").dispatch(a)};a.prototype.setBootstrapped=function(a,c){"use strict";a={composerID:a,type:b("ReactComposerAttachmentActionType").SET_BOOTSTRAPPED,id:c};b("ReactComposerDispatcher").dispatch(a)};a.prototype.setAttachmentMarkup=function(a,c){"use strict";a={composerID:a,type:b("ReactComposerAttachmentActionType").SET_ATTACHMENT_MARKUP,config:c};b("ReactComposerDispatcher").dispatch(a)};a.prototype.changeUploadStatus=function(a,c){"use strict";a={composerID:a,type:b("ReactComposerAttachmentActionType").UPLOAD_ATTACHMENT,uploading:c};b("ReactComposerDispatcher").dispatch(a)};function a(){"use strict"}e.exports=new a()}),null);
__d("ReactComposerAttachmentSelectorContainer.react",["Arbiter","FluxContainer","React","ReactComposerAttachmentActions","ReactComposerAttachmentSelector.react","ReactComposerAttachmentStore","ReactComposerEvents","ReactComposerPostToGroupStore","ReactComposerStore","emptyFunction","ifRequired","ReactComposerContextTypes"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("React").PureComponent);g=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.$1=function(){__p&&__p();if(this.props.disableSelectAttachment)return;if(this.state.selected){b("ReactComposerAttachmentActions").selectAttachmentLoggingOnlyDoNotUse(this.context.composerID,null,null,b("ReactComposerStore").getSproutSurface(this.context.composerID));return}b("ifRequired")("ReactComposerPostToGroupActions",function(a){return a.unselectTab(this.context.composerID)}.bind(this));b("ReactComposerAttachmentActions").selectAttachment(this.context.composerID,this.props.attachmentID,!0,this.props.loggingName);window.setTimeout(function(){return b("Arbiter").inform(b("ReactComposerEvents").ACTIVATE_ATTACHMENT+this.context.composerID)}.bind(this),0);this.props.onAfterSelected&&this.props.onAfterSelected()}.bind(this),c}a.getStores=function(){"use strict";return[b("ReactComposerAttachmentStore"),b("ReactComposerPostToGroupStore")]};a.calculateState=function(a,c,d){"use strict";var e=d.composerID;a=[c.attachmentID];c.alternativeAttachmentIDs&&(a=a.concat(c.alternativeAttachmentIDs));d=a.some(function(a){return b("ReactComposerPostToGroupStore").getIsTabSelected(e)?!1:b("ReactComposerAttachmentStore").getIsAttachmentSelected(e,a)});return{selected:d}};a.prototype.render=function(){"use strict";var a=this.props.onSelected!==b("emptyFunction")?this.props.onSelected:this.$1;return b("React").createElement(b("ReactComposerAttachmentSelector.react"),babelHelpers["extends"]({},this.props,{selected:this.state.selected,showNLUEducation:this.state.showNLUEducation,onSelected:a}))};a.defaultProps={onSelected:b("emptyFunction"),disableSelectAttachment:!1,enableDisplayTooltip:!1};a.contextTypes=b("ReactComposerContextTypes");e.exports=b("FluxContainer").create(a,{withContext:!0,withProps:!0})}),null);
__d("ReactComposerSproutsSelector.react",["cx","React","ReactComposerAttachmentSelectorContainer.react"],(function(a,b,c,d,e,f,g){"use strict";var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){return b("React").createElement("span",{"data-testid":this.props.dataTestID,className:"_sg1"},b("React").createElement(b("ReactComposerAttachmentSelectorContainer.react"),{attachmentID:this.props.attachmentID,label:this.props.label,icon:this.props.icon,loggingName:this.props.loggingName,alternativeAttachmentIDs:this.props.alternativeAttachmentIDs,onSelected:this.props.onSelected,onAfterSelected:this.props.onAfterSelected}))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("ReactComposerDocAttachmentSelector.react",["ix","AsyncRequest","Bootloader","React","ReactComponentWithPureRenderMixin","ReactComposerAttachmentSelectorContainer.react","ReactComposerAttachmentType","ReactComposerContextTypes","ReactComposerLoggingName","ReactComposerSproutsSelector.react","URI","asset"],(function(a,b,c,d,e,f,g){a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerDocAttachmentSelector",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{isInMoreButton:a.bool,label:a.node.isRequired,createDocCampfireURI:a.string,createDocFallbackURI:a.string.isRequired,sprouts:a.bool},render:function(){return this.props.sprouts?b("React").createElement(b("ReactComposerSproutsSelector.react"),{attachmentID:b("ReactComposerAttachmentType").DOC,loggingName:b("ReactComposerLoggingName").LIVE_VIDEO_TAB_SELECTOR,icon:g("651656"),label:this.props.label,onSelected:this._onSelected}):b("React").createElement(b("ReactComposerAttachmentSelectorContainer.react"),{attachmentID:b("ReactComposerAttachmentType").DOC,label:this.props.label,icon:g("85214"),"data-testid":"create-doc-attachment-selector",onSelected:this._onSelected,loggingName:b("ReactComposerLoggingName").DOC_TAB_SELECTOR,tabIndex:this.props.isInMoreButton?"-1":void 0})},_onSelected:function(){this.props.createDocCampfireURI?b("Bootloader").loadModules(["AsyncDialog"],function(a){var c=new(b("AsyncRequest"))(this.props.createDocCampfireURI).setMethod("POST").setStatusElement(this.context.composerID);a.send(c)}.bind(this),"ReactComposerDocAttachmentSelector.react"):new(b("URI"))(this.props.createDocFallbackURI).go()}});e.exports=c}),null);
__d("ReactComposerPropsAndStoreBasedStateMixin",["invariant","ExecutionEnvironment","ReactComposerContextTypes","StoreBasedStateMixinHelper","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return{_queuedUpdates:[],contextTypes:b("ReactComposerContextTypes"),getInitialState:function(){var a;this.constructor.getAttachmentInitialState?a=this.constructor.getAttachmentInitialState(this.context.composerID,this.props,this.context):a={};this.constructor.beforeCalculateInitialState&&this.constructor.beforeCalculateInitialState(this.context.composerID,this.props,this.context);return Object.assign({},a,this.constructor.calculateState(this.context.composerID,this.props,this.context))},UNSAFE_componentWillMount:function(){__p&&__p();this.constructor.calculateState||g(0,6048);this.context.composerID||g(0,6049);this._recalculateStateID=null;var a=function(a){if(!b("ExecutionEnvironment").canUseDOM)return;this.isMounted()&&a.composerID===this.context.composerID&&this.setState(this.constructor.calculateState(this.context.composerID,this.props,this.context));this._recalculateStateID=null;this._queuedUpdates.length&&this._queuedUpdates.shift()()}.bind(this);this._mixin=new(b("StoreBasedStateMixinHelper"))(c);this._mixin.subscribeCallback(function(c){this._recalculateStateID===null?this._recalculateStateID=b("setImmediate")(a,c):this._queuedUpdates.push(function(){this._recalculateStateID=b("setImmediate")(a,c)}.bind(this))}.bind(this))},UNSAFE_componentWillReceiveProps:function(a){var b;this.constructor.getAttachmentWillReceivePropsState&&(b=this.constructor.getAttachmentWillReceivePropsState(this.context.composerID,a,this.props,this.context));this.setState(Object.assign({},b||{},this.constructor.calculateState(this.context.composerID,a,this.context)))},componentWillUnmount:function(){this._mixin.release(),this._mixin=null}}};e.exports=a}),null);
__d("XReactComposerListAttachmentBootstrapController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/react_composer/list/bootstrap/",{composer_id:{type:"String",required:!0},composer_type:{type:"Enum",required:!0,enumType:1},target_id:{type:"String",required:!0}})}),null);
__d("ReactComposerListLazyAttachment.react",["ActorURI","Bootloader","React","ReactComposerAttachmentType","ReactComposerBootloaderPropTypes","ReactComposerLoadableAttachmentBodyMixin","XReactComposerListAttachmentBootstrapController"],(function(a,b,c,d,e,f){a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerListLazyAttachment",mixins:[b("ReactComposerLoadableAttachmentBodyMixin")],statics:{attachmentID:b("ReactComposerAttachmentType").LIST},propTypes:{selected:a.bool,bootload:a.func,bootloader:b("ReactComposerBootloaderPropTypes")},bootload:function(a){this.props.bootload?this.props.bootload(a):this.props.bootloader&&this.props.bootloader.listAttachment?this.props.bootloader.listAttachment(a):b("Bootloader").loadModules(["ReactComposerListAttachmentContainer.react","ReactComposerListPostButtonContainer.react"],a,"ReactComposerListLazyAttachment.react")},getBootstrapURI:function(){return b("ActorURI").create(b("XReactComposerListAttachmentBootstrapController").getURIBuilder().setString("composer_id",this.context.composerID).setEnum("composer_type",this.context.composerType).setString("target_id",this.context.targetID).getURI(),this.context.actorID)}});e.exports=c}),null);
__d("PagePostActionButtonActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PUBLISH:"PUBLISH",SAVE_DRAFT:"SAVE_DRAFT",SCHEDULE:"SCHEDULE",BACKDATE:"BACKDATE",ADS_POST:"ADS_POST"})}),null);
__d("ImageExtensions",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GIF:"gif",JPG:"jpg",PNG:"png",ICO:"ico",BMP:"bmp",WEBP:"webp",BEST:"best",PNG2JPG:"png2jpg",MP4:"mp4"})}),null);
__d("VideoUploadFeatureDetector",["UserAgent_DEPRECATED","fileSlice"],(function(a,b,c,d,e,f){a={supportsChunking:function(){return typeof b("fileSlice")==="function"&&this.supportsXHR()},supportsFullProgress:function(){return!b("UserAgent_DEPRECATED").firefox()},supportsFileAPI:function(){return"FileList"in window},supportsFileReading:function(){return"FileReader"in window&&"DataView"in window},supportsXHR:function(){return"FormData"in window}};e.exports=a}),null);
__d("VideoUploadFile",["ImageExtensions","VideoCreatorProductType","VideoUploadFeatureDetector","fileSlice"],(function(a,b,c,d,e,f){__p&&__p();function g(a,b,c,d){"use strict";this.$1=a,this.$2=b,this.$3=c,this.$4=d}g.fromBlob=function(a){"use strict";var b=a.type.indexOf("/")!=-1?"."+a.type.split("/").pop().toLowerCase():"";b="blob"+b;b=new File([a],b,{type:a.type});return g.fromFile(b)};g.fromFile=function(a){"use strict";var b=g.getExtensionFromFileName(a.name);return new this(null,a,a.size,b)};g.fromFileInput=function(a){"use strict";var c=null,d=null,e=g.getExtensionFromFileInput(a);b("VideoUploadFeatureDetector").supportsFileAPI()&&a.files.length&&(c=a.files[0],d=c.size);return new this(a,c,d,e)};g.prototype.getFileInput=function(){"use strict";return this.$1};g.prototype.getFile=function(){"use strict";return this.$2};g.prototype.getSize=function(){"use strict";return this.$3};g.prototype.getExtension=function(){"use strict";return this.$4};g.prototype.getCreatorProduct=function(){"use strict";return this.$4===b("ImageExtensions").GIF?b("VideoCreatorProductType").ANIMATED_GIFS:b("VideoCreatorProductType").CORE_VIDEOS};g.prototype.getChunk=function(a,c){"use strict";return this.$2?b("fileSlice").call(this.$2,a,c):null};g.getExtensionFromFileInput=function(a){"use strict";return this.getExtensionFromFileName(a.value)};g.getExtensionFromFileName=function(a){"use strict";return a.indexOf(".")!=-1?a.split(".").pop().toLowerCase():""};e.exports=g}),null);
__d("VideoUploadLogger",["Banzai"],(function(a,b,c,d,e,f){__p&&__p();function g(a){this._source=a.source,this._composerDialogVersion=a.composer_dialog_version,this._waterfallID=a.waterfall_id,this._targetID=a.target_id,this._delay=a.delay,this._times=[],this._isChunkedUpload=a.is_chunked_upload,this._actorID=a.actor_id,this._composerEntryPointRef=a.composer_entry_point_ref,this._isRemoteUpload=a.is_remote_upload,this._containerType=a.container_type,this._hasFileBeenReplaced=a.has_file_been_replaced}a={BANZAI_GK:"videos",BANZAI_ROUTE:"video_waterfall",SOURCE_SIMPLE:"simple",SOURCE_COMPOSER:"composer",EVENT_STARTED_GENERATE_THUMBNAILS:"upload.client.started_generate_thumbnails",EVENT_FINISHED_GENERATE_THUMBNAILS:"upload.client.finished_generate_thumbnails",EVENT_SELECTED_CUSTOM_THUMBNAIL:"upload.client.selected_custom_thumbnail",EVENT_VIDEO_DIMENSIONS_UNREADABLE:"upload.client.video_dimensions_unreadable",EVENT_REPLACE_VIDEO:"upload.client.replace_video",EVENT_STARTED_FLOW:"upload.client.started_flow",EVENT_FINISHED_FLOW:"upload.client.finished_flow",EVENT_FAILED_FLOW:"upload.client.failed_flow",EVENT_CANCELED_FLOW:"upload.client.canceled_flow",EVENT_RESIGNED_FLOW:"upload.client.resigned_flow",EVENT_REQUESTED_UPLOADING:"upload.client.requested_uploading",EVENT_INVALIDATED_UPLOADING:"upload.client.invalidated_uploading",EVENT_STARTED_UPLOADING:"upload.client.started_uploading",EVENT_PROGRESS_UPLOADING_START_REQUEST:"upload.client.progress_uploading_start_request",EVENT_FINISHED_UPLOADING:"upload.client.finished_uploading",EVENT_CANCELED_UPLOADING:"upload.client.canceled_uploading",EVENT_ABANDONED_UPLOADING:"upload.client.abandoned_uploading",EVENT_FAILED_UPLOADING:"upload.client.failed_uploading",EVENT_STARTED_SENDING_BYTES:"upload.client.started_sending_bytes",EVENT_FINISHED_SENDING_BYTES:"upload.client.finished_sending_bytes",EVENT_CANCELED_SENDING_BYTES:"upload.client.canceled_sending_bytes",EVENT_FAILED_SENDING_BYTES:"upload.client.failed_sending_bytes",EVENT_STARTED_START_REQUEST:"upload.client.started_sending_start_request",EVENT_FINISHED_START_REQUEST:"upload.client.finished_sending_start_request",EVENT_FAILED_START_REQUEST:"upload.client.failed_sending_start_request",EVENT_STARTED_POST_REQUEST:"upload.client.started_sending_post_request",EVENT_FINISHED_POST_REQUEST:"upload.client.finished_sending_post_request",EVENT_FAILED_POST_REQUEST:"upload.client.failed_sending_post_request",EVENT_HANDLING_SERVER_FAILURE_RESPONSE:"upload.client.handling_server_failure_response",EVENT_HANDLING_TRANSPORT_FAILURE_RESPONSE:"upload.client.handling_transport_failure_response",EVENT_DUPLICATE_POST_REQUEST:"upload.client.duplicate_post_request",EVENT_STARTED_SENDING_CHUNK_BYTES:"upload.client.started_sending_chunk_bytes",EVENT_FINISHED_SENDING_CHUNK_BYTES:"upload.client.finished_sending_chunk_bytes",EVENT_CANCELED_SENDING_CHUNK_BYTES:"upload.client.canceled_sending_chunk_bytes",EVENT_FAILED_SENDING_CHUNK_BYTES:"upload.client.failed_sending_chunk_bytes",EVENT_TIMEOUT_SENDING_CHUNK_BYTES:"upload.client.timeout_sending_chunk_bytes",EVENT_RESUMABLE_CALLED:"upload.client.resumable_called",EVENT_RESUMABLE_STARTED:"upload.client.resumable_started",EVENT_RESUMABLE_SUCCESS:"upload.client.resumable_success",EVENT_RESUMABLE_FAILED:"upload.client.resumable_failed",EVENT_ENCODING_START_OBSERVED:"encode.client.encoding_start_observed",EVENT_ENCODING_SUCCESS_OBSERVED:"encode.client.encoding_success_observed",EVENT_ENCODING_FAIL_OBSERVED:"encode.client.encoding_fail_observed",EVENT_RECEIVED_RESPONSE:"upload.client.received_response",EVENT_STARTED_FLOW_EXP1:"upload.client.started_flow_exp1",EVENT_FINISHED_FLOW_EXP1:"upload.client.finished_flow_exp1",EVENT_CANCELED_FLOW_EXP1:"upload.client.canceled_flow_exp1",EVENT_MEASURE_FREE_LOCAL_STORAGE:"upload.client.free_local_storage"};Object.assign(g,a);Object.assign(g.prototype,{logEvent:function(a,c){__p&&__p();c=babelHelpers["extends"]({},c);c.elapsed_time==null&&(a.indexOf("started")!==-1?this._times[a]=Date.now():a.indexOf("finished")!==-1?c.elapsed_time=this._computeElapsedTime(a,"finished"):a.indexOf("canceled")!==-1?c.elapsed_time=this._computeElapsedTime(a,"canceled"):a.indexOf("failed")!==-1&&(c.elapsed_time=this._computeElapsedTime(a,"failed")));c.event=a;c.source=this._source;c.composer_dialog_version=c.composer_dialog_version||this._composerDialogVersion;c.waterfall_id=this._waterfallID;c.target_id=this._targetID;c.is_chunked_upload=this._isChunkedUpload;c.actor_id=this._actorID;c.composer_entry_point_ref=this._composerEntryPointRef;c.is_remote_upload=this._isRemoteUpload;c.container_type=this._containerType;c.has_file_been_replaced=this._hasFileBeenReplaced;b("Banzai").post(g.BANZAI_ROUTE,c,{delay:this._delay,retry:!0})},getWaterfallID:function(){return this._waterfallID},_computeElapsedTime:function(a,b){a=a.replace(b,"started");b=this._times[a];return b?Date.now()-b:null}});e.exports=g}),null);
__d("VideoUploadProgressBar",["cx","CSS","VideoUploadFeatureDetector"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a){"use strict";this.$1=a.progress_bar,this.$2=a.throbber,this.$3=a.uploader,this.$4=a.start_margin,this.$5=a.start_delay,this.$6=a.end_margin,this.$7=a.end_delay,this.$8=a.progress_bar_label,this.$9()}h.prototype.reset=function(){"use strict";this.$1.setPosition(0)};h.prototype.getRoot=function(){"use strict";return this.$1.getRoot()};h.computeProgress=function(a,b,c,d,e){"use strict";a=Math.min(a+b,c);return a/c*(100-d-e)+d};h.prototype.$9=function(){"use strict";b("VideoUploadFeatureDetector").supportsFileAPI()?(this.$3.subscribe("upload-requested",this.$10.bind(this)),this.$3.subscribe("upload-progressed",this.$11.bind(this)),this.$3.subscribe("online",this.$12.bind(this)),this.$3.subscribe("offline",this.$13.bind(this))):this.$3.subscribe("upload-requested",this.$14.bind(this))};h.prototype.$10=function(a){"use strict";b("CSS").show(this.$1.getRoot()),b("CSS").removeClass(this.$1.getRoot(),"_5r5a"),this.$1.setTarget(this.$4,this.$5),this.$15(0)};h.prototype.$15=function(a){"use strict";this.$8&&this.$1.changeLabel(""+a.toFixed(1)+"%")};h.prototype.$11=function(a,c){"use strict";b("CSS").removeClass(this.$1.getRoot(),"_5r5a");a=h.computeProgress(c.start_offset,c.sent_bytes,c.file_size,this.$4,this.$6);this.$1.setPosition(a);this.$15(a);a>=100-this.$6&&(this.$1.setTarget(100,this.$7),this.$15(100))};h.prototype.$12=function(a){"use strict";b("CSS").removeClass(this.$1.getRoot(),"_5r5a")};h.prototype.$13=function(a){"use strict";b("CSS").addClass(this.$1.getRoot(),"_5r5a")};h.prototype.$14=function(a){"use strict";b("CSS").show(this.$2)};e.exports=h}),null);
__d("VideoUploadCrashMonitor",["Bandicoot","VideoUploadLogger"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("Bandicoot"));g=c&&c.prototype;function a(a,b,c,d,e,f,h,i){"use strict";g.constructor.call(this,"VideoUploadSession"),this.$VideoUploadCrashMonitor1={waterfallID:a,actorID:b,source:c,targetID:d,loggingDelay:e,supportsChunking:f,composerEntryPointRef:h,flowStarted:i}}a.prototype.flowStarted=function(){"use strict";this.$VideoUploadCrashMonitor1.flowStarted=!0};a.prototype.getCrashTimeData=function(){"use strict";return this.$VideoUploadCrashMonitor1};a.prototype.logCrash=function(a,c,d){"use strict";if(!c.waterfallID)return;a=new(b("VideoUploadLogger"))({actor_id:c.actorID,source:c.source,waterfall_id:c.waterfallID,target_id:c.targetID,delay:c.loggingDelay,is_chunked_upload:c.supportsChunking,composer_entry_point_ref:c.composerEntryPointRef});d={error:"Crash Detected",error_description:"Detected video upload did not complete due to a crash"};a.logEvent(b("VideoUploadLogger").EVENT_FAILED_UPLOADING,d);c.flowStarted&&a.logEvent(b("VideoUploadLogger").EVENT_RESIGNED_FLOW,{})};e.exports=a}),null);
__d("VideoUploadFileValidator",["errorCode","fbt","ErrorDialog","ImageExtensions","Link.react","React"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=[1363019,1363020,1363021,1363022,1363023,1363024,1363025,1363026,1363027,1363030,1363031,1363032,1363033,1363038,1363039,1363040,1363048],j=["VIDEO__INVALID_GUIDE_DATA"];function a(a){"use strict";this.$1=a}a.prototype.validate=function(a,c){"use strict";return this.$2(a)&&this.$3(a)&&this.$4(a.getExtension()===b("ImageExtensions").GIF,c)};a.prototype.getValidationErrorMessage=function(a,c){"use strict";return this.$5(a)||this.$6(a)||this.$7(a.getExtension()===b("ImageExtensions").GIF,c)};a.canReplaceVideoForError=function(a){"use strict";if(!a)return!0;if(j.indexOf(a)>-1)return!1;return i.indexOf(a)>-1?!0:!1};a.prototype.$2=function(a){"use strict";a=this.$5(a);if(a){b("ErrorDialog").show(a.summary,a.description);return!1}else return!0};a.prototype.$5=function(a){"use strict";if(this.$1.extensions[a.getExtension()])return;a="http://www.facebook.com/help/?faq=218673814818907#What-formats-of-video-files-can-I-upload?";a=b("React").createElement(b("Link.react"),{target:"_blank",href:a},h._("recommended formats"));return{summary:h._("Unsupported File Format"),description:h._("Sorry, the file you selected is in a format that we don't support. Please use one of our {link} for video files.",[h._param("link",a)])}};a.prototype.$3=function(a){"use strict";a=this.$6(a);if(a){b("ErrorDialog").show(a.summary,a.description);return!1}else return!0};a.prototype.$6=function(a){"use strict";var b;if(a.getSize()===null)return;a.getSize()<this.$1.minSize&&(b=this.$8());a.getSize()>this.$1.maxSize&&(b=this.$9());return b};a.prototype.$8=function(){"use strict";var a=Math.round(this.$1.minSize/1024);return{summary:h._("Video File Too Small"),description:h._("The video file you tried to upload is too small. The minimum size for a video file is {min-size} KB. Please try again with a larger file.",[h._param("min-size",a)])}};a.prototype.$9=function(){"use strict";var a=Math.floor(this.$1.maxSize/1024/1024);return{summary:h._("Video File Too Large"),description:h._("The video file you tried to upload is too large. The maximum size for a video file is {max-size} MB. Please try again with a smaller file.",[h._param("max-size",a)])}};a.prototype.$4=function(a,c){"use strict";a=this.$7(a,c);if(a){b("ErrorDialog").show(a.summary,a.description);return!1}else return!0};a.prototype.$7=function(a,b){"use strict";__p&&__p();var c;if(!b)return;var d=b.format.duration;d&&(d>this.$1.maxLength&&(c=this.$10()),d<this.$1.minLength&&!a&&(c=this.$11()));if(!b.streams||!b.streams.primaryVideo)return;d=b.streams.primaryVideo.width;a=b.streams.primaryVideo.height;var e=0,f=0;b.videoPlayerData!==null&&(e=b.videoPlayerData.height,f=b.videoPlayerData.width);this.$1.acceptDimensionsFromPlayer&&f!==0&&e!==0&&(d=f,a=e);!b.streams.primaryVideo&&b.streams.primaryAudio&&(c=this.$12());d<this.$1.minWidth&&(c=this.$13());a<this.$1.minHeight&&(c=this.$14());f=d/a;this.$1.require16to9AspectRatio&&((f>2||f<1.6)&&(c=this.$15()));this.$1.minAspectRatio&&(f<this.$1.minAspectRatio&&(c=this.$16()));this.$1.maxAspectRatio&&(f>this.$1.maxAspectRatio&&(c=this.$17()));return c};a.prototype.$10=function(){"use strict";if(this.$1.source==="profile_video")return{summary:h._("Profile Video Duration Too Long"),description:h._("The maximum length is {max-length} seconds. Please upload a shorter video.",[h._param("max-length",this.$1.maxLength)])};else return{summary:h._("Video Duration Too Long"),description:h._("The duration of the video you tried to upload is too long. The maximum duration for a video is {max-length} minutes. Please upload a shorter video.",[h._param("max-length",Math.round(this.$1.maxLength/60))])}};a.prototype.$11=function(){"use strict";return{summary:h._("Video File Too Short"),description:h._({"second":"The duration of the video you tried to upload is too short. The minimum length for a video is {min-length} second. Please upload a longer video.","seconds":"The duration of the video you tried to upload is too short. The minimum length for a video is {min-length} seconds. Please upload a longer video."},[h._param("min-length",this.$1.minLength),h._enum(this.$1.minLength===1?"second":"seconds",{second:"second",seconds:"seconds"})])}};a.prototype.$12=function(){"use strict";var a="http://www.facebook.com/help/?faq=218673814818907#What-formats-of-video-files-can-I-upload?";a=b("React").createElement(b("Link.react"),{href:a},h._("supported video format"));return{summary:h._("No Video Detected"),description:h._("It looks like you're trying to upload a file that isn't a video. Please try uploading a {supported-video-format link}",[h._param("supported-video-format link",a)])}};a.prototype.$13=function(){"use strict";return{summary:h._("Video Width Too Narrow"),description:h._("The width of the video you tried to upload is too short. The minimum width for a video is {min-width}. Please upload a wider video.",[h._param("min-width",this.$1.minWidth)])}};a.prototype.$15=function(){"use strict";return{summary:h._("Problem Uploading Video"),description:h._("Videos look best when they have a 16:9 aspect ratio. Please edit your video and upload again.")}};a.prototype.$14=function(){"use strict";return{summary:h._("Video Height Too Short"),description:h._("The height of the video you tried to upload is too short. The minimum height for a video is {min-height}. Please upload a taller video.",[h._param("min-height",this.$1.minHeight)])}};a.prototype.$17=function(){"use strict";return{summary:h._("Video Too Wide"),description:h._("The video you selected is too wide. Aspect ratios for videos need to be between {max_aspect_ratio} and {min_aspect_ratio}. Please record and upload a taller video.",[h._param("max_aspect_ratio",this.$1.maxAspectRatio+":1"),h._param("min_aspect_ratio",this.$1.minAspectRatio+":1")])}};a.prototype.$16=function(){"use strict";return{summary:h._("Video Too Tall"),description:h._("The video you selected is too tall. Aspect ratios for videos need to be between {max_aspect_ratio} and {min_aspect_ratio}. Please record and upload a narrower video.",[h._param("max_aspect_ratio",this.$1.maxAspectRatio+":1"),h._param("min_aspect_ratio",this.$1.minAspectRatio+":1")])}};e.exports=a}),null);
__d("VideoProjection",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FLAT:"flat",EQUIRECTANGULAR:"equirectangular",CUBEMAP:"cubemap",UNPADDED_CUBEMAP:"unpadded_cubemap",UNPADDED_CUBESTRIP:"unpadded_cubestrip",OFFSET_CUBEMAP:"offset_cubemap",ROTATED_CUBEMAP:"rotated_cubemap",PYRAMID:"pyramid",STRETCHED_CUBEMAP:"stretched_cubemap",BARREL:"barrel",SINGLE_FISH_EYE:"single_fish_eye",CDS_BARREL:"cds_barrel",EQUIANGULAR_CUBEMAP:"equiangular_cubemap",HALF_EQUIRECTANGULAR:"half_equirectangular"})}),null);
__d("VideoUploadRequest",["AsyncRequest","DOM","DTSG","FileForm","Form","VideoUploadFeatureDetector","emptyFunction","flattenPHPQueryData","submitForm"],(function(a,b,c,d,e,f){__p&&__p();var g="video";function a(a){"use strict";this.$1=a,this.$2=null,this.$3=!1,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=b("emptyFunction"),this.$9=b("emptyFunction"),this.$10=b("emptyFunction"),this.$11=b("emptyFunction"),this.$12=null}a.prototype.setAllowCrossOrigin=function(a){"use strict";this.$3=a;return this};a.prototype.setData=function(a){"use strict";this.$4=a;return this};a.prototype.setWaterfallID=function(a){"use strict";this.$6=a;return this};a.prototype.setSuccessHandler=function(a){"use strict";this.$8=a;return this};a.prototype.setErrorHandler=function(a){"use strict";this.$9=a;return this};a.prototype.setTransportErrorHandler=function(a){"use strict";this.$10=a;return this};a.prototype.setUploadProgressHandler=function(a){"use strict";this.$11=a;return this};a.prototype.setTimeoutHandler=function(a,b){"use strict";this.$7=a;this.$12=b;return this};a.prototype.setThumbnail=function(a){"use strict";this.$13=a;return this};a.prototype.setCustomProfileImage=function(a){"use strict";this.$14=a;return this};a.prototype.setCustomBackgroundImage=function(a){"use strict";this.$15=a;return this};a.prototype.setFeedBackgroundImage=function(a){"use strict";this.$16=a;return this};a.prototype.setHandle=function(a){"use strict";this.$5=a;return this};a.prototype.setCaptions=function(a){"use strict";this.$17=a;return this};a.prototype.setPollOptionImages=function(a){"use strict";this.$18=a;return this};a.prototype.send=function(){"use strict";__p&&__p();if(this.$2)throw new Error("An upload request is already in progress.");if(b("VideoUploadFeatureDetector").supportsXHR()){this.$2=this.$19();if(this.$13||this.$17||this.$14||this.$15||this.$16||this.$18){var a=new FormData();this.$13&&a.append("thumb",this.$13);this.$14&&a.append("schedule_custom_profile_image",this.$14);this.$15&&a.append("schedule_custom_background_image",this.$15);this.$16&&a.append("schedule_feed_background_image",this.$16);this.$17&&this.$17.forEach(function(b,c){c=b.getIsDefault()?"captions_default":"captions_file"+c;a.append(c,b.getFile())});if(this.$18){var c=this.$18;Object.keys(c).forEach(function(b){a.append(b,c[b])})}if(this.$4){var d=b("flattenPHPQueryData")(this.$4);Object.keys(d).forEach(function(b){a.append(b,d[b])})}this.$2.setRawData(a)}this.$2.send()}else this.$2=this.$20(),this.$21(this.$2)};a.prototype.sendChunk=function(a){"use strict";if(this.$2)throw new Error("An upload request is already in progress.");var b=new FormData();this.$5?b.append("fbuploader_video_file_chunk",this.$5):b.append("video_file_chunk",a);this.$2=this.$19();this.$2.setRawData(b);this.$2.send()};a.prototype.sendFile=function(a){"use strict";__p&&__p();if(this.$2)throw new Error("An upload request is already in progress.");this.$2=this.$20();var c=a.cloneNode(!1);a.name=g;b("DOM").replace(a,c);b("DOM").appendContent(this.$2.getRoot(),a);this.$21(this.$2);a.name=c.name;b("DOM").replace(c,a)};a.prototype.abort=function(){"use strict";if(!this.$2)return;this.$2.abort();this.$2=null};a.prototype.$19=function(){"use strict";var a=this.__getAsyncRequest().setAllowCrossOrigin(this.$3).setURI(this.$1).setData(this.$4).setRequestHeader("X_FB_VIDEO_WATERFALL_ID",this.$6).setHandler(this.$8).setErrorHandler(this.$9).setTransportErrorHandler(this.$10).setUploadProgressHandler(this.$11);this.$12&&a.setTimeoutHandler(this.$7,this.$12);return a};a.prototype.__getAsyncRequest=function(){"use strict";return new(b("AsyncRequest"))()};a.prototype.$20=function(){"use strict";var a=b("DOM").create("form",{action:this.$1,method:"POST"});b("Form").createHiddenInputs(babelHelpers["extends"]({fb_dtsg:b("DTSG").getToken()},this.$4),a);a=new(b("FileForm"))(a,null,{allowCrossOrigin:this.$3});a.subscribe("success",this.$22.bind(this));a.subscribe("failure",this.$23.bind(this));a.subscribe("progress",this.$24.bind(this));return a};a.prototype.$21=function(a){"use strict";b("DOM").appendContent(document.body,a.getRoot()),b("submitForm")(a.getRoot())};a.prototype.$22=function(a,b){"use strict";this.$8(b.response)};a.prototype.$23=function(a,b){"use strict";this.$9(b.response)};a.prototype.$24=function(a,b){"use strict";this.$11(b.event)};e.exports=a}),null);
__d("VideoUploadPostRequestManager",["ArbiterMixin","VideoUploadLogger","VideoUploadRequest","clearTimeout","mixin","setTimeout"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;function a(a,b,c,d,e){"use strict";g.constructor.call(this),this.$VideoUploadPostRequestManager2=a,this.$VideoUploadPostRequestManager3=b,this.$VideoUploadPostRequestManager4=c,this.$VideoUploadPostRequestManager5=0,this.$VideoUploadPostRequestManager6=d,this.$VideoUploadPostRequestManager7=e,this.$VideoUploadPostRequestManager8=0}a.prototype.$VideoUploadPostRequestManager9=function(){"use strict";return this.$VideoUploadPostRequestManager1?new(b("VideoUploadLogger"))({source:this.$VideoUploadPostRequestManager1.getSource(),waterfall_id:this.$VideoUploadPostRequestManager1.getWaterfallID(),target_id:this.$VideoUploadPostRequestManager1.getTargetID(),composer_entry_point_ref:this.$VideoUploadPostRequestManager1.getComposerEntryPointRef&&this.$VideoUploadPostRequestManager1.getComposerEntryPointRef()}):null};a.prototype.getRequest=function(){"use strict";return this.$VideoUploadPostRequestManager10};a.prototype.sendRequest=function(a){"use strict";__p&&__p();this.$VideoUploadPostRequestManager1=a;if(this.$VideoUploadPostRequestManager10){var c=this.$VideoUploadPostRequestManager9();c&&c.logEvent(b("VideoUploadLogger").EVENT_DUPLICATE_POST_REQUEST);return}this.$VideoUploadPostRequestManager11=babelHelpers["extends"]({},a.getMetadata(),this.__createRequestData(a));this.$VideoUploadPostRequestManager12=this.$VideoUploadPostRequestManager11.thumb;this.$VideoUploadPostRequestManager13=this.$VideoUploadPostRequestManager11.schedule_custom_profile_image;this.$VideoUploadPostRequestManager14=this.$VideoUploadPostRequestManager11.schedule_custom_background_image;this.$VideoUploadPostRequestManager15=this.$VideoUploadPostRequestManager11.schedule_feed_background_image;delete this.$VideoUploadPostRequestManager11.thumb;this.$VideoUploadPostRequestManager16=this.$VideoUploadPostRequestManager11.captions;delete this.$VideoUploadPostRequestManager11.captions;this.$VideoUploadPostRequestManager17=a.getWaterfallID();this.$VideoUploadPostRequestManager18=this.$VideoUploadPostRequestManager11.pollImages;this.$VideoUploadPostRequestManager19();this.inform("request-started")};a.prototype.$VideoUploadPostRequestManager19=function(){"use strict";b("clearTimeout")(this.$VideoUploadPostRequestManager20),this.$VideoUploadPostRequestManager20=null,this.$VideoUploadPostRequestManager10=this.__getVideoUploadRequest(this.$VideoUploadPostRequestManager2).setAllowCrossOrigin(!0).setData(this.$VideoUploadPostRequestManager11).setThumbnail(this.$VideoUploadPostRequestManager12).setCustomProfileImage(this.$VideoUploadPostRequestManager13).setCustomBackgroundImage(this.$VideoUploadPostRequestManager14).setFeedBackgroundImage(this.$VideoUploadPostRequestManager15).setCaptions(this.$VideoUploadPostRequestManager16).setWaterfallID(this.$VideoUploadPostRequestManager17).setPollOptionImages(this.$VideoUploadPostRequestManager18).setSuccessHandler(this.$VideoUploadPostRequestManager21.bind(this)).setErrorHandler(this.$VideoUploadPostRequestManager22.bind(this)).setTransportErrorHandler(this.$VideoUploadPostRequestManager23.bind(this)),this.$VideoUploadPostRequestManager10.send()};a.prototype.__createRequestData=function(a){"use strict";return{video_id:a.getVideoID(),target_id:a.getTargetID(),source:a.getSource(),waterfall_id:a.getWaterfallID(),creator_product:a.getCreatorProduct(),composer_entry_point_ref:a.getComposerEntryPointRef&&a.getComposerEntryPointRef(),composer_dialog_version:a.getComposerDialogVersion(),has_file_been_replaced:a.getHasFileBeenReplaced(),supports_chunking:a.getSupportsChunking()}};a.prototype.__getVideoUploadRequest=function(a){"use strict";return new(b("VideoUploadRequest"))(a)};a.prototype.clearRequest=function(){"use strict";this.$VideoUploadPostRequestManager10=null,this.$VideoUploadPostRequestManager8=0,this.$VideoUploadPostRequestManager5=0};a.prototype.isInProgress=function(){"use strict";return!!this.$VideoUploadPostRequestManager10};a.prototype.$VideoUploadPostRequestManager24=function(a){"use strict";b("clearTimeout")(this.$VideoUploadPostRequestManager20),this.$VideoUploadPostRequestManager20=b("setTimeout")(this.$VideoUploadPostRequestManager19.bind(this),a)};a.prototype.$VideoUploadPostRequestManager25=function(a,b){"use strict";return Math.pow(a,b)*1e3};a.prototype.$VideoUploadPostRequestManager21=function(a){"use strict";a=a.getPayload();this.inform("request-finished",{video_id:a.video_id,video_asset_id:a.video_asset_id,container_type:a.container_type,transport_retries:this.$VideoUploadPostRequestManager5,server_retries:this.$VideoUploadPostRequestManager8,premiere_destination_video_id:a.premiere_destination_video_id});this.clearRequest()};a.prototype.$VideoUploadPostRequestManager26=function(a){"use strict";this.inform("request-failed",{error_code:a.getError(),error_description:a.getErrorDescription(),error_summary:a.getErrorSummary(),transport_retries:this.$VideoUploadPostRequestManager5,server_retries:this.$VideoUploadPostRequestManager8,error_is_transient:a.isTransient()}),this.clearRequest()};a.prototype.$VideoUploadPostRequestManager22=function(a){"use strict";this.$VideoUploadPostRequestManager10=null;this.$VideoUploadPostRequestManager5=0;var c=this.$VideoUploadPostRequestManager9();if(c){var d={server_retries:this.$VideoUploadPostRequestManager8,extra_data:{failure_is_transient:a.isTransient()}};c.logEvent(b("VideoUploadLogger").EVENT_HANDLING_SERVER_FAILURE_RESPONSE,d)}a.isTransient()&&this.$VideoUploadPostRequestManager8<this.$VideoUploadPostRequestManager6?(this.$VideoUploadPostRequestManager8++,this.$VideoUploadPostRequestManager24(this.$VideoUploadPostRequestManager25(this.$VideoUploadPostRequestManager7,this.$VideoUploadPostRequestManager8))):this.$VideoUploadPostRequestManager26(a)};a.prototype.$VideoUploadPostRequestManager23=function(a){"use strict";var c=this.$VideoUploadPostRequestManager9();if(c){var d={extra_data:{transport_retries:this.$VideoUploadPostRequestManager5}};c.logEvent(b("VideoUploadLogger").EVENT_HANDLING_TRANSPORT_FAILURE_RESPONSE,d)}this.$VideoUploadPostRequestManager3===0||this.$VideoUploadPostRequestManager5>=this.$VideoUploadPostRequestManager3?this.$VideoUploadPostRequestManager26(a):(this.$VideoUploadPostRequestManager5++,this.$VideoUploadPostRequestManager10=null,this.$VideoUploadPostRequestManager24(this.$VideoUploadPostRequestManager25(this.$VideoUploadPostRequestManager4,this.$VideoUploadPostRequestManager5)))};e.exports=a}),null);
__d("ResumableUploadServiceState.enum",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({CANCEL:"upload-cancel",FAIL:"upload-fail",FILE_TOO_LARGE:"upload-too-large",NOT_STARTED:"upload-not-started",PROGRESS:"upload-progress",START:"upload-start",SUCCESS:"upload-success",TRANSPORT_FAILURE:"upload-transport-fail"});e.exports=a}),null);
__d("ResumableUploadAsyncService",["regeneratorRuntime","Promise","AsyncRequest","EventEmitter","ResumableUploadServiceState.enum","URI","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h="rupload.facebook.com";c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(a,c,d,e,f,h,i,j){g.constructor.call(this),this.consumer=a,this.accessToken=c,this.sessionKey=d||b("uuid")(),this.contentKey=e||"",this.contentValue=f||"",this.serviceNameOverride=h||"",this.receiveParameters=i,this.flowCaptureHeaderValue=j}a.prototype.resume=function(a){__p&&__p();var c,d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:e.prev=0;e.next=3;return b("regeneratorRuntime").awrap(this.sendOffsetRequest(a));case 3:c=e.sent;this.emit(b("ResumableUploadServiceState.enum").START,{offset:c.offset});e.next=7;return b("regeneratorRuntime").awrap(this.sendUploadRequest(a,c));case 7:d=e.sent;this.emit(b("ResumableUploadServiceState.enum").SUCCESS,d.h);e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),this.emit(b("ResumableUploadServiceState.enum").FAIL,e.t0);case 14:this.abortUpload=void 0;case 15:case"end":return e.stop()}},null,this,[[0,11]])};a.prototype.cancel=function(){this.abortUpload&&this.abortUpload(),this.emit(b("ResumableUploadServiceState.enum").CANCEL)};a.prototype.decorateRequestFlowCaptureHeader=function(a){this.flowCaptureHeaderValue&&a.setRequestHeader("X-Fb-Flow-Capture",String(this.flowCaptureHeaderValue))};a.prototype.sendOffsetRequest=function(a){return new(b("Promise"))(function(a,c){var d=new(b("AsyncRequest"))().disableInteractionServerTracing().setAllowCrossOrigin(!0).setAllowCredentials(!0).setMethod("GET").setURI(this.getUploadUri()).setReadOnly(!0).setRequestHeader("Authorization","OAuth "+this.accessToken).setHandler(function(b){return a(JSON.parse(b.payload.response))}).setErrorHandler(c).setOption("suppressEvaluation",!0).setTransportErrorHandler(function(a){this.emit(b("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,a)}.bind(this));this.decorateRequestFlowCaptureHeader(d);this.abortUpload=function(){return d.abort()};d.send()}.bind(this))};a.prototype.sendUploadRequest=function(a,c){__p&&__p();c=c||{};var d=c.offset;c=c.duplicate;var e=c?"":a.slice(d);return new(b("Promise"))(function(c,f){__p&&__p();var g=new(b("AsyncRequest"))().disableInteractionServerTracing().setAllowCrossOrigin(!0).setAllowCredentials(!0).setURI(this.getUploadUri()).setRawData(e).setHandler(function(a){return c(JSON.parse(a.payload.response))}).setErrorHandler(f).setRequestHeader("Authorization","OAuth "+this.accessToken).setRequestHeader("X-Entity-Name",encodeURIComponent(a.name)).setRequestHeader("X-Entity-Type",a.type).setRequestHeader("X-Entity-Length",String(a.size)).setRequestHeader("Offset",String(d)).setOption("suppressEvaluation",!0).setUploadProgressHandler(function(c){c=new ProgressEvent("upload-service",{total:a.size,loaded:c.loaded+Number(d)});this.emit(b("ResumableUploadServiceState.enum").PROGRESS,c)}.bind(this)).setTransportErrorHandler(function(a){this.emit(b("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,a)}.bind(this));this.decorateRequestFlowCaptureHeader(g);this.abortUpload=function(){return g.abort()};f=this.receiveParameters;f&&(g.setRequestHeader("start_offset",String(f.start_offset)).setRequestHeader("end_offset",String(f.end_offset)).setRequestHeader("composer_session_id",String(f.composer_session_id)).setRequestHeader("id",String(f.upload_session_id)),f.fb_region&&g.setRequestHeader("X-FB-Region",String(f.fb_region)));g.send()}.bind(this))};a.prototype.getUploadUri=function(){var a=this.serviceNameOverride!=""?this.serviceNameOverride:h;a=new(b("URI"))("https://"+a+"/"+this.consumer+"/"+this.sessionKey);this.contentKey&&this.contentValue&&(a=a.addQueryData(this.contentKey,this.contentValue));return a};e.exports=a}),null);
__d("ResumableUploadService",["Promise","AsyncRequest","EventEmitter","ResumableUploadServiceState.enum","URI","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h="rupload.facebook.com";c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(a,c,d,e,f,h,i,j){g.constructor.call(this),this.consumer=a,this.accessToken=c,this.sessionKey=d||b("uuid")(),this.contentKey=e||"",this.contentValue=f||"",this.serviceNameOverride=h||"",this.receiveParameters=i,this.flowCaptureHeaderValue=j}a.prototype.resume=function(a){__p&&__p();var c=this.serviceNameOverride!=""?this.serviceNameOverride:h,d=new(b("URI"))("https://"+c+"/"+this.consumer+"/"+this.sessionKey);this.contentKey&&this.contentValue&&(d=d.addQueryData(this.contentKey,this.contentValue));c=function(){return new(b("Promise"))(function(a,c){a=new(b("AsyncRequest"))().disableInteractionServerTracing().setAllowCrossOrigin(!0).setAllowCredentials(!0).setMethod("GET").setURI(d).setReadOnly(!0).setHandler(a).setErrorHandler(c).setOption("suppressEvaluation",!0).setTransportErrorHandler(function(a){this.emit(b("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,a)}.bind(this));this.decorateRequestFlowCaptureHeader(a);a.send()}.bind(this))}.bind(this);var e=function(c){__p&&__p();return new(b("Promise"))(function(e,f){__p&&__p();var g=JSON.parse(c.payload.response),h=g.offset;this.emit(b("ResumableUploadServiceState.enum").START,{offset:h});this.uploadAsyncRequest=new(b("AsyncRequest"))().disableInteractionServerTracing().setAllowCrossOrigin(!0).setAllowCredentials(!0).setURI(d).setRawData(a.slice(h)).setHandler(e).setErrorHandler(f).setRequestHeader("X-Entity-Name",encodeURIComponent(a.name)).setRequestHeader("X-Entity-Type",a.type).setRequestHeader("X-Entity-Length",String(a.size)).setRequestHeader("Offset",String(h)).setOption("suppressEvaluation",!0).setUploadProgressHandler(function(c){c=new ProgressEvent("upload-service",{total:a.size,loaded:c.loaded+Number(h)});this.emit(b("ResumableUploadServiceState.enum").PROGRESS,c)}.bind(this)).setTransportErrorHandler(function(a){this.emit(b("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,a)}.bind(this));this.decorateRequestFlowCaptureHeader(this.uploadAsyncRequest);if(this.receiveParameters){g=this.receiveParameters;this.uploadAsyncRequest.setRequestHeader("start_offset",String(g.start_offset));this.uploadAsyncRequest.setRequestHeader("end_offset",String(g.end_offset));this.uploadAsyncRequest.setRequestHeader("composer_session_id",String(g.composer_session_id));this.uploadAsyncRequest.setRequestHeader("id",String(g.upload_session_id));g.fb_region&&this.uploadAsyncRequest.setRequestHeader("X-FB-Region",String(g.fb_region))}this.uploadAsyncRequest.send()}.bind(this))}.bind(this),f=function(a){if(a!=null){a=JSON.parse(a.payload.response);this.emit(b("ResumableUploadServiceState.enum").SUCCESS,a.h)}else this.emit(b("ResumableUploadServiceState.enum").FAIL,"uploading failed")}.bind(this),g=function(a){return this.emit(b("ResumableUploadServiceState.enum").FAIL,a)}.bind(this);return c().then(e,g).then(f,g)};a.prototype.cancel=function(){this.uploadAsyncRequest&&this.uploadAsyncRequest.abort(),this.emit(b("ResumableUploadServiceState.enum").CANCEL)};a.prototype.decorateRequestFlowCaptureHeader=function(a){this.flowCaptureHeaderValue&&a.setRequestHeader("X-Fb-Flow-Capture",String(this.flowCaptureHeaderValue))};e.exports=a}),null);
__d("VideoUploadConnectionMonitor",["ArbiterMixin","Network","VideoUploadFeatureDetector","debounce","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;function a(){"use strict";g.constructor.call(this),this.$VideoUploadConnectionMonitor1=!1,this.$VideoUploadConnectionMonitor2=[],this.$VideoUploadConnectionMonitor3=!1,this.$VideoUploadConnectionMonitor4=!0,this.$VideoUploadConnectionMonitor5=b("debounce")(function(){this.$VideoUploadConnectionMonitor6(!1)}.bind(this),2e3)}a.prototype.notifyStart=function(){"use strict";if(this.$VideoUploadConnectionMonitor3)return;this.$VideoUploadConnectionMonitor2.length===0&&(this.$VideoUploadConnectionMonitor2.push(b("Network").addListener("online",function(){this.$VideoUploadConnectionMonitor6(!0)}.bind(this))),this.$VideoUploadConnectionMonitor2.push(b("Network").addListener("offline",function(){this.$VideoUploadConnectionMonitor1?this.$VideoUploadConnectionMonitor5():(this.$VideoUploadConnectionMonitor5.reset(),setTimeout(this.$VideoUploadConnectionMonitor5,2e3))}.bind(this))));this.$VideoUploadConnectionMonitor3=!0};a.prototype.notifyProgress=function(a){"use strict";if(!this.$VideoUploadConnectionMonitor3)return;if(!a)return;b("VideoUploadFeatureDetector").supportsFullProgress()&&(this.$VideoUploadConnectionMonitor1=!0,a.total&&a.loaded===a.total?this.$VideoUploadConnectionMonitor5.reset():this.$VideoUploadConnectionMonitor5())};a.prototype.notifySuccess=function(){"use strict";if(!this.$VideoUploadConnectionMonitor3)return;this.reset();this.$VideoUploadConnectionMonitor6(!0)};a.prototype.notifyTransportError=function(){"use strict";if(!this.$VideoUploadConnectionMonitor3)return;this.$VideoUploadConnectionMonitor3=!1;this.$VideoUploadConnectionMonitor6(!1)};a.prototype.notifyError=function(){"use strict";if(!this.$VideoUploadConnectionMonitor3)return;this.reset();this.$VideoUploadConnectionMonitor6(!0)};a.prototype.isOnline=function(){"use strict";return this.$VideoUploadConnectionMonitor4};a.prototype.reset=function(){"use strict";while(this.$VideoUploadConnectionMonitor2.length)this.$VideoUploadConnectionMonitor2.pop().remove();this.$VideoUploadConnectionMonitor5.reset();this.$VideoUploadConnectionMonitor3=!1};a.prototype.$VideoUploadConnectionMonitor6=function(a){"use strict";this.$VideoUploadConnectionMonitor5.reset(),this.$VideoUploadConnectionMonitor4!==a&&(this.$VideoUploadConnectionMonitor4=a,this.$VideoUploadConnectionMonitor4?this.inform("online"):this.inform("offline"))};e.exports=a}),null);
__d("VideoUploadReceiveRequestManager",["fbt","ArbiterMixin","ResumableUploadAsyncService","ResumableUploadService","ResumableUploadServiceState.enum","VideoUploadConnectionMonitor","VideoUploadRequest","md5","mixin"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=1363037;c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));h=c&&c.prototype;function a(a,c,d,e,f,g,i,j,k,l,m,n,o,p,q,r,s,t,u){m===void 0&&(m=""),n===void 0&&(n=!1),o===void 0&&(o=!1),p===void 0&&(p=null),q===void 0&&(q=null),r===void 0&&(r=0),s===void 0&&(s=!1),t===void 0&&(t=!1),u===void 0&&(u=!1),h.constructor.call(this),this.$VideoUploadReceiveRequestManager1=a,this.$VideoUploadReceiveRequestManager2=c,this.$VideoUploadReceiveRequestManager3=d!=null?d:0,this.$VideoUploadReceiveRequestManager4=e,this.$VideoUploadReceiveRequestManager5=f,this.$VideoUploadReceiveRequestManager6=g,this.$VideoUploadReceiveRequestManager7=i,this.$VideoUploadReceiveRequestManager8=j,this.$VideoUploadReceiveRequestManager9=k,this.$VideoUploadReceiveRequestManager10=l,this.$VideoUploadReceiveRequestManager11=0,this.$VideoUploadReceiveRequestManager12=0,this.$VideoUploadReceiveRequestManager13=0,this.$VideoUploadReceiveRequestManager14=null,this.$VideoUploadReceiveRequestManager15=null,this.$VideoUploadReceiveRequestManager16=0,this.$VideoUploadReceiveRequestManager17="constructed",this.$VideoUploadReceiveRequestManager18=null,this.$VideoUploadReceiveRequestManager19=m,this.$VideoUploadReceiveRequestManager20=o,this.$VideoUploadReceiveRequestManager21=n,this.$VideoUploadReceiveRequestManager22=p,this.$VideoUploadReceiveRequestManager23=!1,this.$VideoUploadReceiveRequestManager24=s,this.$VideoUploadReceiveRequestManager25=r,this.$VideoUploadReceiveRequestManager26=t,this.$VideoUploadReceiveRequestManager27=q,this.$VideoUploadReceiveRequestManager28=u,this.$VideoUploadReceiveRequestManager29=null,this.$VideoUploadReceiveRequestManager30=null,this.$VideoUploadReceiveRequestManager31=!1,this.$VideoUploadReceiveRequestManager32=new(b("VideoUploadConnectionMonitor"))(),this.$VideoUploadReceiveRequestManager32.subscribe("online",this.$VideoUploadReceiveRequestManager33.bind(this)),this.$VideoUploadReceiveRequestManager32.subscribe("offline",this.$VideoUploadReceiveRequestManager34.bind(this))}a.prototype.updateVideoID=function(a){"use strict";if(this.$VideoUploadReceiveRequestManager35.getVideoID())return;this.$VideoUploadReceiveRequestManager35.setVideoID(a);this.$VideoUploadReceiveRequestManager36&&this.$VideoUploadReceiveRequestManager36.setData(this.__createRequestData(this.$VideoUploadReceiveRequestManager35));this.$VideoUploadReceiveRequestManager37()};a.prototype.isResumabilityEnabled=function(){"use strict";return this.$VideoUploadReceiveRequestManager21};a.prototype.isResumableServiceProxyReceiveEnabled=function(){"use strict";return this.$VideoUploadReceiveRequestManager24};a.prototype.sendRequest=function(a){"use strict";this.$VideoUploadReceiveRequestManager17="sending request";if(this.$VideoUploadReceiveRequestManager36){this.$VideoUploadReceiveRequestManager17="request already in progress";return}this.$VideoUploadReceiveRequestManager16=a.getEndOffset()-a.getStartOffset();this.$VideoUploadReceiveRequestManager35=a;this.$VideoUploadReceiveRequestManager38()};a.prototype.cancelRequest=function(){"use strict";if(!this.$VideoUploadReceiveRequestManager36)return;this.$VideoUploadReceiveRequestManager36.abort();this.$VideoUploadReceiveRequestManager18!==null&&this.$VideoUploadReceiveRequestManager18.cancel();this.$VideoUploadReceiveRequestManager39()};a.prototype.appendStateLogData=function(a,b){"use strict";a[b+"request_manager_state"]=this.$VideoUploadReceiveRequestManager17,a[b+"upload_speed"]=this.$VideoUploadReceiveRequestManager15,a[b+"transport_retries"]=this.$VideoUploadReceiveRequestManager11,a[b+"server_retries"]=this.$VideoUploadReceiveRequestManager12,a[b+"timeout_retries"]=this.$VideoUploadReceiveRequestManager13,a[b+"last_timeout_value"]=this.$VideoUploadReceiveRequestManager40,a[b+"last_request_start_time"]=this.$VideoUploadReceiveRequestManager14,a[b+"pending_request"]=this.$VideoUploadReceiveRequestManager36!=null,a[b+"pending_timer"]=this.$VideoUploadReceiveRequestManager41!=null,a[b+"cached_chunk"]=this.$VideoUploadReceiveRequestManager42!=null,a[b+"early_receive_start"]=this.$VideoUploadReceiveRequestManager31,this.$VideoUploadReceiveRequestManager35!=null&&(a[b+"start_offset"]=this.$VideoUploadReceiveRequestManager35.getStartOffset(),a[b+"end_offset"]=this.$VideoUploadReceiveRequestManager35.getEndOffset(),a[b+"partition_start_offset"]=this.$VideoUploadReceiveRequestManager35.getPartitionStartOffset(),a[b+"partition_end_offset"]=this.$VideoUploadReceiveRequestManager35.getPartitionEndOffset()),this.$VideoUploadReceiveRequestManager32!=null&&(a[b+"connection_monitor_online"]=this.$VideoUploadReceiveRequestManager32.isOnline())};a.prototype.$VideoUploadReceiveRequestManager39=function(){"use strict";this.$VideoUploadReceiveRequestManager36=null,this.$VideoUploadReceiveRequestManager42=null,this.$VideoUploadReceiveRequestManager11=0,this.$VideoUploadReceiveRequestManager12=0,this.$VideoUploadReceiveRequestManager13=0,this.$VideoUploadReceiveRequestManager14=null,this.$VideoUploadReceiveRequestManager15=null,this.$VideoUploadReceiveRequestManager16=0,this.$VideoUploadReceiveRequestManager29=null,this.$VideoUploadReceiveRequestManager30=null,this.$VideoUploadReceiveRequestManager31=!1,this.$VideoUploadReceiveRequestManager23=!1,this.$VideoUploadReceiveRequestManager35.reset(),this.$VideoUploadReceiveRequestManager32.reset(),clearTimeout(this.$VideoUploadReceiveRequestManager41),this.$VideoUploadReceiveRequestManager41=null};a.prototype.$VideoUploadReceiveRequestManager38=function(a){"use strict";__p&&__p();clearTimeout(this.$VideoUploadReceiveRequestManager41);this.$VideoUploadReceiveRequestManager41=null;if(this.$VideoUploadReceiveRequestManager35.getSupportsChunking()&&this.$VideoUploadReceiveRequestManager35.getStartOffset()>=this.$VideoUploadReceiveRequestManager35.getPartitionEndOffset()){!a?(this.inform("request-finished",{start_offset:this.$VideoUploadReceiveRequestManager35.getEndOffset()-1,end_offset:this.$VideoUploadReceiveRequestManager35.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager11,server_retries:this.$VideoUploadReceiveRequestManager12,upload_speed:this.$VideoUploadReceiveRequestManager15,request_manager_state:this.$VideoUploadReceiveRequestManager17}),this.$VideoUploadReceiveRequestManager17="request finished - notified"):this.$VideoUploadReceiveRequestManager17="request finished - not notified";return}this.$VideoUploadReceiveRequestManager36=this.__getVideoUploadRequest(this.$VideoUploadReceiveRequestManager1).setAllowCrossOrigin(!0).setData(this.__createRequestData(this.$VideoUploadReceiveRequestManager35)).setWaterfallID(this.$VideoUploadReceiveRequestManager35.getWaterfallID()).setSuccessHandler(this.__handleSuccessResponse.bind(this)).setErrorHandler(this.__handleServerFailureResponse.bind(this)).setTransportErrorHandler(this.$VideoUploadReceiveRequestManager43.bind(this));this.$VideoUploadReceiveRequestManager21||this.$VideoUploadReceiveRequestManager36.setUploadProgressHandler(this.$VideoUploadReceiveRequestManager44.bind(this));this.$VideoUploadReceiveRequestManager14=Date.now();if(this.$VideoUploadReceiveRequestManager35.getSupportsChunking()){if(this.$VideoUploadReceiveRequestManager5){a=this.$VideoUploadReceiveRequestManager45(this.$VideoUploadReceiveRequestManager35.getEndOffset()-this.$VideoUploadReceiveRequestManager35.getStartOffset(),this.$VideoUploadReceiveRequestManager15);this.$VideoUploadReceiveRequestManager36.setTimeoutHandler(a,this.__handleResponseTimeout.bind(this));this.$VideoUploadReceiveRequestManager17="sending chunk with timeout = "+a;this.$VideoUploadReceiveRequestManager40=a}else this.$VideoUploadReceiveRequestManager17="sending chunk without timeout";a=this.$VideoUploadReceiveRequestManager46();this.$VideoUploadReceiveRequestManager21&&this.$VideoUploadReceiveRequestManager25<this.$VideoUploadReceiveRequestManager35.getFile().getSize()?this.$VideoUploadReceiveRequestManager47(a):this.$VideoUploadReceiveRequestManager36.sendChunk(a)}else this.$VideoUploadReceiveRequestManager17="sending file",this.$VideoUploadReceiveRequestManager36.sendFile(this.$VideoUploadReceiveRequestManager35.getFile().getFileInput());this.$VideoUploadReceiveRequestManager32.notifyStart();this.inform("request-started",{start_offset:this.$VideoUploadReceiveRequestManager35.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager35.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager11,server_retries:this.$VideoUploadReceiveRequestManager12,upload_speed:this.$VideoUploadReceiveRequestManager15,request_manager_state:this.$VideoUploadReceiveRequestManager17})};a.prototype.$VideoUploadReceiveRequestManager48=function(a,b){"use strict";!this.$VideoUploadReceiveRequestManager35.getVideoID()?(this.$VideoUploadReceiveRequestManager29=a,this.$VideoUploadReceiveRequestManager30=b):a(b)};a.prototype.$VideoUploadReceiveRequestManager37=function(){"use strict";this.$VideoUploadReceiveRequestManager29&&(this.$VideoUploadReceiveRequestManager29(this.$VideoUploadReceiveRequestManager30),this.$VideoUploadReceiveRequestManager29=null,this.$VideoUploadReceiveRequestManager30=null)};a.prototype.$VideoUploadReceiveRequestManager47=function(a){"use strict";__p&&__p();var c=this.$VideoUploadReceiveRequestManager35.getFile();c=c.getFile().lastModified+c.getFile().name+c.getFile().type+this.$VideoUploadReceiveRequestManager49();c=b("md5")(c)+"-"+this.$VideoUploadReceiveRequestManager35.getStartOffset()+"-"+this.$VideoUploadReceiveRequestManager35.getEndOffset();this.isResumabilityEnabled()&&this.$VideoUploadReceiveRequestManager22&&this.$VideoUploadReceiveRequestManager11>this.$VideoUploadReceiveRequestManager2/3&&(this.$VideoUploadReceiveRequestManager23=!0);var d="fb_video",e=null;if(this.$VideoUploadReceiveRequestManager24){d="fb_video2";var f={start_offset:this.$VideoUploadReceiveRequestManager35.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager35.getEndOffset(),composer_session_id:this.$VideoUploadReceiveRequestManager35.getWaterfallID(),upload_session_id:this.$VideoUploadReceiveRequestManager35.getUploadSessionID(),fb_region:this.$VideoUploadReceiveRequestManager35.getFbRegion()};e=f}f=this.$VideoUploadReceiveRequestManager20?b("ResumableUploadAsyncService"):b("ResumableUploadService");this.$VideoUploadReceiveRequestManager18=new f(d,this.$VideoUploadReceiveRequestManager19,c,null,null,this.$VideoUploadReceiveRequestManager23?null:this.$VideoUploadReceiveRequestManager22,e,this.$VideoUploadReceiveRequestManager28?this.$VideoUploadReceiveRequestManager35.getWaterfallID():null);this.$VideoUploadReceiveRequestManager50();this.$VideoUploadReceiveRequestManager18.resume(a);this.inform("resumable-called")};a.prototype.$VideoUploadReceiveRequestManager50=function(){"use strict";__p&&__p();this.$VideoUploadReceiveRequestManager35.getVideoID()||(this.$VideoUploadReceiveRequestManager31=!0),this.$VideoUploadReceiveRequestManager18.addListener(b("ResumableUploadServiceState.enum").START,function(a){this.inform("resumable-started",{resume_from_offset:a.offset})}.bind(this)),this.$VideoUploadReceiveRequestManager51=function(a){this.inform("resumable-failed",{error_code:a.getError(),error_description:a.getErrorDescription(),error_summary:a.getErrorSummary(),error_is_transient:a.isTransient()}),this.__handleServerFailureResponse(a)}.bind(this),this.$VideoUploadReceiveRequestManager18.addListener(b("ResumableUploadServiceState.enum").FAIL,function(a){this.$VideoUploadReceiveRequestManager48(this.$VideoUploadReceiveRequestManager51,a)}.bind(this)),this.$VideoUploadReceiveRequestManager52=function(a){!this.$VideoUploadReceiveRequestManager24?(this.$VideoUploadReceiveRequestManager36.setHandle(a),this.$VideoUploadReceiveRequestManager36.sendChunk(null)):this.__handleSuccessResponsePayload({start_offset:this.$VideoUploadReceiveRequestManager35.getEndOffset(),end_offset:this.$VideoUploadReceiveRequestManager35.getPartitionEndOffset()}),this.inform("resumable-success",{everstore_handle:a})}.bind(this),this.$VideoUploadReceiveRequestManager18.addListener(b("ResumableUploadServiceState.enum").SUCCESS,function(a){this.$VideoUploadReceiveRequestManager48(this.$VideoUploadReceiveRequestManager52,a)}.bind(this)),this.$VideoUploadReceiveRequestManager53=function(a){this.inform("resumable-failed",{error_code:a.getError(),error_description:a.getErrorDescription(),error_summary:a.getErrorSummary(),error_is_transient:a.isTransient()}),this.$VideoUploadReceiveRequestManager43(a)}.bind(this),this.$VideoUploadReceiveRequestManager18.addListener(b("ResumableUploadServiceState.enum").TRANSPORT_FAILURE,function(a){this.$VideoUploadReceiveRequestManager48(this.$VideoUploadReceiveRequestManager53,a)}.bind(this)),this.$VideoUploadReceiveRequestManager18.addListener(b("ResumableUploadServiceState.enum").PROGRESS,function(a){this.$VideoUploadReceiveRequestManager26&&(this.$VideoUploadReceiveRequestManager11=0),this.$VideoUploadReceiveRequestManager44(a)}.bind(this))};a.prototype.__getVideoUploadRequest=function(a){"use strict";return new(b("VideoUploadRequest"))(a)};a.prototype.$VideoUploadReceiveRequestManager54=function(a){"use strict";this.$VideoUploadReceiveRequestManager17="setting request to send after"+a,clearTimeout(this.$VideoUploadReceiveRequestManager41),this.$VideoUploadReceiveRequestManager41=setTimeout(this.$VideoUploadReceiveRequestManager38.bind(this),a)};a.prototype.$VideoUploadReceiveRequestManager46=function(){"use strict";if(this.$VideoUploadReceiveRequestManager42)return this.$VideoUploadReceiveRequestManager42;this.$VideoUploadReceiveRequestManager21?this.$VideoUploadReceiveRequestManager42=this.$VideoUploadReceiveRequestManager35.getFile().getFile().slice(this.$VideoUploadReceiveRequestManager35.getStartOffset(),this.$VideoUploadReceiveRequestManager35.getEndOffset(),"application/octet-stream"):this.$VideoUploadReceiveRequestManager42=this.$VideoUploadReceiveRequestManager35.getFile().getChunk(this.$VideoUploadReceiveRequestManager35.getStartOffset(),this.$VideoUploadReceiveRequestManager35.getEndOffset());return this.$VideoUploadReceiveRequestManager42};a.prototype.__createRequestData=function(a){"use strict";return{video_id:a.getVideoID(),start_offset:a.getStartOffset(),end_offset:a.getEndOffset(),source:a.getSource(),target_id:a.getTargetID(),waterfall_id:a.getWaterfallID(),composer_entry_point_ref:a.getComposerEntryPointRef&&a.getComposerEntryPointRef(),composer_dialog_version:a.getComposerDialogVersion(),has_file_been_replaced:a.getHasFileBeenReplaced(),supports_chunking:a.getSupportsChunking(),upload_speed:this.$VideoUploadReceiveRequestManager15,partition_start_offset:a.getPartitionStartOffset(),partition_end_offset:a.getPartitionEndOffset()}};a.prototype.__handleSuccessResponse=function(a){"use strict";a=a.getPayload();this.__handleSuccessResponsePayload(a)};a.prototype.__handleSuccessResponsePayload=function(a){"use strict";__p&&__p();this.$VideoUploadReceiveRequestManager17="success response received";var b=Date.now()-this.$VideoUploadReceiveRequestManager14;b=b===0?1:b;if(a.start_offset===this.$VideoUploadReceiveRequestManager35.getEndOffset()){var c=this.$VideoUploadReceiveRequestManager35.getEndOffset()-this.$VideoUploadReceiveRequestManager35.getStartOffset();this.$VideoUploadReceiveRequestManager15=Math.floor(c/b)}else this.$VideoUploadReceiveRequestManager15=null;this.$VideoUploadReceiveRequestManager32.notifySuccess();this.inform("request-finished",{start_offset:this.$VideoUploadReceiveRequestManager35.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager35.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager11,server_retries:this.$VideoUploadReceiveRequestManager12,upload_speed:this.$VideoUploadReceiveRequestManager15,request_manager_state:this.$VideoUploadReceiveRequestManager17});this.$VideoUploadReceiveRequestManager35.setStartOffset(a.start_offset);c=a.end_offset;this.$VideoUploadReceiveRequestManager35.getClientChunkSize()&&(c=a.start_offset+Math.min(this.$VideoUploadReceiveRequestManager35.getPartitionEndOffset()-a.start_offset,this.$VideoUploadReceiveRequestManager35.getClientChunkSize()));this.$VideoUploadReceiveRequestManager35.setEndOffset(c);this.$VideoUploadReceiveRequestManager35.setLastKnownUploadSpeed(this.$VideoUploadReceiveRequestManager15);this.$VideoUploadReceiveRequestManager36=null;this.$VideoUploadReceiveRequestManager42=null;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager12=0;this.$VideoUploadReceiveRequestManager13=0;this.$VideoUploadReceiveRequestManager35.getSupportsChunking()&&this.$VideoUploadReceiveRequestManager38(!0)};a.prototype.__handleServerFailureResponse=function(a){"use strict";__p&&__p();this.$VideoUploadReceiveRequestManager17="failure response received";this.$VideoUploadReceiveRequestManager36=null;this.$VideoUploadReceiveRequestManager11=0;this.$VideoUploadReceiveRequestManager15=null;this.$VideoUploadReceiveRequestManager13=0;this.$VideoUploadReceiveRequestManager32.notifyError();if(this.__hasInvalidStartOffsetAndHasRetries(a.getError())){this.$VideoUploadReceiveRequestManager12++;var b=a.getPayload();this.$VideoUploadReceiveRequestManager17="invalid offset response received start="+b.start_offset+" end="+b.end_offset;(this.$VideoUploadReceiveRequestManager35.getStartOffset()!=b.start_offset||this.$VideoUploadReceiveRequestManager35.getEndOffset()!=b.end_offset)&&(this.$VideoUploadReceiveRequestManager35.setStartOffset(b.start_offset),this.$VideoUploadReceiveRequestManager35.setEndOffset(b.end_offset),this.$VideoUploadReceiveRequestManager42=null);this.$VideoUploadReceiveRequestManager38()}else(a.isTransient()||this.$VideoUploadReceiveRequestManager10)&&this.$VideoUploadReceiveRequestManager12<this.$VideoUploadReceiveRequestManager4?(this.$VideoUploadReceiveRequestManager17="transient server error",this.$VideoUploadReceiveRequestManager12++,this.$VideoUploadReceiveRequestManager54(this.$VideoUploadReceiveRequestManager55(this.$VideoUploadReceiveRequestManager9,this.$VideoUploadReceiveRequestManager12,0))):this.$VideoUploadReceiveRequestManager56(a)};a.prototype.__handleResponseTimeout=function(a){"use strict";__p&&__p();this.inform("request-timeout",{start_offset:this.$VideoUploadReceiveRequestManager35.getStartOffset(),end_offset:this.$VideoUploadReceiveRequestManager35.getEndOffset(),transport_retries:this.$VideoUploadReceiveRequestManager11,server_retries:this.$VideoUploadReceiveRequestManager12,timeout_retries:this.$VideoUploadReceiveRequestManager13,upload_speed:this.$VideoUploadReceiveRequestManager15,request_manager_state:this.$VideoUploadReceiveRequestManager17});this.$VideoUploadReceiveRequestManager36.abort();this.$VideoUploadReceiveRequestManager36=null;this.$VideoUploadReceiveRequestManager15=null;this.$VideoUploadReceiveRequestManager32.notifyTransportError();if(++this.$VideoUploadReceiveRequestManager13<=this.$VideoUploadReceiveRequestManager6){a=this.$VideoUploadReceiveRequestManager35.getEndOffset()-this.$VideoUploadReceiveRequestManager35.getStartOffset();a=Math.floor(a/2);a=Math.max(a,this.$VideoUploadReceiveRequestManager16);var b=this.$VideoUploadReceiveRequestManager35.getEndOffset();b=Math.min(b,this.$VideoUploadReceiveRequestManager35.getStartOffset()+a);this.$VideoUploadReceiveRequestManager35.setEndOffset(b);this.$VideoUploadReceiveRequestManager42=null;this.$VideoUploadReceiveRequestManager17="resending after timeout with chunksize="+a;this.$VideoUploadReceiveRequestManager38()}else this.$VideoUploadReceiveRequestManager57({error_code:1006,error_description:g._("Your browser appears to be offline. Please check your internet connection and try again."),error_summary:g._("No Network Connection"),error_is_transient:!0})};a.prototype.__hasInvalidStartOffsetAndHasRetries=function(a){"use strict";return a===i&&this.$VideoUploadReceiveRequestManager12<this.$VideoUploadReceiveRequestManager4};a.prototype.$VideoUploadReceiveRequestManager43=function(a){"use strict";this.$VideoUploadReceiveRequestManager32.notifyTransportError(),this.$VideoUploadReceiveRequestManager15=null,this.$VideoUploadReceiveRequestManager13=0,this.$VideoUploadReceiveRequestManager11<this.$VideoUploadReceiveRequestManager2?(this.$VideoUploadReceiveRequestManager17="resending after transport failure",this.$VideoUploadReceiveRequestManager11++,this.$VideoUploadReceiveRequestManager36=null,this.$VideoUploadReceiveRequestManager54(this.$VideoUploadReceiveRequestManager55(this.$VideoUploadReceiveRequestManager8,this.$VideoUploadReceiveRequestManager11,this.$VideoUploadReceiveRequestManager3))):this.$VideoUploadReceiveRequestManager56(a)};a.prototype.$VideoUploadReceiveRequestManager56=function(a){"use strict";this.$VideoUploadReceiveRequestManager57({error_code:a.getError(),error_description:a.getErrorDescription(),error_summary:a.getErrorSummary(),error_is_transient:a.isTransient()})};a.prototype.$VideoUploadReceiveRequestManager57=function(a){"use strict";this.$VideoUploadReceiveRequestManager17="handling failure error",this.inform("request-failed",a),this.$VideoUploadReceiveRequestManager39()};a.prototype.$VideoUploadReceiveRequestManager44=function(a){"use strict";this.$VideoUploadReceiveRequestManager32.notifyProgress(a),this.$VideoUploadReceiveRequestManager35&&this.$VideoUploadReceiveRequestManager35.getFile()&&this.inform("request-progressed",{file_size:this.$VideoUploadReceiveRequestManager35.getFile().getSize(),start_offset:this.$VideoUploadReceiveRequestManager35.getStartOffset(),sent_bytes:a.loaded,transport_retries:this.$VideoUploadReceiveRequestManager11})};a.prototype.$VideoUploadReceiveRequestManager33=function(a){"use strict";this.inform("online"),this.$VideoUploadReceiveRequestManager11=0,this.$VideoUploadReceiveRequestManager13=0,this.$VideoUploadReceiveRequestManager41&&this.$VideoUploadReceiveRequestManager38()};a.prototype.$VideoUploadReceiveRequestManager34=function(a){"use strict";this.inform("offline")};a.prototype.$VideoUploadReceiveRequestManager55=function(a,b,c){"use strict";var d;this.$VideoUploadReceiveRequestManager21?d=Math.min(Math.pow(a,b),8)*1e3:d=Math.pow(a,b)*1e3;c>0&&(d=Math.min(d,c));return d};a.prototype.$VideoUploadReceiveRequestManager45=function(a,b){"use strict";b>0?b=b:b=10;a=Math.floor(a/b*this.$VideoUploadReceiveRequestManager7/100);return Math.max(a,3e4)};a.prototype.$VideoUploadReceiveRequestManager49=function(){"use strict";return this.$VideoUploadReceiveRequestManager27?this.$VideoUploadReceiveRequestManager27:this.$VideoUploadReceiveRequestManager35.getWaterfallID()};e.exports=a}),null);
__d("VideoUploadRequestContext",[],(function(a,b,c,d,e,f){__p&&__p();function a(){"use strict";this.reset()}a.prototype.setFile=function(a){"use strict";this.$1=a;return this};a.prototype.getFile=function(){"use strict";return this.$1};a.prototype.setMetadata=function(a){"use strict";this.$2=a;return this};a.prototype.getMetadata=function(){"use strict";return this.$2};a.prototype.setVideoID=function(a){"use strict";this.$3=a;return this};a.prototype.getVideoID=function(){"use strict";return this.$3};a.prototype.setUploadSessionID=function(a){"use strict";this.$4=a;return this};a.prototype.getUploadSessionID=function(){"use strict";return this.$4};a.prototype.setFbRegion=function(a){"use strict";this.$5=a;return this};a.prototype.getFbRegion=function(){"use strict";return this.$5};a.prototype.setStartOffset=function(a){"use strict";this.$6=a;return this};a.prototype.getStartOffset=function(){"use strict";return this.$6};a.prototype.setEndOffset=function(a){"use strict";this.$7=a;return this};a.prototype.getEndOffset=function(){"use strict";return this.$7};a.prototype.setPartitionStartOffset=function(a){"use strict";this.$8=a;return this};a.prototype.getPartitionStartOffset=function(){"use strict";return this.$8};a.prototype.setPartitionEndOffset=function(a){"use strict";this.$9=a;return this};a.prototype.getPartitionEndOffset=function(){"use strict";return this.$9};a.prototype.setTargetID=function(a){"use strict";this.$10=a;return this};a.prototype.getTargetID=function(){"use strict";return this.$10};a.prototype.setSource=function(a){"use strict";this.$11=a;return this};a.prototype.setComposerDialogVersion=function(a){"use strict";this.$12=a;return this};a.prototype.getComposerDialogVersion=function(){"use strict";return this.$12};a.prototype.getSource=function(){"use strict";return this.$11};a.prototype.setWaterfallID=function(a){"use strict";this.$13=a;return this};a.prototype.getWaterfallID=function(){"use strict";return this.$13};a.prototype.setComposerEntryPointRef=function(a){"use strict";this.$14=a};a.prototype.getComposerEntryPointRef=function(){"use strict";return this.$14};a.prototype.setHasFileBeenReplaced=function(a){"use strict";this.$15=a;return this};a.prototype.getHasFileBeenReplaced=function(){"use strict";return this.$15};a.prototype.setSupportsChunking=function(a){"use strict";this.$16=a;return this};a.prototype.getSupportsChunking=function(){"use strict";return this.$16};a.prototype.setSupportsFileAPI=function(a){"use strict";this.$17=a;return this};a.prototype.getSupportsFileAPI=function(){"use strict";return this.$17};a.prototype.setCreatorProduct=function(a){"use strict";this.$18=a;return this};a.prototype.getCreatorProduct=function(){"use strict";return this.$18};a.prototype.setLastKnownUploadSpeed=function(a){"use strict";this.$19=a};a.prototype.getLastKnownUploadSpeed=function(){"use strict";return this.$19||0};a.prototype.setUseParallelChunks=function(a){"use strict";this.$20=a};a.prototype.getUseParallelChunks=function(){"use strict";return this.$20};a.prototype.setIsSphericalVideo=function(a){"use strict";this.$21=a};a.prototype.getIsSphericalVideo=function(){"use strict";return this.$21};a.prototype.setSphericalMetadata=function(a){"use strict";this.$22=a};a.prototype.getSphericalMetadata=function(){"use strict";return this.$22};a.prototype.setEnableOmnistab=function(a){"use strict";this.$23=a};a.prototype.getEnableOmnistab=function(){"use strict";return this.$23};a.prototype.setClientChunkSize=function(a){"use strict";this.$24=a};a.prototype.getClientChunkSize=function(){"use strict";return this.$24};a.prototype.reset=function(){"use strict";this.$1=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$10=null,this.$11=null,this.$12=null,this.$13=null,this.$14=null,this.$15=!1,this.$16=null,this.$17=null,this.$8=null,this.$9=null,this.$18=null,this.$19=0,this.$20=!1,this.$21=!1,this.$2={},this.$22={},this.$23=!1,this.$24=null};e.exports=a}),null);
__d("VideoUploadStartRequestManager",["ArbiterMixin","Assert","FileHasher","VideoUploadRequest","mixin","performanceNow"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;function a(a,b,c,d,e,f,h,i){"use strict";g.constructor.call(this),this.$VideoUploadStartRequestManager1=a,this.$VideoUploadStartRequestManager2=b,this.$VideoUploadStartRequestManager3=c,this.$VideoUploadStartRequestManager4=d,this.$VideoUploadStartRequestManager5=0,this.$VideoUploadStartRequestManager6=e,this.$VideoUploadStartRequestManager7=f,this.$VideoUploadStartRequestManager8=h,this.$VideoUploadStartRequestManager9=i,this.$VideoUploadStartRequestManager10=0}a.prototype.getRequest=function(){"use strict";return this.$VideoUploadStartRequestManager11};a.prototype.sendRequest=function(a){"use strict";if(this.$VideoUploadStartRequestManager12||this.$VideoUploadStartRequestManager11)return;this.$VideoUploadStartRequestManager13=a;this.$VideoUploadStartRequestManager6&&this.$VideoUploadStartRequestManager13.getFile().getFile()&&this.$VideoUploadStartRequestManager13.getFile().getFile().size<this.$VideoUploadStartRequestManager7&&b("FileHasher").isSupported()?(this.$VideoUploadStartRequestManager14=b("performanceNow")(),this.$VideoUploadStartRequestManager12=new(b("FileHasher"))(),this.$VideoUploadStartRequestManager12.hash(this.$VideoUploadStartRequestManager13.getFile().getFile(),function(a){this.$VideoUploadStartRequestManager14=b("performanceNow")()-this.$VideoUploadStartRequestManager14,this.$VideoUploadStartRequestManager15=a.hash,this.$VideoUploadStartRequestManager12.destroy(),this.$VideoUploadStartRequestManager12=null,a.hash||(this.$VideoUploadStartRequestManager16=a.exception),this.$VideoUploadStartRequestManager17()}.bind(this))):this.$VideoUploadStartRequestManager17()};a.prototype.$VideoUploadStartRequestManager17=function(){"use strict";this.$VideoUploadStartRequestManager18(),this.inform("request-started",{hash_time:this.$VideoUploadStartRequestManager14,hash_exception:this.$VideoUploadStartRequestManager16})};a.prototype.$VideoUploadStartRequestManager18=function(){"use strict";clearTimeout(this.$VideoUploadStartRequestManager19),this.$VideoUploadStartRequestManager19=null,this.$VideoUploadStartRequestManager11=this.__getVideoUploadRequest(this.$VideoUploadStartRequestManager1).setAllowCrossOrigin(!0).setData(this.__getDataToSend(this.$VideoUploadStartRequestManager13,this.$VideoUploadStartRequestManager15)).setWaterfallID(this.$VideoUploadStartRequestManager13.getWaterfallID()).setSuccessHandler(this.$VideoUploadStartRequestManager20.bind(this)).setErrorHandler(this.$VideoUploadStartRequestManager21.bind(this)).setTransportErrorHandler(this.$VideoUploadStartRequestManager22.bind(this)),this.$VideoUploadStartRequestManager11.send()};a.prototype.__getVideoUploadRequest=function(a){"use strict";return new(b("VideoUploadRequest"))(a)};a.prototype.__getDataToSend=function(a,b){"use strict";return{file_size:a.getFile().getSize(),file_extension:a.getFile().getExtension(),target_id:a.getTargetID(),source:a.getSource(),composer_dialog_version:a.getComposerDialogVersion(),waterfall_id:a.getWaterfallID(),composer_entry_point_ref:a.getComposerEntryPointRef&&a.getComposerEntryPointRef(),has_file_been_replaced:a.getHasFileBeenReplaced(),supports_chunking:a.getSupportsChunking(),supports_file_api:a.getSupportsFileAPI(),partition_start_offset:a.getPartitionStartOffset(),partition_end_offset:a.getPartitionEndOffset(),creator_product:a.getCreatorProduct(),original_file_hash:b,spherical:a.getIsSphericalVideo(),spherical_metadata:a.getSphericalMetadata()}};a.prototype.cancelRequest=function(){"use strict";this.$VideoUploadStartRequestManager23()};a.prototype.$VideoUploadStartRequestManager24=function(a){"use strict";clearTimeout(this.$VideoUploadStartRequestManager19),this.$VideoUploadStartRequestManager19=setTimeout(this.$VideoUploadStartRequestManager18.bind(this),a)};a.prototype.$VideoUploadStartRequestManager23=function(){"use strict";this.$VideoUploadStartRequestManager12&&(this.$VideoUploadStartRequestManager12.destroy(),this.$VideoUploadStartRequestManager12=null),this.$VideoUploadStartRequestManager11&&(this.$VideoUploadStartRequestManager11.abort(),this.$VideoUploadStartRequestManager11=null),this.$VideoUploadStartRequestManager10=0,this.$VideoUploadStartRequestManager5=0,this.$VideoUploadStartRequestManager13=null,clearTimeout(this.$VideoUploadStartRequestManager19),this.$VideoUploadStartRequestManager19=null};a.prototype.$VideoUploadStartRequestManager25=function(a,b,c){"use strict";a=Math.pow(a,b)*1e3;c>0&&(a=Math.min(a,c));return a};a.prototype.$VideoUploadStartRequestManager20=function(a){"use strict";a=a.getPayload();this.inform("request-finished",this.__getSuccessInformData(a));this.$VideoUploadStartRequestManager11=null;b("Assert").isTrue(this.$VideoUploadStartRequestManager12==null,"Unexpected: if file hasher is not null, clean up is required.")};a.prototype.__getSuccessInformData=function(a){"use strict";return{video_id:a.video_id,upload_session_id:a.upload_session_id,fb_region:a.region_hint,start_offset:a.start_offset,end_offset:a.end_offset,transport_retries:this.$VideoUploadStartRequestManager5,server_retries:this.$VideoUploadStartRequestManager10,skip_upload:a.skip_upload,hash_time:this.$VideoUploadStartRequestManager14}};a.prototype.$VideoUploadStartRequestManager26=function(a){"use strict";this.inform("request-failed",this.$VideoUploadStartRequestManager27(a)),this.$VideoUploadStartRequestManager11=null,b("Assert").isTrue(this.$VideoUploadStartRequestManager12==null,"Unexpected: if file hasher is not null, clean up is required.")};a.prototype.$VideoUploadStartRequestManager21=function(a){"use strict";this.$VideoUploadStartRequestManager11=null,this.$VideoUploadStartRequestManager5=0,a.isTransient()&&this.$VideoUploadStartRequestManager10<this.$VideoUploadStartRequestManager8?(this.$VideoUploadStartRequestManager10++,this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager25(this.$VideoUploadStartRequestManager9,this.$VideoUploadStartRequestManager10))):this.$VideoUploadStartRequestManager26(a)};a.prototype.$VideoUploadStartRequestManager22=function(a){"use strict";this.$VideoUploadStartRequestManager2===0||this.$VideoUploadStartRequestManager5>=this.$VideoUploadStartRequestManager2?this.$VideoUploadStartRequestManager26(a):(this.$VideoUploadStartRequestManager5++,this.$VideoUploadStartRequestManager11=null,this.$VideoUploadStartRequestManager24(this.$VideoUploadStartRequestManager25(this.$VideoUploadStartRequestManager3,this.$VideoUploadStartRequestManager5,this.$VideoUploadStartRequestManager4)))};a.prototype.$VideoUploadStartRequestManager27=function(a){"use strict";return{error_code:a.getError(),error_description:a.getErrorDescription(),error_summary:a.getErrorSummary(),transport_retries:this.$VideoUploadStartRequestManager5,server_retries:this.$VideoUploadStartRequestManager10,error_is_transient:a.isTransient()}};e.exports=a}),null);
__d("VideoUploadSession",["ArbiterMixin","AsyncRequest","VideoUploadCrashMonitor","VideoUploadFeatureDetector","VideoUploadFileValidator","VideoUploadLogger","VideoUploadMetadataParser","VideoUploadPostRequestManager","VideoUploadReceiveRequestManager","VideoUploadRequestContext","VideoUploadStartRequestManager","WaterfallIDGenerator","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g;a=babelHelpers.inherits(h,b("mixin")(b("ArbiterMixin")));g=a&&a.prototype;function h(a){"use strict";__p&&__p();g.constructor.call(this);this.$VideoUploadSession1=a.source;this.$VideoUploadSession2=a.composer_dialog_version;this.$VideoUploadSession3=a.target_id;this.$VideoUploadSession4=a.logging_delay;this.$VideoUploadSession5=a.silent_file_validation;this.$VideoUploadSession6=a.background_upload;this.$VideoUploadSession7=a.actor_id;this.$VideoUploadSession8=a.composer_entry_point_ref;this.$VideoUploadSession9=a.monitor_crashes;this.$VideoUploadSession10=a.isMultiMediaPost;this.$VideoUploadSession11=a.container_type;this.$VideoUploadSession12=a.number_of_partitions;this.$VideoUploadSession13=a.multi_partitioning_enabled;this.$VideoUploadSession14=a.change_default_chunk_size;this.$VideoUploadSession15=a.has_file_been_replaced?a.has_file_been_replaced:!1;this.$VideoUploadSession14&&(this.$VideoUploadSession16=a.client_chunk_size);this.$VideoUploadSession17=a.early_receive;this.$VideoUploadSession18=!1;this.$VideoUploadSession19=a.accept_dimensions_from_player;this.$VideoUploadSession20=new(b("VideoUploadFileValidator"))({minSize:a.min_size,maxSize:a.max_size,minLength:a.min_length,maxLength:a.max_length,minWidth:a.min_width,minHeight:a.min_height,extensions:a.extensions,source:a.source,require16to9AspectRatio:a.require_16to9_aspect_ratio,minAspectRatio:a.min_aspect_ratio,maxAspectRatio:a.max_aspect_ratio,acceptDimensionsFromPlayer:a.accept_dimensions_from_player});this.$VideoUploadSession21=b("VideoUploadFeatureDetector").supportsChunking();this.$VideoUploadSession22=b("VideoUploadFeatureDetector").supportsFileAPI();this.$VideoUploadSession21?(this.$VideoUploadSession23=a.parallel_chunk_uploads,this.$VideoUploadSession23&&(this.$VideoUploadSession24=a.parallel_chunk_upload_filesize,this.$VideoUploadSession25=a.default_chunk_size)):this.$VideoUploadSession23=!1;this.$VideoUploadSession26=this.$VideoUploadSession27(a);this.$VideoUploadSession28=this.$VideoUploadSession29(a);if(this.$VideoUploadSession23)if(this.$VideoUploadSession13){var c=0;this.$VideoUploadSession30=[];for(c=0;c<this.$VideoUploadSession12-1;c++)this.$VideoUploadSession30[c]=this.$VideoUploadSession29(a)}else this.$VideoUploadSession30=this.$VideoUploadSession29(a);this.$VideoUploadSession31=this.$VideoUploadSession32(a);this.$VideoUploadSession33=a.log_free_local_storage}h.prototype.$VideoUploadSession34=function(){"use strict";this.$VideoUploadSession35=[];this.$VideoUploadSession36=[];this.$VideoUploadSession37=[];this.$VideoUploadSession38=[];this.$VideoUploadSession39=[];var a=0;for(a=0;a<this.$VideoUploadSession40-1;a++)this.$VideoUploadSession35.push(!1)};h.prototype.$VideoUploadSession41=function(){"use strict";this.$VideoUploadSession42=b("WaterfallIDGenerator").generate(),this.$VideoUploadSession43=new(b("VideoUploadLogger"))({actor_id:this.$VideoUploadSession7,source:this.$VideoUploadSession1,composer_dialog_version:this.$VideoUploadSession2,waterfall_id:this.$VideoUploadSession42,target_id:this.$VideoUploadSession3,delay:this.$VideoUploadSession4,is_chunked_upload:this.$VideoUploadSession21,composer_entry_point_ref:this.$VideoUploadSession8,container_type:this.$VideoUploadSession11,has_file_been_replaced:this.$VideoUploadSession15}),this.inform("set-waterfall-id",{waterfallID:this.$VideoUploadSession42})};h.prototype.createTestLogger=function(){"use strict";this.$VideoUploadSession41()};h.prototype.getLogger=function(){"use strict";return!this.$VideoUploadSession43?null:this.$VideoUploadSession43};h.prototype.start=function(a){"use strict";__p&&__p();this.$VideoUploadSession44=null;this.$VideoUploadSession45=null;this.$VideoUploadSession46=null;this.$VideoUploadSession47=!1;this.$VideoUploadSession48=!1;this.$VideoUploadSession49=a;this.$VideoUploadSession50=0;this.$VideoUploadSession51=!1;this.$VideoUploadSession52={sphericalMetadataXml:null,fbSpatialAudioMetadataXml:null,ytSa3dMetadataJson:null};this.$VideoUploadSession53=!1;this.$VideoUploadSession41();this.$VideoUploadSession13&&(this.$VideoUploadSession40=Math.min(this.$VideoUploadSession12,Math.ceil(this.$VideoUploadSession49.getSize()/this.$VideoUploadSession24)));this.__logEvent(b("VideoUploadLogger").EVENT_REQUESTED_UPLOADING);this.inform("upload-requested");a=new(b("VideoUploadMetadataParser"))(this.$VideoUploadSession49,this.$VideoUploadSession54.bind(this),this.$VideoUploadSession19);a.parse();this.$VideoUploadSession33&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota(function(a,c){this.__logEvent(b("VideoUploadLogger").EVENT_MEASURE_FREE_LOCAL_STORAGE,{free_space_in_device:c})}.bind(this))};h.prototype.setTargetID=function(a){"use strict";this.$VideoUploadSession3=a};h.prototype.post=function(a){"use strict";this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_POST_REQUEST);this.inform("post-started",a);var c=this.__createPostRequestContext(a);this.$VideoUploadSession31.sendRequest(c);this.$VideoUploadSession55=a};h.prototype.__createPostRequestContext=function(a){"use strict";var c=new(b("VideoUploadRequestContext"))();this.__setupPostRequestContext(c,a);return c};h.prototype.__setupPostRequestContext=function(a,b){"use strict";a.setMetadata(b).setVideoID(this.$VideoUploadSession44).setTargetID(this.$VideoUploadSession3).setSource(this.$VideoUploadSession1).setComposerDialogVersion(this.$VideoUploadSession2).setWaterfallID(this.$VideoUploadSession42).setSupportsChunking(this.$VideoUploadSession21).setCreatorProduct(this.$VideoUploadSession49.getCreatorProduct()).setFile(this.$VideoUploadSession49).setHasFileBeenReplaced(this.$VideoUploadSession15),b&&(b.spherical&&(this.$VideoUploadSession51=!0,a.setIsSphericalVideo(this.$VideoUploadSession51)),b.enable_omnistab&&(this.$VideoUploadSession53=!0,a.setEnableOmnistab(this.$VideoUploadSession53))),a.setComposerEntryPointRef&&a.setComposerEntryPointRef(this.$VideoUploadSession8)};h.prototype.cancel=function(a){a===void 0&&(a=!1);if(this.$VideoUploadSession47){var c=this.__fetchReceiveRequestManagerStateLogData();this.$VideoUploadSession56();this.$VideoUploadSession6?(this.$VideoUploadSession48||this.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_UPLOADING),this.$VideoUploadSession57&&(this.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_FLOW,c),this.$VideoUploadSession57=!1)):(this.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_UPLOADING),this.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_FLOW,c))}else a&&this.$VideoUploadSession44&&h.deleteVideo(this.$VideoUploadSession44)};h.prototype.abandon=function(a){a===void 0&&(a=!1);if(this.$VideoUploadSession47){var c=this.__fetchReceiveRequestManagerStateLogData();this.$VideoUploadSession56();this.$VideoUploadSession6?(this.$VideoUploadSession48||this.__logEvent(b("VideoUploadLogger").EVENT_ABANDONED_UPLOADING),this.$VideoUploadSession57&&(this.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_FLOW,c),this.$VideoUploadSession57=!1)):(this.__logEvent(b("VideoUploadLogger").EVENT_ABANDONED_UPLOADING),this.__logEvent(b("VideoUploadLogger").EVENT_CANCELED_FLOW,c))}else a&&this.$VideoUploadSession44&&h.deleteVideo(this.$VideoUploadSession44)};h.prototype.isPostInProgress=function(){"use strict";return this.$VideoUploadSession31.isInProgress()};h.prototype.isInProgress=function(){"use strict";return this.$VideoUploadSession47};h.prototype.getHasUploadFinished=function(){"use strict";return this.$VideoUploadSession48};h.prototype.getVideoID=function(){"use strict";return this.$VideoUploadSession44};h.prototype.getUploadTime=function(){"use strict";return this.$VideoUploadSession58};h.prototype.getExPartitionNumber=function(a){"use strict";var b;for(b=0;b<this.$VideoUploadSession40-1;b++)if(a>=this.$VideoUploadSession36[b]&&a<this.$VideoUploadSession37[b])break;return b===this.$VideoUploadSession40?-1:b};h.prototype.startFlow=function(){"use strict";if(!this.$VideoUploadSession6||this.$VideoUploadSession57)return;this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_FLOW,{is_spherical:this.$VideoUploadSession51?"true":null});this.$VideoUploadSession57=!0;this.$VideoUploadSession59&&this.$VideoUploadSession59.flowStarted()};h.prototype.$VideoUploadSession54=function(a){"use strict";__p&&__p();var c;if(this.$VideoUploadSession5){var d=this.$VideoUploadSession20.getValidationErrorMessage(this.$VideoUploadSession49,a);d?(c={error_summary:d.summary,error_description:d.description},d=!1):d=!0}else d=this.$VideoUploadSession20.validate(this.$VideoUploadSession49,a);if(!d){this.__logEvent(b("VideoUploadLogger").EVENT_INVALIDATED_UPLOADING);this.inform("upload-failed",c);return}a&&a.format&&(this.$VideoUploadSession51=a.format.isSpherical,a.metadata&&(this.$VideoUploadSession52.sphericalMetadataXml=a.metadata.sphericalMetadataXml,this.$VideoUploadSession52.fbSpatialAudioMetadataXml=a.metadata.fbSpatialAudioMetadataXml,this.$VideoUploadSession52.ytSa3dMetadataJson=a.metadata.ytSa3dMetadataJson));this.$VideoUploadSession6||this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_FLOW,{is_spherical:this.$VideoUploadSession51?"true":null});this.$VideoUploadSession60=this.$VideoUploadSession23&&this.$VideoUploadSession49.getSize()>=this.$VideoUploadSession24;this.$VideoUploadSession61=!1;this.$VideoUploadSession62=0;this.$VideoUploadSession63=this.$VideoUploadSession62;this.$VideoUploadSession64=0;this.$VideoUploadSession13?this.$VideoUploadSession34():this.$VideoUploadSession35=!1;if(this.$VideoUploadSession60)if(this.$VideoUploadSession13){d=0;this.$VideoUploadSession65=Math.ceil(this.$VideoUploadSession49.getSize()/this.$VideoUploadSession40);var e=this.$VideoUploadSession65,f=this.$VideoUploadSession65;for(d=0;d<this.$VideoUploadSession40-1;d++)this.$VideoUploadSession36[d]=e,e=Math.min(this.$VideoUploadSession36[d]+f,this.$VideoUploadSession49.getSize()),this.$VideoUploadSession37[d]=e,this.$VideoUploadSession38[d]=this.$VideoUploadSession36[d],this.$VideoUploadSession39[d]=0}else this.$VideoUploadSession65=Math.floor(this.$VideoUploadSession49.getSize()/2),this.$VideoUploadSession36=this.$VideoUploadSession65,this.$VideoUploadSession38=this.$VideoUploadSession36,this.$VideoUploadSession39=0,this.$VideoUploadSession37=this.$VideoUploadSession49.getSize();else this.$VideoUploadSession65=this.$VideoUploadSession49.getSize();d=new(b("VideoUploadRequestContext"))().setFile(this.$VideoUploadSession49).setTargetID(this.$VideoUploadSession3).setSource(this.$VideoUploadSession1).setComposerDialogVersion(this.$VideoUploadSession2).setWaterfallID(this.$VideoUploadSession42).setHasFileBeenReplaced(this.$VideoUploadSession15).setSupportsChunking(this.$VideoUploadSession21).setSupportsFileAPI(this.$VideoUploadSession22).setCreatorProduct(this.$VideoUploadSession49.getCreatorProduct()).setPartitionStartOffset(this.$VideoUploadSession62).setPartitionEndOffset(this.$VideoUploadSession65);this.$VideoUploadSession23&&d.setUseParallelChunks(this.$VideoUploadSession23);this.$VideoUploadSession51&&(d.setIsSphericalVideo(this.$VideoUploadSession51),d.setSphericalMetadata(this.$VideoUploadSession52));d.setComposerEntryPointRef&&d.setComposerEntryPointRef(this.$VideoUploadSession8);this.$VideoUploadSession66();this.$VideoUploadSession26.sendRequest(d);this.$VideoUploadSession17&&this.$VideoUploadSession14&&this.$VideoUploadSession28.isResumabilityEnabled()&&!this.$VideoUploadSession28.isResumableServiceProxyReceiveEnabled()&&this.$VideoUploadSession67();this.inform("metadata-parsed",a)};h.prototype.$VideoUploadSession27=function(a){"use strict";var b=this.$VideoUploadSession21?a.chunk_start_uri:a.start_uri;b=this.__getVideoUploadStartRequestManager(b,a.start_max_transport_retries,a.start_transport_retry_interval_base,a.start_max_transport_retry_timeout,a.skip_upload_enabled,a.skip_upload_file_size_limit,a.start_max_server_retries,a.start_server_retry_interval_base);b.subscribe("request-started",this.$VideoUploadSession68.bind(this));b.subscribe("request-finished",this.$VideoUploadSession69.bind(this));b.subscribe("request-failed",this.$VideoUploadSession70.bind(this));return b};h.prototype.$VideoUploadSession29=function(a){"use strict";__p&&__p();var b=this.$VideoUploadSession21?a.chunk_receive_uri:a.receive_uri;b=this.__getVideoUploadReceiveRequestManager(b,a);b.subscribe("request-started",this.$VideoUploadSession71.bind(this));b.subscribe("request-progressed",this.$VideoUploadSession72.bind(this));b.subscribe("request-finished",this.$VideoUploadSession73.bind(this));b.subscribe("request-failed",this.$VideoUploadSession74.bind(this));b.subscribe("request-timeout",this.$VideoUploadSession75.bind(this));b.subscribe("online",this.$VideoUploadSession76.bind(this));b.subscribe("offline",this.$VideoUploadSession77.bind(this));b.subscribe("resumable-called",this.$VideoUploadSession78.bind(this));b.subscribe("resumable-started",this.$VideoUploadSession79.bind(this));b.subscribe("resumable-success",this.$VideoUploadSession80.bind(this));b.subscribe("resumable-failed",this.$VideoUploadSession81.bind(this));return b};h.prototype.$VideoUploadSession32=function(a){"use strict";var b=this.$VideoUploadSession21?a.chunk_post_uri:a.post_uri;b=this.__getVideoUploadPostRequestManager(b,a);b.subscribe("request-finished",this.__handlePostRequestFinished.bind(this));b.subscribe("request-failed",this.$VideoUploadSession82.bind(this));return b};h.prototype.$VideoUploadSession68=function(a,c){"use strict";this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_UPLOADING,{hash_time:c.hash_time,hash_exception:c.hash_exception}),this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_START_REQUEST),this.$VideoUploadSession83=Date.now(),this.inform("upload-started")};h.prototype.$VideoUploadSession67=function(a){"use strict";__p&&__p();if(!this.$VideoUploadSession18){this.$VideoUploadSession18=!0;a||(a={video_id:null});var b;b=this.__createReceiveRequestContext(a,!1);this.$VideoUploadSession28.sendRequest(b);if(this.$VideoUploadSession60)if(this.$VideoUploadSession13){var c=0;for(c=0;c<this.$VideoUploadSession40-1;c++)b=this.__createReceiveRequestContext(a,!0,c),this.$VideoUploadSession30[c].sendRequest(b)}else b=this.__createReceiveRequestContext(a,!0),this.$VideoUploadSession30.sendRequest(b)}else this.$VideoUploadSession84()};h.prototype.$VideoUploadSession84=function(){"use strict";this.$VideoUploadSession28.updateVideoID(this.$VideoUploadSession44);if(this.$VideoUploadSession60)if(this.$VideoUploadSession13){var a=0;for(a=0;a<this.$VideoUploadSession40-1;a++)this.$VideoUploadSession30[a].updateVideoID(this.$VideoUploadSession44)}else this.$VideoUploadSession30.updateVideoID(this.$VideoUploadSession44)};h.prototype.$VideoUploadSession69=function(a,c){"use strict";this.__logEvent(b("VideoUploadLogger").EVENT_PROGRESS_UPLOADING_START_REQUEST,{transport_retries:c.transport_retries,hash_time:c.hash_time,skip_upload:c.skip_upload?1:null}),this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_START_REQUEST),this.$VideoUploadSession44=c.video_id,this.$VideoUploadSession45=c.upload_session_id,this.$VideoUploadSession46=c.fb_region,this.$VideoUploadSession85=c.skip_upload,!c.skip_upload?this.$VideoUploadSession67(c):(this.$VideoUploadSession86(),this.inform("upload-progressed",{start_offset:0,end_offset:this.$VideoUploadSession49.getSize(),file_size:this.$VideoUploadSession49.getSize(),sent_bytes:this.$VideoUploadSession49.getSize(),video_id:c.video_id,skip_upload:c.skip_upload}),this.$VideoUploadSession6&&this.__logFinishedUploading(),this.inform("upload-finished",{start_offset:0,end_offset:this.$VideoUploadSession49.getSize(),video_id:c.video_id,is_spherical_video:this.$VideoUploadSession51}))};h.prototype.__fetchReceiveRequestManagerStateLogData=function(){"use strict";__p&&__p();var a={};this.$VideoUploadSession28!=null&&(this.$VideoUploadSession28.appendStateLogData(a,"requestManager_"),a.request_manager_state=a.requestManager_last_log_state);if(this.$VideoUploadSession13){var b=0;for(b=0;b<this.$VideoUploadSession40-1;b++)this.$VideoUploadSession30[b]!=null&&this.$VideoUploadSession30[b].appendStateLogData(a,"requestManagerEx_"+b.toString())}else this.$VideoUploadSession30!=null&&this.$VideoUploadSession30.appendStateLogData(a,"requestManagerEx_");return a};h.prototype.__createReceiveRequestContext=function(a,c,d){"use strict";c||(c=!1);var e=new(b("VideoUploadRequestContext"))();this.$VideoUploadSession13?this.__setupReceiveRequestContext(e,a,c,d):this.__setupReceiveRequestContext(e,a,c);return e};h.prototype.__setupReceiveRequestContext=function(a,b,c,d){"use strict";var e,f,g;!c?(c=this.$VideoUploadSession62,e=this.$VideoUploadSession65,this.$VideoUploadSession14?(f=this.$VideoUploadSession62,g=this.$VideoUploadSession16?Math.min(this.$VideoUploadSession16,this.$VideoUploadSession65):this.$VideoUploadSession65):(f=b.start_offset,g=b.end_offset)):this.$VideoUploadSession13?(this.$VideoUploadSession14&&(this.$VideoUploadSession25=this.$VideoUploadSession37[d]-this.$VideoUploadSession36[d],this.$VideoUploadSession25=this.$VideoUploadSession16?Math.min(this.$VideoUploadSession16,this.$VideoUploadSession25):this.$VideoUploadSession25),c=this.$VideoUploadSession36[d],e=this.$VideoUploadSession37[d],f=this.$VideoUploadSession36[d],g=this.$VideoUploadSession36[d]+this.$VideoUploadSession25>=this.$VideoUploadSession37[d]?this.$VideoUploadSession37[d]:this.$VideoUploadSession36[d]+this.$VideoUploadSession25):(this.$VideoUploadSession14&&(this.$VideoUploadSession25=this.$VideoUploadSession37-this.$VideoUploadSession36,this.$VideoUploadSession25=this.$VideoUploadSession16?Math.min(this.$VideoUploadSession16,this.$VideoUploadSession25):this.$VideoUploadSession25),c=this.$VideoUploadSession36,e=this.$VideoUploadSession37,f=this.$VideoUploadSession36,g=this.$VideoUploadSession36+this.$VideoUploadSession25>=this.$VideoUploadSession37?this.$VideoUploadSession37:this.$VideoUploadSession36+this.$VideoUploadSession25);a.setFile(this.$VideoUploadSession49).setVideoID(b.video_id).setUploadSessionID(b.upload_session_id).setFbRegion(b.fb_region).setStartOffset(f).setEndOffset(g).setPartitionStartOffset(c).setPartitionEndOffset(e).setTargetID(this.$VideoUploadSession3).setSource(this.$VideoUploadSession1).setComposerDialogVersion(this.$VideoUploadSession2).setWaterfallID(this.$VideoUploadSession42).setSupportsChunking(this.$VideoUploadSession21).setHasFileBeenReplaced(this.$VideoUploadSession15);this.$VideoUploadSession23&&a.setUseParallelChunks(this.$VideoUploadSession23);a.setComposerEntryPointRef&&a.setComposerEntryPointRef(this.$VideoUploadSession8);this.$VideoUploadSession16&&a.setClientChunkSize(this.$VideoUploadSession16)};h.prototype.$VideoUploadSession70=function(a,c){"use strict";a=this.__getLogErrorData(c);this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_START_REQUEST,a);this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_UPLOADING,a);a=c.error_is_transient?b("VideoUploadLogger").EVENT_RESIGNED_FLOW:b("VideoUploadLogger").EVENT_FAILED_FLOW;this.$VideoUploadSession6?this.$VideoUploadSession57&&(this.__logEvent(a),this.$VideoUploadSession57=!1):this.__logEvent(a);this.$VideoUploadSession86();this.$VideoUploadSession87();this.inform("upload-failed",c)};h.prototype.$VideoUploadSession71=function(a,c){"use strict";!c.start_offset&&!c.transport_retries&&!c.server_retries&&this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_SENDING_BYTES,{total_bytes:this.$VideoUploadSession49.getSize()}),this.$VideoUploadSession21&&this.__logEvent(b("VideoUploadLogger").EVENT_STARTED_SENDING_CHUNK_BYTES,{start_offset:c.start_offset,total_bytes:c.end_offset-c.start_offset,transport_retries:c.transport_retries,server_retries:c.server_retries,upload_speed:c.upload_speed,request_manager_state:c.request_manager_state})};h.prototype.$VideoUploadSession72=function(a,b){"use strict";__p&&__p();if(b.start_offset<this.$VideoUploadSession65)this.$VideoUploadSession63=b.start_offset,this.$VideoUploadSession64=b.sent_bytes;else if(this.$VideoUploadSession13){a=this.getExPartitionNumber(b.start_offset);a>-1&&(this.$VideoUploadSession38[a]=b.start_offset,this.$VideoUploadSession39[a]=b.sent_bytes)}else this.$VideoUploadSession38=b.start_offset,this.$VideoUploadSession39=b.sent_bytes;b.start_offset=this.$VideoUploadSession63;b.sent_bytes=this.$VideoUploadSession64;if(this.$VideoUploadSession60)if(this.$VideoUploadSession13)for(a=0;a<this.$VideoUploadSession40-1;a++)b.start_offset+=this.$VideoUploadSession38[a]-this.$VideoUploadSession36[a],b.sent_bytes+=this.$VideoUploadSession39[a];else b.start_offset+=this.$VideoUploadSession38-this.$VideoUploadSession36,b.sent_bytes+=this.$VideoUploadSession39;a=Math.min(b.start_offset+b.sent_bytes,b.file_size);a>this.$VideoUploadSession50&&(this.$VideoUploadSession50=a,this.inform("upload-progressed",b))};h.prototype.$VideoUploadSession73=function(a,c){"use strict";__p&&__p();this.$VideoUploadSession21&&this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_SENDING_CHUNK_BYTES,{start_offset:c.start_offset,sent_bytes:c.end_offset-c.start_offset,transport_retries:c.transport_retries,server_retries:c.server_retries,upload_speed:c.upload_speed,request_manager_state:c.request_manager_state});a=!1;if(c.start_offset<this.$VideoUploadSession65)this.$VideoUploadSession61=c.end_offset>=this.$VideoUploadSession65;else if(this.$VideoUploadSession13){var d;d=this.getExPartitionNumber(c.start_offset);if(d===-1){var e={error_summary:"Invalid offset",error_description:"Offset doesn't fall in any exPartition range."};this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_UPLOADING);this.inform("upload-failed",e);return}this.$VideoUploadSession35[d]=c.end_offset>=this.$VideoUploadSession37[d]}else this.$VideoUploadSession35=c.end_offset>=this.$VideoUploadSession37;if(this.$VideoUploadSession13)for(d=0;d<this.$VideoUploadSession40-1;d++)if(this.$VideoUploadSession35[d]===!1){a=!1;break}else a=!0;else a=this.$VideoUploadSession35;(!this.$VideoUploadSession22||this.$VideoUploadSession61&&(!this.$VideoUploadSession60||a))&&(this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_SENDING_BYTES,{sent_bytes:this.$VideoUploadSession49.getSize()}),this.$VideoUploadSession58=Date.now()-this.$VideoUploadSession83,this.$VideoUploadSession6&&this.__logFinishedUploading(),c.video_id=this.$VideoUploadSession44,c.is_spherical_video=this.$VideoUploadSession51,this.inform("upload-finished",c),this.$VideoUploadSession10&&(this.$VideoUploadSession6||this.__logFinishedUploading(),this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_FLOW,c),this.$VideoUploadSession57=!1,this.$VideoUploadSession87(),this.inform("multimedia-upload-finished",c)))};h.prototype.$VideoUploadSession74=function(a,c){"use strict";a=this.__getLogErrorData(c);this.$VideoUploadSession21&&this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_SENDING_CHUNK_BYTES,a);this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_UPLOADING,a);var d=c.error_is_transient?b("VideoUploadLogger").EVENT_RESIGNED_FLOW:b("VideoUploadLogger").EVENT_FAILED_FLOW;this.$VideoUploadSession6?this.$VideoUploadSession57&&(this.__logEvent(d,a),this.$VideoUploadSession57=!1):this.__logEvent(d,a);this.$VideoUploadSession87();this.inform("upload-failed",c)};h.prototype.$VideoUploadSession75=function(a,c){"use strict";a={start_offset:c.start_offset,sent_bytes:c.end_offset-c.start_offset,transport_retries:c.transport_retries,server_retries:c.server_retries,timeout_retries:c.timeout_retries,upload_speed:c.upload_speed,request_manager_state:c.request_manager_state};this.__logEvent(b("VideoUploadLogger").EVENT_TIMEOUT_SENDING_CHUNK_BYTES,a)};h.prototype.$VideoUploadSession76=function(a,b){"use strict";this.inform("online",b)};h.prototype.$VideoUploadSession77=function(a,b){"use strict";this.inform("offline",b)};h.prototype.$VideoUploadSession78=function(a,c){"use strict";this.__logEvent(b("VideoUploadLogger").EVENT_RESUMABLE_CALLED,c)};h.prototype.$VideoUploadSession79=function(a,c){"use strict";this.__logEvent(b("VideoUploadLogger").EVENT_RESUMABLE_STARTED,c)};h.prototype.$VideoUploadSession80=function(a,c){"use strict";this.__logEvent(b("VideoUploadLogger").EVENT_RESUMABLE_SUCCESS,c)};h.prototype.$VideoUploadSession81=function(a,c){"use strict";this.__logEvent(b("VideoUploadLogger").EVENT_RESUMABLE_FAILED,c)};h.prototype.__handlePostRequestFinished=function(a,c){"use strict";this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_POST_REQUEST);c.video_id||(c.video_id=this.$VideoUploadSession44);this.$VideoUploadSession6||this.__logFinishedUploading();this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_FLOW);this.$VideoUploadSession57=!1;this.$VideoUploadSession87();a=babelHelpers["extends"]({},c,this.$VideoUploadSession55);this.inform("post-finished",a)};h.prototype.__logFinishedUploading=function(){"use strict";this.__logEvent(b("VideoUploadLogger").EVENT_FINISHED_UPLOADING,{elapsed_time:this.$VideoUploadSession58,skip_upload:this.$VideoUploadSession85?1:null}),this.$VideoUploadSession48=!0};h.prototype.$VideoUploadSession82=function(a,c){"use strict";__p&&__p();a=this.__getLogErrorData(c);this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_POST_REQUEST,a);if(this.$VideoUploadSession47){this.__logEvent(b("VideoUploadLogger").EVENT_FAILED_UPLOADING,a);var d=c.error_is_transient?b("VideoUploadLogger").EVENT_RESIGNED_FLOW:b("VideoUploadLogger").EVENT_FAILED_FLOW;this.__logEvent(d,a)}this.$VideoUploadSession87();this.inform("post-failed",c)};h.prototype.$VideoUploadSession86=function(){"use strict";__p&&__p();this.$VideoUploadSession28.cancelRequest();if(this.$VideoUploadSession60)if(this.$VideoUploadSession13){var a=0;for(a=0;a<this.$VideoUploadSession40-1;a++)this.$VideoUploadSession30[a].cancelRequest()}else this.$VideoUploadSession30.cancelRequest();this.$VideoUploadSession18=!1};h.prototype.$VideoUploadSession56=function(){"use strict";this.$VideoUploadSession26.cancelRequest(),this.$VideoUploadSession86(),this.$VideoUploadSession87(),this.$VideoUploadSession44&&(h.deleteVideo(this.$VideoUploadSession44),this.$VideoUploadSession44=null,this.$VideoUploadSession45=null,this.$VideoUploadSession46=null)};h.prototype.$VideoUploadSession66=function(){"use strict";this.$VideoUploadSession47=!0,this.$VideoUploadSession9&&(this.$VideoUploadSession59=new(b("VideoUploadCrashMonitor"))(this.$VideoUploadSession42,this.$VideoUploadSession7,this.$VideoUploadSession1,this.$VideoUploadSession3,this.$VideoUploadSession4,this.$VideoUploadSession21,this.$VideoUploadSession8,!this.$VideoUploadSession6||this.$VideoUploadSession57),this.$VideoUploadSession59.startSession())};h.prototype.$VideoUploadSession87=function(){"use strict";this.$VideoUploadSession47=!1,this.$VideoUploadSession59&&(this.$VideoUploadSession59.endSession(),this.$VideoUploadSession59=null)};h.prototype.__getLogErrorData=function(a){"use strict";return{error:a.error_summary,error_code:a.error_code,error_description:a.error_description,transport_retries:a.transport_retries,server_retries:a.server_retries,request_manager_state:a.request_manager_state}};h.prototype.__logEvent=function(a,b){"use strict";var c=this.getLogger();b=b||{};this.$VideoUploadSession49&&(b.file_size=this.$VideoUploadSession49.getSize(),b.file_extension=this.$VideoUploadSession49.getExtension(),b.sent_bytes=this.$VideoUploadSession50);c.logEvent(a,b)};h.prototype.__getVideoUploadStartRequestManager=function(a,c,d,e,f,g,h,i){"use strict";return new(b("VideoUploadStartRequestManager"))(a,c,d,e,f,g,h,i)};h.prototype.__getVideoUploadReceiveRequestManager=function(a,c){"use strict";return new(b("VideoUploadReceiveRequestManager"))(a,c.max_transport_retries,c.max_transport_retry_timeout,c.max_server_retries,c.response_timeout_enabled,c.max_response_timeout_retries,c.response_timeout_speed_variation_factor_ppt,c.transport_retry_interval_base,c.server_retry_interval_base,c.receive_errors_force_retry,c.access_token,c.resumability_enabled,c.resumability_async_enabled,c.resumable_service_override,c.datr,c.resumability_min_file_size,c.resumable_service_proxy_receive,c.resumable_reset_transport_retries_on_progress,c.add_flow_capture_header)};h.prototype.__getVideoUploadPostRequestManager=function(a,c){"use strict";return new(b("VideoUploadPostRequestManager"))(a,c.post_max_transport_retries,c.post_transport_retry_interval_base,c.post_max_server_retries,c.post_server_retry_interval_base)};h.deleteVideo=function(a){"use strict";a=new(b("AsyncRequest"))("/ajax/video/actions/delete").setData({fbid:a,redirect:!1});a.setErrorHandler(function(){});a.send()};e.exports=h}),null);
__d("VideoUploader",["ArbiterMixin","VideoUploadCrashMonitor","VideoUploadSession","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;function a(a){"use strict";g.constructor.call(this),this.$VideoUploader1=a,this.$VideoUploader2=null,this.$VideoUploader3=null,a.monitor_crashes&&(this.$VideoUploader4=new(b("VideoUploadCrashMonitor"))(),this.$VideoUploader4.logKnownCrashes())}a.prototype.getLogger=function(){"use strict";if(!this.$VideoUploader2)return;if(this.$VideoUploader2.getLogger)return this.$VideoUploader2.getLogger()};a.prototype.upload=function(a){"use strict";if(this.$VideoUploader2)return;var b=this.__getVideoUploadSession(this.$VideoUploader1);b.subscribe(this.__getEventsWhichShouldListenFromSession(),function(a,b){return this.$VideoUploader5(a,b)}.bind(this));b.start(a);this.$VideoUploader2=b};a.prototype.__getVideoUploadSession=function(a){"use strict";return new(b("VideoUploadSession"))(a)};a.prototype.__getEventsWhichShouldListenFromSession=function(){"use strict";return["upload-requested","upload-started","upload-progressed","upload-finished","upload-failed","post-started","post-finished","post-failed","online","offline","metadata-parsed","set-waterfall-id"]};a.prototype.postUserRequest=function(){"use strict";if(!this.$VideoUploader2)return;this.$VideoUploader2.startFlow&&this.$VideoUploader2.startFlow()};a.prototype.setTargetID=function(a){"use strict";if(this.$VideoUploader2==null)return;this.$VideoUploader2.setTargetID(a)};a.prototype.setHasFileBeenReplaced=function(a){"use strict";this.$VideoUploader1.has_file_been_replaced=a};a.prototype.post=function(a){"use strict";if(!this.$VideoUploader2)return;this.$VideoUploader2.post(a)};a.prototype.getVideoID=function(){"use strict";this.$VideoUploader2&&(this.$VideoUploader3=this.$VideoUploader2.getVideoID());return this.$VideoUploader3};a.prototype.cancel=function(a){a===void 0&&(a=!1);var c=this.getVideoID();this.$VideoUploader2?this.$VideoUploader2.cancel(a):a&&c&&b("VideoUploadSession").deleteVideo(c);this.reset()};a.prototype.abandon=function(a){a===void 0&&(a=!1);var c=this.getVideoID();this.$VideoUploader2?this.$VideoUploader2.abandon(a):a&&c&&b("VideoUploadSession").deleteVideo(c);this.reset()};a.prototype.reset=function(){"use strict";this.$VideoUploader2&&(this.$VideoUploader3=this.getVideoID()),this.$VideoUploader2=null};a.prototype.getUploadSession=function(){"use strict";return this.$VideoUploader2};a.prototype.getLoggerData=function(){"use strict";return{waterfall_id:this.$VideoUploader2?this.$VideoUploader2.$VideoUploader6:null,actor_id:this.$VideoUploader1.actor_id,target_id:this.$VideoUploader1.target_id,target_type:this.$VideoUploader1.target_type,composer_entry_point_ref:this.$VideoUploader1.composer_entry_point_ref}};a.prototype.isPostInProgress=function(){"use strict";return!!this.$VideoUploader2&&this.$VideoUploader2.isPostInProgress()};a.prototype.isSessionInProgress=function(){"use strict";return!!this.$VideoUploader2&&this.$VideoUploader2.isInProgress()};a.prototype.getUploadParameters=function(){"use strict";return this.$VideoUploader1};a.prototype.__getSession=function(){"use strict";return this.$VideoUploader2};a.prototype.__getEventsForWhichSessionShouldBeSetToNull=function(){"use strict";return["upload-failed","post-finished","multimedia-upload-finished"]};a.prototype.$VideoUploader5=function(a,b){"use strict";this.__getEventsForWhichSessionShouldBeSetToNull().includes(a)&&this.reset(),this.__delegateEvent(a,b)};a.prototype.__delegateEvent=function(a,b){"use strict";this.inform(a,b)};e.exports=a}),null);
__d("getChunkForContentState",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c){if(b){c=c.getEntity(b);if(c.getType()==="EMOTICON")return c.getData().originalEmoticon;else if(c.getType()==="EMOJI")return c.getData().emoji.join("")}return a.replace("@[","@ [")}e.exports=a}),null);
__d("getMentionsTextForContentState",["emptyFunction","getChunkForContentState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("emptyFunction").thatReturnsTrue,h=/[\\\]:]/g;function a(a,b){b===void 0&&(b="");var c=a.getBlockMap().map(function(b){var c=b.getText(),d=[];b.findEntityRanges(g,function(e,f){d.push(i(c.slice(e,f),b.getEntityAt(e),a))});return d.join("")});return c.join("\n"+b)}function i(a,c,d){__p&&__p();if(c){var e=d.getEntity(c);if(e.getType()==="MENTION"){a=a.replace(h,function(a){return"\\"+a});e=e.getData().id;if(/^\d+$/.test(e))return"@["+e+":"+a+"]"}}return b("getChunkForContentState")(a,c,d)}e.exports=a}),null);
__d("ReactComposerMinutiaeAttachmentActionType",["keyMirrorRecursive"],(function(a,b,c,d,e,f){e.exports=b("keyMirrorRecursive")({FETCH_ATTACHMENT:null,SET_EXPLICIT_LOCATION:null,SET_MARKUP:null,SET_HIDE_OBJECT_ATTACHMENT:null},"ReactComposerMinutiaeAttachmentActionType")}),null);
__d("XReactComposerMinutiaeAttachmentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/react_composer/minutiae/attachment/",{composer_id:{type:"String",required:!0},action_id:{type:"String",required:!0},object_id:{type:"String",required:!0},target_id:{type:"String",required:!0},is_timeline:{type:"Bool",defaultValue:!1},explicit_place_tag_id:{type:"String"}})}),null);
__d("ReactComposerMinutiaeAttachmentStore",["ActorURI","AsyncRequest","ReactComposerAttachmentActionType","ReactComposerAttachmentType","ReactComposerMinutiaeAttachmentActionType","ReactComposerStoreBase","XReactComposerMinutiaeAttachmentController"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("ReactComposerStoreBase"));g=c&&c.prototype;function a(){"use strict";__p&&__p();var a;g.constructor.call(this,function(){return{isFetching:!1,markup:null,pendingRequest:null,explicitLocation:null}},function(c){__p&&__p();switch(c.type){case b("ReactComposerMinutiaeAttachmentActionType").FETCH_ATTACHMENT:a&&a.$ReactComposerMinutiaeAttachmentStore1(c);break;case b("ReactComposerMinutiaeAttachmentActionType").SET_MARKUP:a&&a.$ReactComposerMinutiaeAttachmentStore2(c);break;case b("ReactComposerAttachmentActionType").SELECT_ATTACHMENT:a&&a.$ReactComposerMinutiaeAttachmentStore3(c);break;case b("ReactComposerMinutiaeAttachmentActionType").SET_EXPLICIT_LOCATION:a&&a.$ReactComposerMinutiaeAttachmentStore4(c);break;case b("ReactComposerMinutiaeAttachmentActionType").SET_HIDE_OBJECT_ATTACHMENT:a&&a.$ReactComposerMinutiaeAttachmentStore5(c);break}});a=this}a.prototype.getMarkup=function(a){"use strict";return this.getComposerData(a).markup};a.prototype.getHideObjectAttachment=function(a){"use strict";return this.getComposerData(a).hideObjectAttachment};a.prototype.isFetching=function(a){"use strict";return this.getComposerData(a).isFetching};a.prototype.$ReactComposerMinutiaeAttachmentStore4=function(a){"use strict";a=this.validateAction(a,["composerID","explicitLocation"]);var b=a[0];a=a[1];var c=this.getComposerData(b);c.explicitLocation=a;this.emitChange(b)};a.prototype.$ReactComposerMinutiaeAttachmentStore1=function(a){"use strict";__p&&__p();a=this.validateAction(a,["composerID","actionID","objectID","targetID","actorID","isTimeline"]);var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4];a=a[5];var h=this.getComposerData(c);h.isFetching=!0;d=b("XReactComposerMinutiaeAttachmentController").getURIBuilder().setString("composer_id",c).setString("action_id",d).setString("object_id",e).setString("target_id",f).setBool("is_timeline",a);h.explicitLocation&&d.setString("explicit_place_tag_id",h.explicitLocation);e=b("ActorURI").create(d.getURI(),g);h.pendingRequest=new(b("AsyncRequest"))(e).setFinallyHandler(function(){h.isFetching=!1,h.pendingRequest=null,this.emitChange(c)}.bind(this));h.pendingRequest.send();this.emitChange(c)};a.prototype.$ReactComposerMinutiaeAttachmentStore2=function(a){"use strict";a=this.validateAction(a,["composerID","markup"]);var b=a[0];a=a[1];var c=this.getComposerData(b);c.markup=a;c.hideObjectAttachment=!1;this.emitChange(b)};a.prototype.$ReactComposerMinutiaeAttachmentStore5=function(a){"use strict";a=this.validateAction(a,["composerID","hideAttachment"]);var b=a[0];a=a[1];var c=this.getComposerData(b);c.hideObjectAttachment=a;this.emitChange(b)};a.prototype.$ReactComposerMinutiaeAttachmentStore3=function(a){"use strict";__p&&__p();a=this.validateAction(a,["composerID","id"]);var c=a[0];a=a[1];if(a===b("ReactComposerAttachmentType").STATUS)return;a=this.getComposerData(c);a.markup=null;a.isFetching=!1;a.pendingRequest&&a.pendingRequest.abandon();this.emitChange(c)};e.exports=new a()}),null);
__d("PUWMethods",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DRAGDROP:"dragdrop",FILE_SELECTOR:"file_selector",VAULT:"vault",RECENT_PHOTOS:"recent_photos",PHOTOS_OF_YOU:"photos_of_you",METHOD_EDITOR:"editor",SUGGESTIONS:"suggestions",CAMERA:"camera",COPYPASTE:"copypaste",DISABLE_SPHERICAL:"disable_spherical"})}),null);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("exif-js-2.3.0",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={},h={exports:g},i;function j(){__p&&__p();(function(){__p&&__p();var a=!1,b=this,c=function(a){if(a instanceof c)return a;if(!(this instanceof c))return new c(a);this.EXIFwrapped=a};typeof g!=="undefined"?(typeof h!=="undefined"&&h.exports&&(g=h.exports=c),g.EXIF=c):b.EXIF=c;var d=c.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},e=c.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},f=c.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},j=c.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},k=c.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function l(a){return!!a.exifdata}function m(a,b){b||a.match(/^data\:([^\;]+)\;base64,/im)[1]||"";a=a.replace(/^data\:([^\;]+)\;base64,/gim,"");b=atob(a);a=b.length;var c=new ArrayBuffer(a),d=new Uint8Array(c);for(var e=0;e<a;e++)d[e]=b.charCodeAt(e);return c}function n(a,b){var c=new XMLHttpRequest();c.open("GET",a,!0);c.responseType="blob";c.onload=function(a){(this.status==200||this.status===0)&&b(this.response)};c.send()}function o(b,d){__p&&__p();function e(a){var e=p(a);b.exifdata=e||{};e=q(a);b.iptcdata=e||{};if(c.isXmpEnabled){e=z(a);b.xmpdata=e||{}}d&&d.call(b)}if(b.src)if(/^data\:/i.test(b.src)){var f=m(b.src);e(f)}else if(/^blob\:/i.test(b.src)){var g=new FileReader();g.onload=function(a){e(a.target.result)};n(b.src,function(a){g.readAsArrayBuffer(a)})}else{var h=new XMLHttpRequest();h.onload=function(){if(this.status==200||this.status===0)e(h.response);else throw"Could not load image";h=null};h.open("GET",b.src,!0);h.responseType="arraybuffer";h.send(null)}else if(self.FileReader&&(b instanceof self.Blob||b instanceof self.File)){var g=new FileReader();g.onload=function(b){a&&!1,e(b.target.result)};g.readAsArrayBuffer(b)}}function p(b){__p&&__p();var c=new DataView(b);a&&!1;if(c.getUint8(0)!=255||c.getUint8(1)!=216){a&&!1;return!1}var d=2;b=b.byteLength;var e;while(d<b){if(c.getUint8(d)!=255){a&&!1;return!1}e=c.getUint8(d+1);a&&!1;if(e==225){a&&!1;return y(c,d+4,c.getUint16(d+2)-2)}else d+=2+c.getUint16(d+2)}}function q(b){__p&&__p();var c=new DataView(b);a&&!1;if(c.getUint8(0)!=255||c.getUint8(1)!=216){a&&!1;return!1}var d=2,e=b.byteLength,f=function(a,b){return a.getUint8(b)===56&&a.getUint8(b+1)===66&&a.getUint8(b+2)===73&&a.getUint8(b+3)===77&&a.getUint8(b+4)===4&&a.getUint8(b+5)===4};while(d<e){if(f(c,d)){var g=c.getUint8(d+7);g%2!==0&&(g+=1);g===0&&(g=4);var h=d+8+g;g=c.getUint16(d+6+g);return s(b,h,g);break}d++}}var r={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function s(a,b,c){a=new DataView(a);var d={},e,f,g=b;while(g<b+c)a.getUint8(g)===28&&a.getUint8(g+1)===2&&(f=a.getUint8(g+2),f in r&&(e=a.getInt16(g+3),f=r[f],e=x(a,g+5,e),d.hasOwnProperty(f)?d[f]instanceof Array?d[f].push(e):d[f]=[d[f],e]:d[f]=e)),g++;return d}function t(b,c,d,e,f){var g=b.getUint16(d,!f),h={},i,j,k;for(k=0;k<g;k++)i=d+k*12+2,j=e[b.getUint16(i,!f)],!j&&a&&!1,h[j]=u(b,i,c,d,f);return h}function u(a,b,c,d,e){__p&&__p();d=a.getUint16(b+2,!e);var f=a.getUint32(b+4,!e);c=a.getUint32(b+8,!e)+c;var g,h,i,j;switch(d){case 1:case 7:if(f==1)return a.getUint8(b+8,!e);else{d=f>4?c:b+8;g=[];for(i=0;i<f;i++)g[i]=a.getUint8(d+i);return g}case 2:d=f>4?c:b+8;return x(a,d,f-1);case 3:if(f==1)return a.getUint16(b+8,!e);else{d=f>2?c:b+8;g=[];for(i=0;i<f;i++)g[i]=a.getUint16(d+2*i,!e);return g}case 4:if(f==1)return a.getUint32(b+8,!e);else{g=[];for(i=0;i<f;i++)g[i]=a.getUint32(c+4*i,!e);return g}case 5:if(f==1){d=a.getUint32(c,!e);j=a.getUint32(c+4,!e);h=new Number(d/j);h.numerator=d;h.denominator=j;return h}else{g=[];for(i=0;i<f;i++)d=a.getUint32(c+8*i,!e),j=a.getUint32(c+4+8*i,!e),g[i]=new Number(d/j),g[i].numerator=d,g[i].denominator=j;return g}case 9:if(f==1)return a.getInt32(b+8,!e);else{g=[];for(i=0;i<f;i++)g[i]=a.getInt32(c+4*i,!e);return g}case 10:if(f==1)return a.getInt32(c,!e)/a.getInt32(c+4,!e);else{g=[];for(i=0;i<f;i++)g[i]=a.getInt32(c+8*i,!e)/a.getInt32(c+4+8*i,!e);return g}}}function v(a,b,c){var d=a.getUint16(b,!c);return a.getUint32(b+2+d*12,!c)}function w(a,b,c,d){__p&&__p();c=v(a,b+c,d);if(!c)return{};else if(c>a.byteLength)return{};c=t(a,b,b+c,j,d);if(c.Compression)switch(c.Compression){case 6:if(c.JpegIFOffset&&c.JpegIFByteCount){d=b+c.JpegIFOffset;b=c.JpegIFByteCount;c.blob=new Blob([new Uint8Array(a.buffer,d,b)],{type:"image/jpeg"})}break;case 1:break;default:}else c.PhotometricInterpretation==2;return c}function x(a,b,c){var d="";for(var e=b;e<b+c;e++)d+=String.fromCharCode(a.getUint8(e));return d}function y(b,c){__p&&__p();if(x(b,c,4)!="Exif"){a&&!1;return!1}var g,h,i,j;c=c+6;if(b.getUint16(c)==18761)g=!1;else if(b.getUint16(c)==19789)g=!0;else{a&&!1;return!1}if(b.getUint16(c+2,!g)!=42){a&&!1;return!1}var l=b.getUint32(c+4,!g);if(l<8){a&&!1;return!1}h=t(b,c,c+l,e,g);if(h.ExifIFDPointer){j=t(b,c,c+h.ExifIFDPointer,d,g);for(i in j){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":j[i]=k[i][j[i]];break;case"ExifVersion":case"FlashpixVersion":j[i]=String.fromCharCode(j[i][0],j[i][1],j[i][2],j[i][3]);break;case"ComponentsConfiguration":j[i]=k.Components[j[i][0]]+k.Components[j[i][1]]+k.Components[j[i][2]]+k.Components[j[i][3]];break}h[i]=j[i]}}if(h.GPSInfoIFDPointer){j=t(b,c,c+h.GPSInfoIFDPointer,f,g);for(i in j){switch(i){case"GPSVersionID":j[i]=j[i][0]+"."+j[i][1]+"."+j[i][2]+"."+j[i][3];break}h[i]=j[i]}}h.thumbnail=w(b,c,l,g);return h}function z(b){__p&&__p();if(!("DOMParser"in self))return;var c=new DataView(b);a&&!1;if(c.getUint8(0)!=255||c.getUint8(1)!=216){a&&!1;return!1}var d=2;b=b.byteLength;var e=new DOMParser();while(d<b-4)if(x(c,d,4)=="http"){var f=d-1,g=c.getUint16(d-2)-1;f=x(c,f,g);g=f.indexOf("xmpmeta>")+8;f=f.substring(f.indexOf("<x:xmpmeta"),g);g=f.indexOf("x:xmpmeta")+10;f=f.slice(0,g)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+f.slice(g);g=e.parseFromString(f,"text/xml");return B(g)}else d++}function A(a){__p&&__p();var b={};if(a.nodeType==1){if(a.attributes.length>0){b["@attributes"]={};for(var c=0;c<a.attributes.length;c++){var d=a.attributes.item(c);b["@attributes"][d.nodeName]=d.nodeValue}}}else if(a.nodeType==3)return a.nodeValue;if(a.hasChildNodes())for(var d=0;d<a.childNodes.length;d++){c=a.childNodes.item(d);var e=c.nodeName;if(b[e]==null)b[e]=A(c);else{if(b[e].push==null){var f=b[e];b[e]=[];b[e].push(f)}b[e].push(A(c))}}return b}function B(a){__p&&__p();try{var b={};if(a.children.length>0)for(var c=0;c<a.children.length;c++){var d=a.children.item(c),e=d.attributes;for(var f in e){var g=e[f],h=g.nodeName;g=g.nodeValue;h!==void 0&&(b[h]=g)}h=d.nodeName;if(typeof b[h]=="undefined")b[h]=A(d);else{if(typeof b[h].push=="undefined"){g=b[h];b[h]=[];b[h].push(g)}b[h].push(A(d))}}else b=a.textContent;return b}catch(a){}}c.enableXmp=function(){c.isXmpEnabled=!0};c.disableXmp=function(){c.isXmpEnabled=!1};c.getData=function(a,b){if((self.Image&&a instanceof self.Image||self.HTMLImageElement&&a instanceof self.HTMLImageElement)&&!a.complete)return!1;!l(a)?o(a,b):b&&b.call(a);return!0};c.getTag=function(a,b){if(!l(a))return;return a.exifdata[b]};c.getIptcTag=function(a,b){if(!l(a))return;return a.iptcdata[b]};c.getAllTags=function(a){if(!l(a))return{};var b;a=a.exifdata;var c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};c.getAllIptcTags=function(a){if(!l(a))return{};var b;a=a.iptcdata;var c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};c.pretty=function(a){if(!l(a))return"";var b;a=a.exifdata;var c="";for(b in a)a.hasOwnProperty(b)&&(typeof a[b]=="object"?a[b]instanceof Number?c+=b+" : "+a[b]+" ["+a[b].numerator+"/"+a[b].denominator+"]\r\n":c+=b+" : ["+a[b].length+" values]\r\n":c+=b+" : "+a[b]+"\r\n");return c};c.readFromBinaryFile=function(a){return p(a)};typeof i==="function"&&i.amd&&i("exif-js",[],function(){return c})}).call(this)}var k=!1,l=function(){k||(k=!0,j());return h.exports};a=function(a){switch(a){case void 0:return l()}};e.exports=a}),null);
__d("exif-js",["exif-js-2.3.0"],(function(a,b,c,d,e,f){e.exports=b("exif-js-2.3.0")()}),null);
__d("SphericalPhotoUploadHelper",[],(function(a,b,c,d,e,f){"use strict";e.exports={shouldResize360:function(a,b,c){return b&&Math.max(b.x,b.y)<=c||a==="cubestrip"?!1:!0},shouldRecompress360:function(a,b,c){return b==null||b<=c||a==="cubestrip"?!1:!0}}}),null);
__d("XComposerPhotoUploader",["regeneratorRuntime","Promise","AsyncUploadRequest","FileInputUploader","JSLogger","PhotosMimeType","PhotosUploadID","ReactComposerMediaUtils","SphericalImage","SphericalPhotoConstants","SphericalPhotoTypedConfig","SphericalPhotoUploadHelper","curry","emptyFunction","performanceNow","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("SphericalPhotoConstants").QE_WWW_COMPOSER_UNIVERSE;var g=b("SphericalPhotoUploadHelper").shouldRecompress360,h=b("SphericalPhotoUploadHelper").shouldResize360,i=a.URL||a.webkitURL||{};function c(a){this.$2=a.uploadData||{},this.$1=a.uploadEndpoint,this.$3=a.retryLimit,this.$4=a.concurrentLimit,this.$5=a.resizer,this.$6=a.onUploadEnqueued||b("emptyFunction"),this.$7=a.onUploadsEnqueued||b("emptyFunction"),this.$8=a.onResizeStart||b("emptyFunction"),this.$11=a.onResizeProgress||b("emptyFunction"),this.$9=a.onResizeSuccess||b("emptyFunction"),this.$10=a.onResizeFailure||b("emptyFunction"),this.$12=a.onSphericalCheckFailure||b("emptyFunction"),this.$13=a.onSphericalCheckSuccess||b("emptyFunction"),this.$14=a.onUploadIsSpherical||b("emptyFunction"),this.$15=a.onUploadSent||b("emptyFunction"),this.$16=a.onUploadStart||b("emptyFunction"),this.$17=a.onUploadProgress||b("emptyFunction"),this.$18=a.onUploadSuccess||b("emptyFunction"),this.$19=a.onUploadFailure||b("emptyFunction"),this.$20=b("JSLogger").create("composer")}c.prototype.upload=function(a,c){__p&&__p();c=c||0;var d=Object.assign({},this.$2),e=null;if(!this.$21(a)){var f=b("PhotosUploadID").getNewID();a.uploadID=f;d.upload_id=f;this.$6({uploadID:f,fileName:a.value.split("/").pop().split("\\").pop(),fileURL:i.createObjectURL?i.createObjectURL(a):null})}else{e=Array.from(a.files);e=e.filter(function(a){return!b("ReactComposerMediaUtils").hasVideos([a.name])});if(e.length===0)return;e.length+c;e.forEach(function(a){a.uploadID||(a.uploadID=b("PhotosUploadID").getNewID()),this.$6({uploadID:a.uploadID,fileName:a.name,isSpherical:!1,fileURL:i.createObjectURL?i.createObjectURL(a):null})}.bind(this))}this.$7();f=new(b("FileInputUploader"))(a).setURI(this.$1).setData(d).setAllowCrossOrigin(!0).setNetworkErrorRetryLimit(this.$3).setUploadInParallel(!0);e&&e.length>0&&(f.setFiles({farr:e}),this.$5?f.setPreprocessHandler(this.$22.bind(this)):f.setPreprocessHandler(this.$23.bind(this)),this.$4&&f.setConcurrentLimit(this.$4));f.subscribe("progress",function(c,b){return this.$17(this.$24(b,a),b)}.bind(this));f.subscribe("failure",function(c,b){return this.$19(this.$24(b,a),b,e)}.bind(this));f.subscribe("start",function(c,b){return this.$16(this.$24(b,a),b)}.bind(this));f.subscribe("success",function(c,b){return this.$18(this.$24(b,a),b)}.bind(this));try{f.send(),this.$15(a)}catch(a){this.$20.error("error_send_unpublished_files",a);throw a}};c.prototype.getAsyncUploadRequest=function(a,c){__p&&__p();c=new(b("AsyncUploadRequest"))().setData(Object.assign({},c&&c.data,this.$2)).setFiles({farr:a}).setAllowCrossOrigin(!0).setURI(this.$1);this.$4&&c.setLimit(this.$4);this.$5&&c.setPreprocessHandler(this.$22.bind(this));c.subscribe("start",function(a,b){return this.$16(b.getFile().uploadID,{upload:b})}.bind(this));c.subscribe("progress",function(a,b){return this.$17(b.getFile().uploadID,{upload:b,event:b.getProgressEvent()})}.bind(this));c.subscribe("success",function(a,b){return this.$18(b.getFile().uploadID,{upload:b,response:b.getResponse()})}.bind(this));c.subscribe("failure",function(b,c){return this.$19(c.getFile().uploadID,{upload:c,response:c.getResponse()},a)}.bind(this));return c};c.prototype.$24=function(a,b){if(a.upload)return a.upload.getFile().uploadID;else return b.uploadID};c.prototype.$23=function(a,c){b("promiseDone")(function(){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(this.$25(a,c));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},null,this)}.bind(this)())};c.prototype.$25=function(a,c){var d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:d=a.getFile();f.next=3;return b("regeneratorRuntime").awrap(this.$26(d));case 3:e=f.sent,e&&e.isSpherical()?this.$14(d,e.isSpherical(),e.getProjectionType()):this.$14(d,!1,""),c(a);case 6:case"end":return f.stop()}},null,this)};c.prototype.$22=function(a,c){b("promiseDone")(function(){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(this.$27(a,c));case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},null,this)}.bind(this)())};c.prototype.$26=function(a){__p&&__p();var c,d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:c=b("performanceNow")();e.prev=1;e.next=4;return b("regeneratorRuntime").awrap(b("SphericalImage").createFromBlob(a));case 4:d=e.sent;this.$13(a,b("performanceNow")()-c,d);return e.abrupt("return",d);case 9:e.prev=9;e.t0=e["catch"](1);this.$12(a,b("performanceNow")()-c);return e.abrupt("return",null);case 14:case"end":return e.stop()}},null,this,[[1,9]])};c.prototype.$28=function(a){return this.$29(this.$5.resizeBlob.bind(this.$5),a)};c.prototype.$30=function(a,c){c===void 0&&(c=b("SphericalPhotoTypedConfig").upload_size_limit);return this.$29(this.$5.resize360Blob.bind(this.$5),a,c)};c.prototype.$29=function(a,c,d){var e=b("curry")(this.$11,c.uploadID),f=function(){return this.$8(c)}.bind(this);return new(b("Promise"))(function(b,g){f(),a(c,function(a,c,d,e,f){a?g(a):d?b(null):b({blob:c,originalWidth:e,originalHeight:f})},e,d)})};c.prototype.$27=function(a,c){__p&&__p();var d,e,f,i,j,k,l,m,n,o,p,q;return b("regeneratorRuntime").async(function(r){__p&&__p();while(1)switch(r.prev=r.next){case 0:d=a.getFile();if(!(!d||!b("PhotosMimeType").isJpeg(d.type))){r.next=5;break}this.$14(d,!1,"");c(a);return r.abrupt("return");case 5:e=b("performanceNow")();r.prev=6;j=null;r.next=10;return b("regeneratorRuntime").awrap(this.$26(d));case 10:j=r.sent;if(!(j&&j.isSpherical())){r.next=31;break}this.$14(d,!0,j.getProjectionType());k=j.getSize();l=b("SphericalPhotoTypedConfig").upload_size_limit;m=j.getProjectionType();n=!1;n=g(m,j.getBufferLength(),b("SphericalPhotoTypedConfig").upload_bytes_limit);o=h(m,k,l);if(!(k&&(o||n))){r.next=29;break}if(o){r.next=26;break}r.next=23;return b("regeneratorRuntime").awrap(this.$30(d,Math.max(k.x,k.y)-1));case 23:f=r.sent;r.next=29;break;case 26:r.next=28;return b("regeneratorRuntime").awrap(this.$30(d));case 28:f=r.sent;case 29:r.next=35;break;case 31:this.$14(d,!1,"");r.next=34;return b("regeneratorRuntime").awrap(this.$28(d));case 34:f=r.sent;case 35:f&&(i=f.blob,i.uploadID=d.uploadID,i.name=d.name,a.setFile(i),a.getAdditionalData().set("js_resized",!0).set("original_width",f.originalWidth).set("original_height",f.originalHeight));p=i===null;a.getFile().filename=d.name;this.$9(d,i||d,p,b("performanceNow")()-e);r.next=46;break;case 41:r.prev=41,r.t0=r["catch"](6),q=b("performanceNow")()-e,this.$10(d,i||d,r.t0,q);case 46:c(a);case 47:case"end":return r.stop()}},null,this,[[6,41]])};c.prototype.$21=function(a){return!!a.files&&b("AsyncUploadRequest").isSupported()};e.exports=c}),null);
__d("ReactComposerSlideshowActionType",["keyMirrorRecursive"],(function(a,b,c,d,e,f){e.exports=b("keyMirrorRecursive")({AUDIO_FILE_UPLOAD_ERROR:null,AUDIO_FILE_UPLOAD_STARTED:null,AUDIO_FILE_UPLOAD_SUCCESS:null,CLOSE_EDIT_SLIDESHOW_DIALOG:null,CREATE:null,DURATION_CHANGE:null,FORMAT_CHANGE:null,HIDE_SLIDESHOW_EDIT_FIELD:null,IMAGE_REMOVE:null,IMAGES_SELECT_CONFIRM:null,MUSIC_CATEGORY_SELECT:null,PREVIEW_STATE_CHANGE:null,REORDER_IMAGES:null,SELECT_TAB:null,SHOW_EDIT_SLIDESHOW_DIALOG:null,SHOW_SLIDESHOW_EDIT_FIELD:null,SET_STORYLINE_MOOD_FILES:null,STORYLINE_MOOD_CHANGE:null,STORYLINE_MOOD_DELETE:null,STORYLINE_MOOD_SOURCE_CHANGE:null,STORYLINE_MOOD_SOURCE_MAP_CHANGE:null,TOGGLE_SLIDESHOW_DIALOG:null,TRANSITION_CHANGE:null},"ReactComposerSlideshowActionType")}),null);
__d("SlideshowImageUtil",["invariant","immutable","SlideshowConstants"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("SlideshowConstants").formats,i="-",j=24,k=1.3,l=10,m=460,n=32,o=.8,p={getCroppingSpec:function(a,c,d,e){if(e&&a){e=Object.keys(a)[0];a=a[e];return{format:b("SlideshowConstants").formats.Original,topLeft:a[0],bottomRight:a[1]}}return this.getFullSizeImageBoxCroppingSpec({width:d.width?d.width:0,height:d.height?d.height:0},{width:c.width,height:c.height})},shouldCropImages:function(a){__p&&__p();var b=a[0].width,c=a[0].height;for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;if(f.width!==b||f.height!==c)return!0}return!1},getCrops:function(a,b,c){a=this.calculateDefaultCoordinates(a,c);return c={},c[b]=a,c},calculateCropsForFormat:function(a,c,d){__p&&__p();if(!a.size)return b("immutable").Map();var e=b("immutable").Map();switch(c){case h.Original:var f=a.first();f=d.get(f.key);var g=f.height,i=f.width;a.forEach(function(a){e=e.set(a.key,this.getCrops(d.get(a.key),i+b("SlideshowConstants").SIZE_DELIMITER+g,i/g))}.bind(this));break;case h.Wide:a.forEach(function(a){e=e.set(a.key,this.getCrops(d.get(a.key),c,b("SlideshowConstants").LANDSCAPE_ASPECT_RATIO))}.bind(this));break;case h.Square:a.forEach(function(a){e=e.set(a.key,this.getCrops(d.get(a.key),c,b("SlideshowConstants").SQUARE_ASPECT_RATIO))}.bind(this));break;case h.Vertical:a.forEach(function(a){e=e.set(a.key,this.getCrops(d.get(a.key),c,b("SlideshowConstants").VERTICAL_ASPECT_RATIO))}.bind(this));break;default:}return e},calculateDefaultCoordinates:function(a,b){var c,d;a.width/b>a.height?(c=a.height,d=a.height*b):(d=a.width,c=a.width/b);b=(a.width-d)/2;a=(a.height-c)/2;var e=Math.floor(b)-b,f=Math.floor(a)-a;return[[b+e,a+f],[Math.round(b+d+e),Math.round(a+c+f)]]},getPreviewBoxDimensions:function(a,c){__p&&__p();var d=c,e=c;if(a.length>0){a=a[0];a=Object.keys(a)[0];switch(a){case b("SlideshowConstants").formats.Wide:d=c/b("SlideshowConstants").LANDSCAPE_ASPECT_RATIO;break;case b("SlideshowConstants").formats.Vertical:e=c*b("SlideshowConstants").VERTICAL_ASPECT_RATIO;break;case b("SlideshowConstants").formats.Square:break;default:c=a.split(b("SlideshowConstants").SIZE_DELIMITER);a=Number(c[0]);c=Number(c[1]);a>c?d=Math.floor(e*c/a):e=Math.floor(d*a/c);break}}return{width:e,height:d}},getFullSizeImageBoxCroppingSpec:function(a,c){c=c.width/c.height;a=this.calculateDefaultCoordinates(a,c);a.length===2||g(0,1043);return{format:b("SlideshowConstants").formats.Original,topLeft:a[0],bottomRight:a[1]}},getDefaultCroppingSpec:function(a){a=this.calculateDefaultCoordinates(a,1);a.length===2||g(0,1043);return{format:b("SlideshowConstants").formats.Square,topLeft:a[0],bottomRight:a[1]}},getHorizontalAlignmentForAPI:function(a){a=a.split(i);return a[1]},getFontSize:function(a){return Math.floor(j*a)},getFontWeight:function(a){return a?"bold":"normal"},getLineHeight:function(){return k},getOpacity:function(){return o},getTextoverlayMaxEdge:function(a,b){return a-n*b*2-l*b*2},getTextoverlayPadding:function(a){return l*a},getTextoverlayMargin:function(a){return n*a},getScaleMultiplierFromCrops:function(a){a=Object.keys(a)[0];a=a.split(b("SlideshowConstants").SIZE_DELIMITER);var c=Number(a[0]);a=Number(a[1]);return p.getScaleMultiplier(c,a)},getScaleMultiplier:function(a,b){return Math.max(a/m,b/m)},getOuterTextboxCoordinatesForAPI:function(a,c,d){a=Object.keys(a)[0];a=a.split(b("SlideshowConstants").SIZE_DELIMITER);var e=Number(a[0]);a=Number(a[1]);e=p.calculateTextboxCoordinates(a,e,c,d);return[Math.floor(e.marginLeft),Math.floor(a-e.marginTop-e.textHeight),Math.ceil(e.marginLeft+e.textWidth),Math.ceil(a-e.marginTop)]},getInnerTextboxCoordinatesForAPI:function(a,c,d){a=Object.keys(a)[0];a=a.split(b("SlideshowConstants").SIZE_DELIMITER);var e=Number(a[0]);a=Number(a[1]);e=p.calculateTextboxCoordinates(a,e,c,d);return[Math.floor(e.marginLeft),Math.floor(a-e.marginTop-e.textHeight),Math.ceil(e.marginLeft+e.textWidth),Math.ceil(a-e.marginTop)]},convertHexToRGBA:function(a){if(!a)return null;a=a.replace("#","");var b=parseInt(a.substring(0,2),16),c=parseInt(a.substring(2,4),16);a=parseInt(a.substring(4,6),16);return"rgba("+b+","+c+","+a+","+p.getOpacity()+")"},calculateTextboxCoordinates:function(a,b,c,d){__p&&__p();var e=c.text_alignment.split(i),f=e[1];e=e[0];var g=p.getFontSize(d),h=p.getTextoverlayMaxEdge(b,d),j=p.getTextoverlayMaxEdge(a,d),k=document.createElement("div");k.textContent=c.textoverlay_content?c.textoverlay_content:"";k.style.visibility="hidden";k.style.display="inline-block";k.style.wordWrap="break-word";k.style.whiteSpace="pre-wrap";k.style.fontFamily=c.font;k.style.fontWeight=p.getFontWeight(c.bold);k.style.fontSize=g+"px";k.style.textAlign=f;k.style.maxWidth=h+"px";k.style.maxHeight=j+"px";k.style.lineHeight=p.getLineHeight()*g+"px";k.style.padding=p.getTextoverlayPadding(d)+"px";k.style.letterSpacing="0.2px";document.body.appendChild(k);c=k.clientWidth;h=k.clientHeight;document.body.removeChild(k);j=n*d;g=n*d;k=b-n*d;var l=a-n*d;f=="center"?j=Math.min((b-c)/2,k):f=="right"&&(j=Math.min(b-n*d-c,k));e=="center"?g=Math.min((a-h)/2,l):e=="bottom"&&(g=Math.min(a-n*d-h,l));return{marginLeft:j,marginTop:g,textHeight:h,textWidth:c}}};e.exports=p}),null);
__d("ReactComposerSelectedImagesStore",["ReactComposerDispatcher","ReactComposerMediaUploadActionType","ReactComposerMediaUploadStore","ReactComposerPhotoStore","ReactComposerSlideshowActionType","ReactComposerStoreBase","SlideshowConstants","SlideshowImageUtil","mergeDeepInto"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("SlideshowConstants").formats,i=b("SlideshowConstants").max_photo_num;c=babelHelpers.inherits(a,b("ReactComposerStoreBase"));g=c&&c.prototype;a.prototype.$ReactComposerSelectedImagesStore1=function(a,c,d){if(a.isLoading)return{};a=b("SlideshowImageUtil").calculateDefaultCoordinates({width:a.width,height:a.height},d);return d={},d[c]=a,d};a.prototype.$ReactComposerSelectedImagesStore2=function(a,b,c){c=c;c||(c=this.getComposerData(a).format);return this.$ReactComposerSelectedImagesStore3(b,c)};a.prototype.$ReactComposerSelectedImagesStore3=function(a,c){__p&&__p();if(!a.length)return[];switch(c){case h.Original:var d=a[0];return a.map(function(a){return this.$ReactComposerSelectedImagesStore1(a,d.width+b("SlideshowConstants").SIZE_DELIMITER+d.height,d.width/d.height)}.bind(this));case h.Wide:return a.map(function(a){return this.$ReactComposerSelectedImagesStore1(a,c,b("SlideshowConstants").LANDSCAPE_ASPECT_RATIO)}.bind(this));case h.Square:return a.map(function(a){return this.$ReactComposerSelectedImagesStore1(a,c,b("SlideshowConstants").SQUARE_ASPECT_RATIO)}.bind(this));case h.Vertical:return a.map(function(a){return this.$ReactComposerSelectedImagesStore1(a,c,b("SlideshowConstants").VERTICAL_ASPECT_RATIO)}.bind(this));default:return[]}};function a(){__p&&__p();var a;g.constructor.call(this,function(){return{selectedImages:[],imagesCrops:[],editState:null,format:b("SlideshowConstants").formats.Original,removedUploadIDs:[],addedUploadIDs:[]}},function(c){__p&&__p();switch(c.type){case b("ReactComposerMediaUploadActionType").PHOTO_UPLOAD_ENQUEUED:b("ReactComposerDispatcher").waitFor([b("ReactComposerMediaUploadStore").getDispatchToken()]);a&&a.$ReactComposerSelectedImagesStore4(c);break;case b("ReactComposerMediaUploadActionType").PHOTO_UPLOAD_DONE:b("ReactComposerDispatcher").waitFor([b("ReactComposerPhotoStore").getDispatchToken()]);a&&a.$ReactComposerSelectedImagesStore5(c);break;case b("ReactComposerSlideshowActionType").IMAGES_SELECT_CONFIRM:a&&a.$ReactComposerSelectedImagesStore6(c);break;case b("ReactComposerSlideshowActionType").IMAGE_REMOVE:a&&a.$ReactComposerSelectedImagesStore7(c);break;case b("ReactComposerSlideshowActionType").REORDER_IMAGES:a&&a.$ReactComposerSelectedImagesStore8(c);break;case b("ReactComposerSlideshowActionType").FORMAT_CHANGE:a&&a.$ReactComposerSelectedImagesStore9(c);break;case b("ReactComposerSlideshowActionType").TOGGLE_SLIDESHOW_DIALOG:a&&a.$ReactComposerSelectedImagesStore10(c);break;case b("ReactComposerSlideshowActionType").HIDE_SLIDESHOW_EDIT_FIELD:a&&a.$ReactComposerSelectedImagesStore11(c);break;case b("ReactComposerSlideshowActionType").SHOW_EDIT_SLIDESHOW_DIALOG:a&&a.$ReactComposerSelectedImagesStore12(c);break;case b("ReactComposerSlideshowActionType").CLOSE_EDIT_SLIDESHOW_DIALOG:a&&a.$ReactComposerSelectedImagesStore13(c);break;case b("ReactComposerSlideshowActionType").CREATE:a&&a.$ReactComposerSelectedImagesStore14(c);break;default:break}});a=this}a.prototype.$ReactComposerSelectedImagesStore4=function(a){a=a.composerID;var c=this.getComposerData(a),d=b("ReactComposerMediaUploadStore").getUploads(a);d=this.addNewImagesFromPhotoUploads(d,c.selectedImages,c.removedUploadIDs);c.selectedImages=c.selectedImages.concat(d);c.editState!==null&&(c.addedUploadIDs=c.addedUploadIDs.concat(d.map(function(a){return a.key})));this.emitChange(a)};a.prototype.$ReactComposerSelectedImagesStore5=function(a){a=a.composerID;var c=this.getComposerData(a),d=b("ReactComposerPhotoStore").getPhotos(a);c.selectedImages=this.replacePhotoUploadsFromPhotos(d,c.selectedImages);c.imagesCrops=this.$ReactComposerSelectedImagesStore2(a,c.selectedImages);this.emitChange(a)};a.prototype.$ReactComposerSelectedImagesStore11=function(a){a=a.composerID;var b=this.getComposerData(a);b.selectedImages=[];b.imagesCrops=[];this.emitChange(a)};a.prototype.$ReactComposerSelectedImagesStore10=function(a){var b=a.composerID,c=this.getComposerData(b);a.shouldShowSlideshowDialog||(c.selectedImages=[],c.imagesCrops=[]);this.emitChange(b)};a.prototype.$ReactComposerSelectedImagesStore6=function(a){var b=a.composerID,c=this.getComposerData(b);c.selectedImages=c.selectedImages.concat(a.selectedImages);c.imagesCrops=this.$ReactComposerSelectedImagesStore2(b,c.selectedImages);this.emitChange(b)};a.prototype.$ReactComposerSelectedImagesStore7=function(a){var b=a.composerID,c=this.getComposerData(b);c.editState!==null&&c.removedUploadIDs.push(a.removeImage.key);var d=c.selectedImages.filter(function(b){return b.key!==a.removeImage.key});c.selectedImages=d;c.imagesCrops=this.$ReactComposerSelectedImagesStore2(b,d);this.emitChange(b)};a.prototype.$ReactComposerSelectedImagesStore8=function(a){__p&&__p();var b=a.composerID,c=this.getComposerData(b);a=a.data;var d=a.fromIndex;a=a.toIndex;var e=c.selectedImages.slice(0),f=Object.assign({},e[d]);e[d].remove=!0;e.splice(d>a?a:a+1,0,f);e=e.filter(function(a){return!a.remove});c.selectedImages=e;c.imagesCrops=this.$ReactComposerSelectedImagesStore2(b,e);this.emitChange(b)};a.prototype.$ReactComposerSelectedImagesStore9=function(a){var b=a.composerID,c=this.getComposerData(b);c.format=a.format;c.imagesCrops=this.$ReactComposerSelectedImagesStore2(b,c.selectedImages,a.format);this.emitChange(b)};a.prototype.$ReactComposerSelectedImagesStore12=function(a){a=a.composerID;var c=this.getComposerData(a),d={};b("mergeDeepInto")(d,c);c.editState=d;this.emitChange(a)};a.prototype.$ReactComposerSelectedImagesStore13=function(a){a=a.composerID;var b=this.getComposerData(a),c=b.editState;b.selectedImages=c.selectedImages;b.imagesCrops=c.imagesCrops;b.format=c.format;b.editState=null;b.removedUploadIDs=[];b.addedUploadIDs=[];this.emitChange(a)};a.prototype.$ReactComposerSelectedImagesStore14=function(a){a=a.composerID;var b=this.getComposerData(a);b.editState=null;b.removedUploadIDs=[];b.addedUploadIDs=[];this.emitChange(a)};a.prototype.getImagesFromPhotoUploads=function(a){var b=[];a.forEach(function(a){b.push({height:null,isLoading:!0,key:a.id,url:null,width:null})});return b};a.prototype.addNewImagesFromPhotoUploads=function(a,b,c){a=this.getImagesFromPhotoUploads(a);a=a.filter(function(a){var d=b.findIndex(function(b){return b.key===a.key}),e=c.findIndex(function(b){return b===a.key});return d===-1&&e===-1});return a};a.prototype.replacePhotoUploadsFromPhotos=function(a,b){return b.map(function(b){var c=b,d=a.find(function(a){return a.uploadID===b.key});d!=null&&(c={height:d.height,isLoading:!1,key:d.uploadID,photoID:d.id,thumbSrc:d.thumbSrc,url:d.imageSrc,width:d.width});return c})};a.prototype.getPhotoIDs=function(a){a=this.getComposerData(a);return a.selectedImages.map(function(a){return a.photoID}).slice(0,i)};a.prototype.getRemovedUploadIDs=function(a){return this.getComposerData(a).removedUploadIDs};a.prototype.getAddedUploadIDs=function(a){return this.getComposerData(a).addedUploadIDs};a.prototype.getSelectedImages=function(a){return this.getComposerData(a).selectedImages};a.prototype.getThumbnailSrc=function(a){a=this.getComposerData(a).selectedImages;return a.length>0?a[0].thumbSrc:null};a.prototype.getImagesCrops=function(a){return this.getComposerData(a).imagesCrops};a.prototype.getNumberOfImages=function(a){return Math.min(this.getComposerData(a).selectedImages.length,i)};a.prototype.getFormat=function(a){return this.getComposerData(a).format};e.exports=new a()}),null);
__d("ReactComposerSlideshowActions",["ReactComposerDispatcher","ReactComposerSlideshowActionType"],(function(a,b,c,d,e,f){__p&&__p();a={showSlideshowEditField:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerSlideshowActionType").SHOW_SLIDESHOW_EDIT_FIELD})},hideSlideshowEditField:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerSlideshowActionType").HIDE_SLIDESHOW_EDIT_FIELD})},showSlideshowDialog:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,entrypoint:c,shouldShowSlideshowDialog:!0,type:b("ReactComposerSlideshowActionType").TOGGLE_SLIDESHOW_DIALOG})},closeSlideshowDialog:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,shouldShowSlideshowDialog:!1,type:b("ReactComposerSlideshowActionType").TOGGLE_SLIDESHOW_DIALOG})},showEditSlideshowDialog:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerSlideshowActionType").SHOW_EDIT_SLIDESHOW_DIALOG})},closeEditSlideshowDialog:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerSlideshowActionType").CLOSE_EDIT_SLIDESHOW_DIALOG})},selectImagesConfirm:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,selectedImages:c,type:b("ReactComposerSlideshowActionType").IMAGES_SELECT_CONFIRM})},removeImage:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,removeImage:c,type:b("ReactComposerSlideshowActionType").IMAGE_REMOVE})},reorderImages:function(a,c,d){b("ReactComposerDispatcher").dispatch({composerID:a,data:{fromIndex:c,toIndex:d},type:b("ReactComposerSlideshowActionType").REORDER_IMAGES})},changeStorylineMoodFile:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,selectedStorylineMood:c,type:b("ReactComposerSlideshowActionType").STORYLINE_MOOD_CHANGE})},deleteStorylineMoodFile:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,selectedStorylineMood:c,type:b("ReactComposerSlideshowActionType").STORYLINE_MOOD_DELETE})},changeStorylineMoodIDSource:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,storylineMoodIDSource:c,type:b("ReactComposerSlideshowActionType").STORYLINE_MOOD_SOURCE_CHANGE})},changeStorylineMoodSourceMap:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,storylineMoodIDToSource:c,type:b("ReactComposerSlideshowActionType").STORYLINE_MOOD_SOURCE_MAP_CHANGE})},changeTransition:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,transitionInMS:c,type:b("ReactComposerSlideshowActionType").TRANSITION_CHANGE})},changeDuration:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,durationInMS:c,shouldShowDurationWarning:!1,type:b("ReactComposerSlideshowActionType").DURATION_CHANGE})},changeDurationBySystem:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,durationInMS:c,shouldShowDurationWarning:!0,type:b("ReactComposerSlideshowActionType").DURATION_CHANGE})},setStorylineMoodFiles:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,storylineMoodFiles:c,type:b("ReactComposerSlideshowActionType").SET_STORYLINE_MOOD_FILES})},createSlideshow:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerSlideshowActionType").CREATE})},changeFormat:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,format:c,type:b("ReactComposerSlideshowActionType").FORMAT_CHANGE})},selectTab:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,tab:c,type:b("ReactComposerSlideshowActionType").SELECT_TAB})},musicCategorySelect:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,selectedMusicCategory:c,type:b("ReactComposerSlideshowActionType").MUSIC_CATEGORY_SELECT})},previewStateChange:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,isPreviewPlaying:c,type:b("ReactComposerSlideshowActionType").PREVIEW_STATE_CHANGE})},audioFileUploadStarted:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerSlideshowActionType").AUDIO_FILE_UPLOAD_STARTED})},audioFileUploadError:function(a){b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerSlideshowActionType").AUDIO_FILE_UPLOAD_ERROR})},audioFileUploadSuccess:function(a,c){b("ReactComposerDispatcher").dispatch({composerID:a,uploadedMood:c,type:b("ReactComposerSlideshowActionType").AUDIO_FILE_UPLOAD_SUCCESS})}};e.exports=a}),null);
__d("SlideshowFlowTypes",[],(function(a,b,c,d,e,f){"use strict";a={SETTINGS_TAB:"SETTINGS_TAB",MUSIC_TAB:"MUSIC_TAB",FRAMES_TAB:"FRAMES_TAB"};e.exports={SlideshowTabKey:a}}),null);
__d("ReactComposerSlideshowStore",["ReactComposerSlideshowActionType","ReactComposerStoreBase","SlideshowConstants","SlideshowFlowTypes","mergeDeepInto"],(function(a,b,c,d,e,f){__p&&__p();var g,h=b("SlideshowFlowTypes").SlideshowTabKey;c=babelHelpers.inherits(a,b("ReactComposerStoreBase"));g=c&&c.prototype;function a(){"use strict";__p&&__p();var a;g.constructor.call(this,function(){return{durationInMS:1e3,editState:null,isSlideshowSelected:!1,selectedTab:h.SETTINGS_TAB,shouldShowDurationWarning:!1,shouldShowSlideshowDialog:!1,transitionInMS:b("SlideshowConstants").transitions.None}},function(c){__p&&__p();switch(c.type){case b("ReactComposerSlideshowActionType").CREATE:a&&a.$ReactComposerSlideshowStore1(c);break;case b("ReactComposerSlideshowActionType").SHOW_SLIDESHOW_EDIT_FIELD:a&&a.$ReactComposerSlideshowStore2(c);break;case b("ReactComposerSlideshowActionType").HIDE_SLIDESHOW_EDIT_FIELD:a&&a.$ReactComposerSlideshowStore3(c);break;case b("ReactComposerSlideshowActionType").TOGGLE_SLIDESHOW_DIALOG:a&&a.$ReactComposerSlideshowStore4(c);break;case b("ReactComposerSlideshowActionType").TRANSITION_CHANGE:a&&a.$ReactComposerSlideshowStore5(c);break;case b("ReactComposerSlideshowActionType").DURATION_CHANGE:a&&a.$ReactComposerSlideshowStore6(c);break;case b("ReactComposerSlideshowActionType").SHOW_EDIT_SLIDESHOW_DIALOG:a&&a.$ReactComposerSlideshowStore7(c);break;case b("ReactComposerSlideshowActionType").CLOSE_EDIT_SLIDESHOW_DIALOG:a&&a.$ReactComposerSlideshowStore8(c);break;case b("ReactComposerSlideshowActionType").SELECT_TAB:a&&a.$ReactComposerSlideshowStore9(c);break;default:break}});a=this}a.prototype.$ReactComposerSlideshowStore1=function(a){"use strict";a=a.composerID;var b=this.getComposerData(a);b.isSlideshowSelected=!0;b.shouldShowSlideshowDialog=!1;b.editState=null;this.emitChange(a)};a.prototype.$ReactComposerSlideshowStore9=function(a){"use strict";var b=a.composerID,c=this.getComposerData(b);c.selectedTab=a.tab;this.emitChange(b)};a.prototype.$ReactComposerSlideshowStore2=function(a){"use strict";a=a.composerID;var b=this.getComposerData(a);b.isSlideshowSelected=!0;this.emitChange(a)};a.prototype.$ReactComposerSlideshowStore3=function(a){"use strict";a=a.composerID;var b=this.getComposerData(a);b.isSlideshowSelected=!1;this.emitChange(a)};a.prototype.$ReactComposerSlideshowStore4=function(a){"use strict";var b=a.composerID,c=this.getComposerData(b);c.shouldShowSlideshowDialog=a.shouldShowSlideshowDialog;this.emitChange(b)};a.prototype.$ReactComposerSlideshowStore5=function(a){"use strict";var b=a.composerID,c=this.getComposerData(b);c.transitionInMS=a.transitionInMS;this.emitChange(b)};a.prototype.$ReactComposerSlideshowStore6=function(a){"use strict";var b=a.composerID,c=this.getComposerData(b);c.durationInMS=a.durationInMS;c.shouldShowDurationWarning=a.shouldShowDurationWarning;this.emitChange(b)};a.prototype.$ReactComposerSlideshowStore7=function(a){"use strict";a=a.composerID;var c=this.getComposerData(a),d={};b("mergeDeepInto")(d,c);c.editState=d;c.shouldShowSlideshowDialog=!0;this.emitChange(a)};a.prototype.$ReactComposerSlideshowStore8=function(a){"use strict";__p&&__p();a=a.composerID;var b=this.getComposerData(a);b.shouldShowSlideshowDialog=!1;b.isSlideshowSelected=!0;var c=b.editState;b.durationInMS=c.durationInMS;b.transitionInMS=c.transitionInMS;b.editState=null;this.emitChange(a)};a.prototype.isSlideshowSelected=function(a){"use strict";return this.getComposerData(a).isSlideshowSelected};a.prototype.isEditing=function(a){"use strict";return this.getComposerData(a).editState!==null};a.prototype.shouldShowSlideshowDialog=function(a){"use strict";return this.getComposerData(a).shouldShowSlideshowDialog};a.prototype.getDurationInMS=function(a){"use strict";return this.getComposerData(a).durationInMS};a.prototype.getTotalLength=function(a,b){"use strict";return this.getDurationInMS(a)*b+this.getTransitionInMS(a)*b};a.prototype.getTransitionInMS=function(a){"use strict";return this.getComposerData(a).transitionInMS};a.prototype.getSelectedTab=function(a){"use strict";return this.getComposerData(a).selectedTab};a.prototype.getShouldShowDurationWarning=function(a){"use strict";return this.getComposerData(a).shouldShowDurationWarning};e.exports=new a()}),null);
__d("SlideshowMusicCategory",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ALL_TRACKS:"All Tracks",USER_UPLOADED:"User Uploaded",RECENTLY_USED:"Recently Used",ENERGETIC:"Energetic",INSPIRATIONAL:"Inspirational",FUN:"Fun",TRUSTWORTHY:"Trustworthy",MODERN:"Modern"})}),null);
__d("SlideshowAudioUtil",["ix","Image.react","React","SlideshowMusicCategory","fbglyph"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getMusicCategoryGlyph:function(a){__p&&__p();switch(a){case b("SlideshowMusicCategory").ALL_TRACKS:return b("React").createElement(b("Image.react"),{src:g("129467")});case b("SlideshowMusicCategory").USER_UPLOADED:return b("React").createElement(b("Image.react"),{src:g("128769")});case b("SlideshowMusicCategory").RECENTLY_USED:return b("React").createElement(b("Image.react"),{src:g("129053")});case b("SlideshowMusicCategory").ENERGETIC:return b("React").createElement(b("Image.react"),{src:g("128852")});case b("SlideshowMusicCategory").INSPIRATIONAL:return b("React").createElement(b("Image.react"),{src:g("128909")});case b("SlideshowMusicCategory").FUN:return b("React").createElement(b("Image.react"),{src:g("129302")});case b("SlideshowMusicCategory").TRUSTWORTHY:return b("React").createElement(b("Image.react"),{src:g("128881")});case b("SlideshowMusicCategory").MODERN:return b("React").createElement(b("Image.react"),{src:g("129337")});default:return null}},storylineMoodCompare:function(a,b){if(!a&&!b)return!0;else if(!a||!b)return!1;return a.fileName===b.fileName&&a.moodID===b.moodID&&JSON.stringify(a.categories)===JSON.stringify(b.categories)}};e.exports=a}),null);
__d("SlideshowFrameImagesRequestType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SCHEDULE_ASYNC_JOB:0,FETCH_FRAME_IMAGES:1})}),null);
__d("XSlideshowShakrOAuthController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/slideshow/shakr/",{})}),null);
__d("XSlideshowShakrPollController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/slideshow/shakr/show/",{})}),null);
__d("XSlideshowStorylineMoodAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/slideshow/storyline_mood/",{target_id:{type:"FBID"}})}),null);
__d("XSlideshowStorylineMoodDeleteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/slideshow/storyline_mood/delete/",{})}),null);
__d("XSlideshowStorylineMoodUploadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/slideshow/storyline_mood/upload/",{})}),null);
__d("XSlideshowVideoFrameImagesAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/slideshow/frame_images/",{request_type:{type:"Enum",enumType:0},video_id:{type:"FBID"}})}),null);
__d("SlideshowDataManager",["AsyncRequest","SlideshowFrameImagesRequestType","XSlideshowShakrOAuthController","XSlideshowShakrPollController","XSlideshowStorylineMoodAsyncController","XSlideshowStorylineMoodDeleteController","XSlideshowStorylineMoodUploadController","XSlideshowVideoFrameImagesAsyncController","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a.prototype.fetchStorylineMoodSource=function(a,c,d){var e=b("XSlideshowStorylineMoodAsyncController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(e).setData({storyline_mood_id:a,total_length:c}).setMethod("POST").setHandler(function(a){return d(a.payload)}).send()};a.prototype.fetchStorylineMoodFiles=function(a,c){var d=b("XSlideshowStorylineMoodAsyncController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(d).setMethod("GET").setData({target_id:c}).setReadOnly(!0).setHandler(function(b){return a(this.getStorylineMoodFiles(b.payload))}.bind(this)).send()};a.prototype.getStorylineMoodFiles=function(a){var c=[];Object.keys(a).forEach(function(b){c.push({moodID:b,fileName:a[b].fileName,categories:a[b].categories,source:null})});return b("immutable").List(c)};a.prototype.scheduleFrameImagesAsyncJob=function(a){var c=b("XSlideshowVideoFrameImagesAsyncController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({request_type:b("SlideshowFrameImagesRequestType").SCHEDULE_ASYNC_JOB,video_id:a}).setMethod("POST").send()};a.prototype.fetchVideoFrameImages=function(a,c){var d=b("XSlideshowVideoFrameImagesAsyncController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(d).setData({request_type:b("SlideshowFrameImagesRequestType").FETCH_FRAME_IMAGES,video_id:c}).setMethod("POST").setHandler(function(b){return a(b.payload)}).send()};a.prototype.uploadAudioFile=function(a,c,d,e){if(!a||!a.input||!a.input.files.length)return;var f=b("XSlideshowStorylineMoodUploadController").getURIBuilder().getURI(),g=new FormData();g.append("audio_file",a.input.files[0]);g.append("target_id",c);new(b("AsyncRequest"))().setURI(f).setRawData(g).setMethod("POST").setErrorHandler(function(a){return e()}).setHandler(function(a){return this.$1(a.payload,d,e)}.bind(this)).send();a.clear()};a.prototype.$1=function(a,b,c){a.success?b({moodID:a.moodID,fileName:a.fileName,categories:a.categories,source:null}):c()};a.prototype.deleteAudioFile=function(a){var c=b("XSlideshowStorylineMoodDeleteController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({mood_id:a}).setMethod("POST").send()};a.prototype.getShakrScopeToken=function(a){var c=b("XSlideshowShakrOAuthController").getURIBuilder();new(b("AsyncRequest"))().setURI(c.getURI()).setHandler(function(b){return a(b.payload)}).send()};a.prototype.pollShakrForVideoURL=function(a,c){var d=b("XSlideshowShakrPollController").getURIBuilder();new(b("AsyncRequest"))().setURI(d.getURI()).setData({show_id:a}).setHandler(function(a){return c(a.payload)}).send()};function a(){}e.exports=new a()}),null);
__d("SlideshowUtil",["SlideshowConstants","SlideshowImageUtil","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=1e3,h=2,i={getDurationParam:function(a,c,d){a=Math.min(a,b("SlideshowConstants").max_photo_num);c=g*c;var e=d*(a-1);c=Math.floor((c-e)/a);return{durationInMS:c,transitionInMS:d}},getTotalLengthInSec:function(a,c){c=Math.min(c,b("SlideshowConstants").max_photo_num);return Math.round(a*c/g)},getMaximumTotalLengthInMS:function(){var a=b("SlideshowConstants").max_photo_num,c=b("SlideshowConstants").image_duration_in_sec_options.slice(-1)[0];return a*c*g},getTotalNumFramesFromVideo:function(){return b("SlideshowConstants").frames_from_video.default_num_selected_frames+h},getSelectedFramesFromVideo:function(a,c){var d=a.length>=c+2?2:0,e=a.length-d;d=d==2?1:0;var f=e+d,g=b("immutable").List();e=Math.max(1,(e-1)/(c-1));while(d<f)g=g.push(a[Math.floor(d)]),d+=e;return g},convertHexToRGB:function(a,c){if(!a)return null;a=a.replace("#","");var d=parseInt(a.substring(0,2),16),e=parseInt(a.substring(2,4),16);a=parseInt(a.substring(4,6),16);c=c?1:b("SlideshowImageUtil").getOpacity();return[Math.round(255*c),d,e,a]},getTextoverlayParam:function(a,c){if(!a.textoverlay_content)return[{text_content:" ",textbox_coordinates:[0,0,0,0]}];var d=b("SlideshowImageUtil").getScaleMultiplierFromCrops(c);return[{background_color:i.convertHexToRGB(a.background_color,!1),text_content:" ",textbox_coordinates:b("SlideshowImageUtil").getOuterTextboxCoordinatesForAPI(c,a,d)},{text_content:a.textoverlay_content,textbox_coordinates:b("SlideshowImageUtil").getInnerTextboxCoordinatesForAPI(c,a,d),text_color:i.convertHexToRGB(a.font_color,!0),text_font:a.font==="Helvetica Neue Slideshow"?"Helvetica Neue":a.font,text_weight:a.bold,text_halign:b("SlideshowImageUtil").getHorizontalAlignmentForAPI(a.text_alignment),text_size:b("SlideshowImageUtil").getFontSize(d)}]}};e.exports=i}),null);
__d("ReactComposerSlideshowAudioStore",["ReactComposerDispatcher","ReactComposerMediaUploadActionType","ReactComposerSelectedImagesStore","ReactComposerSlideshowActions","ReactComposerSlideshowActionType","ReactComposerSlideshowStore","ReactComposerStoreBase","SlideshowAudioUtil","SlideshowDataManager","SlideshowMusicCategory","SlideshowUtil","immutable","mergeDeepInto"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("ReactComposerStoreBase"));g=c&&c.prototype;function a(){"use strict";__p&&__p();var a;g.constructor.call(this,function(){return{audioFileUploadInfo:{isUploading:!1,hasError:!1},editState:null,isPreviewPlaying:!1,recentlyUsedStorylineMoods:b("immutable").List(),selectedMusicCategory:b("SlideshowMusicCategory").ALL_TRACKS,selectedStorylineMood:null,storylineMoodFiles:b("immutable").List(),storylineMoodIDToSource:b("immutable").Map()}},function(c){__p&&__p();switch(c.type){case b("ReactComposerSlideshowActionType").IMAGES_SELECT_CONFIRM:a&&a.$ReactComposerSlideshowAudioStore1(c,function(){b("ReactComposerSlideshowActions").previewStateChange(c.composerID,!1)});break;case b("ReactComposerSlideshowActionType").STORYLINE_MOOD_CHANGE:a&&a.$ReactComposerSlideshowAudioStore2(c);a&&a.$ReactComposerSlideshowAudioStore1(c,function(){b("ReactComposerSlideshowActions").previewStateChange(c.composerID,!0)});break;case b("ReactComposerSlideshowActionType").STORYLINE_MOOD_DELETE:a&&a.$ReactComposerSlideshowAudioStore3(c);break;case b("ReactComposerSlideshowActionType").SHOW_EDIT_SLIDESHOW_DIALOG:a&&a.$ReactComposerSlideshowAudioStore4(c);break;case b("ReactComposerSlideshowActionType").CLOSE_EDIT_SLIDESHOW_DIALOG:a&&a.$ReactComposerSlideshowAudioStore5(c);break;case b("ReactComposerSlideshowActionType").DURATION_CHANGE:a&&a.$ReactComposerSlideshowAudioStore1(c);break;case b("ReactComposerMediaUploadActionType").PHOTO_UPLOAD_ENQUEUED:case b("ReactComposerSlideshowActionType").IMAGE_REMOVE:a&&a.$ReactComposerSlideshowAudioStore1(c);break;case b("ReactComposerSlideshowActionType").SET_STORYLINE_MOOD_FILES:a&&a.$ReactComposerSlideshowAudioStore6(c);break;case b("ReactComposerSlideshowActionType").STORYLINE_MOOD_SOURCE_CHANGE:a&&a.$ReactComposerSlideshowAudioStore7(c);break;case b("ReactComposerSlideshowActionType").STORYLINE_MOOD_SOURCE_MAP_CHANGE:a&&a.$ReactComposerSlideshowAudioStore8(c);break;case b("ReactComposerSlideshowActionType").MUSIC_CATEGORY_SELECT:a&&a.$ReactComposerSlideshowAudioStore9(c);break;case b("ReactComposerSlideshowActionType").PREVIEW_STATE_CHANGE:a&&a.$ReactComposerSlideshowAudioStore10(c);break;case b("ReactComposerSlideshowActionType").AUDIO_FILE_UPLOAD_STARTED:a&&a.$ReactComposerSlideshowAudioStore11(c);break;case b("ReactComposerSlideshowActionType").AUDIO_FILE_UPLOAD_ERROR:a&&a.$ReactComposerSlideshowAudioStore12(c);break;case b("ReactComposerSlideshowActionType").AUDIO_FILE_UPLOAD_SUCCESS:a&&a.$ReactComposerSlideshowAudioStore13(c);break;default:break}});a=this}a.prototype.$ReactComposerSlideshowAudioStore1=function(a,c){"use strict";__p&&__p();var d=a.composerID;a=this.getComposerData(d);var e=a.selectedStorylineMood;if(!e)return;var f=e.moodID;e=this.getNumberOfImages(d);e=e===0?b("SlideshowUtil").getMaximumTotalLengthInMS():this.getTotalLength(d,e);var g=this.getStorylineMoodIDToSource(d);b("SlideshowDataManager").fetchStorylineMoodSource(f,e,function(a){b("ReactComposerSlideshowActions").changeStorylineMoodIDSource(d,a),g=g.set(f,a),b("ReactComposerSlideshowActions").changeStorylineMoodSourceMap(d,g),c&&c()});a.selectedStorylineMood.source=g.get(f);this.emitChange(d)};a.prototype.$ReactComposerSlideshowAudioStore11=function(a){"use strict";a=a.composerID;var c=this.getComposerData(a);c.audioFileUploadInfo.isUploading=!0;c.audioFileUploadInfo.hasError=!1;c.selectedMusicCategory=b("SlideshowMusicCategory").USER_UPLOADED;this.emitChange(a)};a.prototype.$ReactComposerSlideshowAudioStore12=function(a){"use strict";a=a.composerID;var b=this.getComposerData(a);b.audioFileUploadInfo.isUploading=!1;b.audioFileUploadInfo.hasError=!0;this.emitChange(a)};a.prototype.$ReactComposerSlideshowAudioStore13=function(a){"use strict";var b=a.composerID,c=this.getComposerData(b);c.audioFileUploadInfo.isUploading=!1;c.audioFileUploadInfo.hasError=!1;c.storylineMoodFiles=c.storylineMoodFiles.unshift(a.uploadedMood);this.emitChange(b)};a.prototype.$ReactComposerSlideshowAudioStore9=function(a){"use strict";var b=a.composerID,c=this.getComposerData(b);c.selectedMusicCategory=a.selectedMusicCategory;this.emitChange(b)};a.prototype.$ReactComposerSlideshowAudioStore4=function(a){"use strict";a=a.composerID;var c=this.getComposerData(a),d={};b("mergeDeepInto")(d,c);c.editState=d;this.emitChange(a)};a.prototype.$ReactComposerSlideshowAudioStore5=function(a){"use strict";a=a.composerID;var b=this.getComposerData(a),c=b.editState;b.selectedStorylineMood=c.selectedStorylineMood;b.selectedMusicCategory=c.selectedMusicCategory;b.editState=null;this.emitChange(a)};a.prototype.$ReactComposerSlideshowAudioStore2=function(a){"use strict";var b=a.composerID,c=this.getComposerData(b);c.selectedStorylineMood=a.selectedStorylineMood;a.selectedStorylineMood!=null&&(c.recentlyUsedStorylineMoods=c.recentlyUsedStorylineMoods.unshift(a.selectedStorylineMood));this.emitChange(b)};a.prototype.$ReactComposerSlideshowAudioStore3=function(a){"use strict";var c=a.composerID,d=this.getComposerData(c),e=a.selectedStorylineMood;b("SlideshowAudioUtil").storylineMoodCompare(e,d.selectedStorylineMood)&&(d.selectedStorylineMood=null,d.isPreviewPlaying=!1);d.storylineMoodFiles=d.storylineMoodFiles.filter(function(a){return!b("SlideshowAudioUtil").storylineMoodCompare(a,e)});b("SlideshowDataManager").deleteAudioFile(e.moodID);this.emitChange(c)};a.prototype.$ReactComposerSlideshowAudioStore7=function(a){"use strict";var b=a.composerID,c=this.getComposerData(b);if(!c.selectedStorylineMood)return;c.selectedStorylineMood.source=a.storylineMoodIDSource;this.emitChange(b)};a.prototype.$ReactComposerSlideshowAudioStore8=function(a){"use strict";var b=a.composerID,c=this.getComposerData(b);c.storylineMoodIDToSource=a.storylineMoodIDToSource;this.emitChange(b)};a.prototype.$ReactComposerSlideshowAudioStore10=function(a){"use strict";var b=a.composerID,c=this.getComposerData(b);c.isPreviewPlaying=a.isPreviewPlaying;this.emitChange(b)};a.prototype.$ReactComposerSlideshowAudioStore6=function(a){"use strict";var b=a.composerID,c=this.getComposerData(b);c.storylineMoodFiles=a.storylineMoodFiles;this.emitChange(b)};a.prototype.getNumberOfImages=function(a){"use strict";b("ReactComposerDispatcher").waitFor([b("ReactComposerSelectedImagesStore").getDispatchToken()]);return b("ReactComposerSelectedImagesStore").getNumberOfImages(a)};a.prototype.getStorylineMoodFiles=function(a){"use strict";return this.getComposerData(a).storylineMoodFiles.toArray()};a.prototype.getRecentlyUsedStorylineMoods=function(a){"use strict";return this.getComposerData(a).recentlyUsedStorylineMoods.toArray()};a.prototype.getSelectedStorylineMood=function(a){"use strict";return this.getComposerData(a).selectedStorylineMood};a.prototype.getStorylineMoodIDToSource=function(a){"use strict";return this.getComposerData(a).storylineMoodIDToSource};a.prototype.getSelectedMusicCategory=function(a){"use strict";return this.getComposerData(a).selectedMusicCategory};a.prototype.getIsPreviewPlaying=function(a){"use strict";return this.getComposerData(a).isPreviewPlaying};a.prototype.getAudioFileUploadInfo=function(a){"use strict";return this.getComposerData(a).audioFileUploadInfo};a.prototype.getTotalLength=function(a,c){"use strict";b("ReactComposerDispatcher").waitFor([b("ReactComposerSlideshowStore").getDispatchToken()]);return b("ReactComposerSlideshowStore").getTotalLength(a,c)};e.exports=new a()}),null);
__d("ReactComposerStatusActions",["ReactComposerDispatcher","ReactComposerStatusActionType","ReactComposerStatusStore"],(function(a,b,c,d,e,f){__p&&__p();b("ReactComposerStatusStore");a.prototype.setMentionsSource=function(a,c){"use strict";a={composerID:a,type:b("ReactComposerStatusActionType").SET_MENTIONS_SOURCE,mentionsSource:c};b("ReactComposerDispatcher").dispatch(a)};a.prototype.setTypeaheadReporter=function(a,c){"use strict";a={composerID:a,type:b("ReactComposerStatusActionType").SET_TYPEAHEAD_REPORTER,typeaheadReporter:c};b("ReactComposerDispatcher").dispatch(a)};a.prototype.setEditorState=function(a,c){"use strict";a={composerID:a,type:b("ReactComposerStatusActionType").SET_EDITOR_STATE,editorState:c};b("ReactComposerDispatcher").dispatch(a)};a.prototype.setOriginalEditorState=function(a,c){"use strict";a={composerID:a,type:b("ReactComposerStatusActionType").SET_ORIGINAL_EDITOR_STATE,originalEditorState:c};b("ReactComposerDispatcher").dispatch(a)};a.prototype.setMentions=function(a,c){"use strict";a={composerID:a,type:b("ReactComposerStatusActionType").SET_MENTIONS,mentions:c};b("ReactComposerDispatcher").dispatch(a)};a.prototype.setTextLength=function(a,c){"use strict";b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerStatusActionType").SET_TEXT_LENGTH,textLength:c})};a.prototype.removeEditorStateFormatting=function(a){"use strict";b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerStatusActionType").REMOVE_EDITOR_STATE_FORMATTING})};function a(){"use strict"}e.exports=new a()}),null);
__d("ReactComposerLocationAttachmentActionType",["keyMirrorRecursive"],(function(a,b,c,d,e,f){e.exports=b("keyMirrorRecursive")({LOCATION_ATTACHMENT_ENABLED:null,FETCH_LOCATION_ATTACHMENT:null,SET_MINUTIAE_ACTION_CONTEXT:null,SET_LOCATION_MARKUP:null},"ReactComposerLocationAttachmentActionType")}),null);
__d("XReactComposerLocationAttachmentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/react_composer/location/attachment/",{composer_id:{type:"String",required:!0},location_id:{type:"String",required:!0},target_id:{type:"String",required:!0}})}),null);
__d("ReactComposerLocationAttachmentStore",["AsyncRequest","ReactComposerAttachmentActionType","ReactComposerAttachmentStore","ReactComposerAttachmentType","ReactComposerLocationAttachmentActionType","ReactComposerStoreBase","XReactComposerLocationAttachmentController"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("ReactComposerStoreBase"));g=c&&c.prototype;function a(){"use strict";__p&&__p();var a;g.constructor.call(this,function(){return{isEnabled:!1,isFetching:!1,markup:null,pendingRequest:null,minutiaeTaggedPlace:null,isTimeline:!1,sourceAttachment:null}},function(c){__p&&__p();switch(c.type){case b("ReactComposerLocationAttachmentActionType").LOCATION_ATTACHMENT_ENABLED:a&&a.$ReactComposerLocationAttachmentStore1(c);break;case b("ReactComposerLocationAttachmentActionType").FETCH_LOCATION_ATTACHMENT:a&&a.$ReactComposerLocationAttachmentStore2(c);break;case b("ReactComposerLocationAttachmentActionType").SET_MINUTIAE_ACTION_CONTEXT:a&&a.$ReactComposerLocationAttachmentStore3(c);break;case b("ReactComposerLocationAttachmentActionType").SET_LOCATION_MARKUP:a&&a.$ReactComposerLocationAttachmentStore4(c);break;case b("ReactComposerAttachmentActionType").SELECT_ATTACHMENT:a&&a.$ReactComposerLocationAttachmentStore5(c);break}});a=this}a.prototype.isEnabled=function(a){"use strict";return this.getComposerData(a).isEnabled};a.prototype.getMarkup=function(a){"use strict";return this.getComposerData(a).markup};a.prototype.getMinutiaeTaggedPlace=function(a){"use strict";return this.getComposerData(a).minutiaeTaggedPlace};a.prototype.getIsTimeline=function(a){"use strict";return this.getComposerData(a).isTimeline};a.prototype.isFetching=function(a){"use strict";return this.getComposerData(a).isFetching};a.prototype.$ReactComposerLocationAttachmentStore1=function(a){"use strict";a=this.validateAction(a,["composerID","enabled"]);var b=a[0];a=a[1];b=this.getComposerData(b);b.isEnabled=a};a.prototype.$ReactComposerLocationAttachmentStore2=function(a){"use strict";__p&&__p();a=this.validateAction(a,["composerID","locationID","targetID"]);var c=a[0],d=a[1];a=a[2];if(!this.isEnabled(c))return;var e=this.getComposerData(c);e.isFetching=!0;d=b("XReactComposerLocationAttachmentController").getURIBuilder().setString("composer_id",c).setString("location_id",d).setString("target_id",a).getURI();e.pendingRequest=new(b("AsyncRequest"))(d).setFinallyHandler(function(){e.isFetching=!1,e.pendingRequest=null,this.emitChange(c)}.bind(this));e.pendingRequest.send();this.emitChange(c)};a.prototype.$ReactComposerLocationAttachmentStore3=function(a){"use strict";a=this.validateAction(a,["composerID","objectID","isTimeline"]);var b=a[0],c=a[1];a=a[2];var d=this.getComposerData(b);d.minutiaeTaggedPlace=c;d.isTimeline=a;this.emitChange(b)};a.prototype.$ReactComposerLocationAttachmentStore4=function(a){"use strict";a=this.validateAction(a,["composerID","markup"]);var c=a[0];a=a[1];var d=this.getComposerData(c);d.markup=a;d.sourceAttachment=b("ReactComposerAttachmentStore").getSelectedAttachmentID(c);this.emitChange(c)};a.prototype.$ReactComposerLocationAttachmentStore5=function(a){"use strict";__p&&__p();var c=this.validateAction(a,["composerID","id"]),d=c[0];c=c[1];var e=this.getComposerData(d);if(c===b("ReactComposerAttachmentType").STATUS||a.proxiedAttachmentID===e.sourceAttachment||e.sourceAttachment===null)return;e.markup=null;e.isFetching=!1;e.pendingRequest&&e.pendingRequest.abandon();this.emitChange(d)};e.exports=new a()}),null);
__d("ReactComposerLocationAttachmentActions",["ReactComposerDispatcher","ReactComposerLocationAttachmentActionType","ReactComposerLocationAttachmentStore"],(function(a,b,c,d,e,f){__p&&__p();b("ReactComposerLocationAttachmentStore");a.prototype.enabled=function(a,c){"use strict";b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLocationAttachmentActionType").LOCATION_ATTACHMENT_ENABLED,enabled:c})};a.prototype.fetchLocationAttachment=function(a,c,d){"use strict";b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLocationAttachmentActionType").FETCH_LOCATION_ATTACHMENT,locationID:c,targetID:d})};a.prototype.setMinutiaeActionContext=function(a,c,d){"use strict";a={composerID:a,type:b("ReactComposerLocationAttachmentActionType").SET_MINUTIAE_ACTION_CONTEXT,objectID:c,isTimeline:d};b("ReactComposerDispatcher").dispatch(a)};a.prototype.setMarkup=function(a,c){"use strict";b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLocationAttachmentActionType").SET_LOCATION_MARKUP,markup:c})};function a(){"use strict"}e.exports=new a()}),null);
__d("ReactComposerMinutiaeAttachmentActions",["ReactComposerDispatcher","ReactComposerMinutiaeAttachmentActionType","ReactComposerMinutiaeAttachmentStore"],(function(a,b,c,d,e,f){__p&&__p();b("ReactComposerMinutiaeAttachmentStore");a.prototype.fetchMinutiaeAttachment=function(a,c,d,e,f,g){"use strict";a={composerID:a,type:b("ReactComposerMinutiaeAttachmentActionType").FETCH_ATTACHMENT,actionID:c,objectID:d,targetID:e,actorID:f,isTimeline:g};b("ReactComposerDispatcher").dispatch(a)};a.prototype.setExplicitLocation=function(a,c){"use strict";a={composerID:a,type:b("ReactComposerMinutiaeAttachmentActionType").SET_EXPLICIT_LOCATION,explicitLocation:c};b("ReactComposerDispatcher").dispatch(a)};a.prototype.setMarkup=function(a,c){"use strict";a={composerID:a,type:b("ReactComposerMinutiaeAttachmentActionType").SET_MARKUP,markup:c};b("ReactComposerDispatcher").dispatch(a)};a.prototype.setHideAttachment=function(a,c){"use strict";a={composerID:a,type:b("ReactComposerMinutiaeAttachmentActionType").SET_HIDE_OBJECT_ATTACHMENT,hideAttachment:c};b("ReactComposerDispatcher").dispatch(a)};function a(){"use strict"}e.exports=new a()}),null);
__d("ReactComposerTaggerButton.react",["cx","AlignmentEnum","React","Tooltip.react","TooltipLink.react","emptyFunction","joinClasses"],(function(a,b,c,d,e,f,g){a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerTaggerButton",propTypes:{taggerID:a.string.isRequired,title:a.string,tooltip:a.string,selected:a.bool,hasData:a.bool,onSelect:a.func,suppressTaggerLink:a.bool,toolTipAlignH:b("AlignmentEnum").propType},getDefaultProps:function(){return{title:null,tooltip:null,selected:!1,hasData:!1,onSelect:b("emptyFunction"),suppressTaggerLink:!1,toolTipAlignH:null}},render:function(){var a="_3xem"+(this.props.selected?" _50hx":""),c=b("joinClasses")("_2vwi"+(this.props.hasData?" _6xe":""),this.props.className),d=this.props.suppressTaggerLink?b("Tooltip.react"):b("TooltipLink.react");return b("React").createElement(d,{onClick:this._onSelect,"data-testid":"testid-"+this.props.taggerID,tooltip:this.props.tooltip,"data-tooltip-content":this.props.tooltip,className:a,href:"#",alignH:this.props.toolTipAlignH,role:"button"},b("React").createElement("span",{className:"accessible_elem"},this.props.title),b("React").createElement("div",{className:c}),this.props.children)},_onSelect:function(){this.props.onSelect&&this.props.onSelect(this.props.taggerID)}});e.exports=c}),null);
__d("ReactComposerTaggerButtonMixin",["cx","invariant","React","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerTaggerActions","ReactComposerTaggerButton.react","ReactComposerTaggerStore"],(function(a,b,c,d,e,f,g,h){__p&&__p();a={mixins:[b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerTaggerStore"))],statics:{calculateState:function(a,c){c=b("ReactComposerTaggerStore").getSelectedTagger(a);return{selected:c===this.taggerID,hasData:b("ReactComposerTaggerStore").hasData(a,this.taggerID),showNUX:b("ReactComposerTaggerStore").shouldShowNUX(a,this.taggerID),showTooltip:b("ReactComposerTaggerStore").shouldShowTooltip(a,this.taggerID),shouldHide:b("ReactComposerTaggerStore").isDisabled(a,this.taggerID)}}},UNSAFE_componentWillMount:function(){this.constructor.taggerID||h(0,954)},render:function(){if(this.state.shouldHide)return null;var a=this.getTooltopAlignH?this.getTooltopAlignH():null,c=this.getRef?this.getRef():"";return b("React").createElement("div",{className:"uiContextualLayerParent",style:{display:"inline-block"}},b("React").createElement(b("ReactComposerTaggerButton.react"),babelHelpers["extends"]({taggerID:this.constructor.taggerID,title:this.getTitle(),tooltip:this.getTooltip(),className:this.getClassName(),ref:c,onSelect:this._onSelect,suppressTaggerLink:this.constructor.suppressTaggerLink,toolTipAlignH:a},this.state),this.getNUX&&this.getNUX(),this.props.children))},_onSelect:function(){this._onSelectX&&this._onSelectX(),this.constructor.unselectable!==!0&&b("ReactComposerTaggerActions").selectTagger(this.context.composerID,this.constructor.loggingName,this.constructor.taggerID,this.constructor.disableToggle)}};e.exports=a}),null);
__d("ReactComposerPrefillActionTypes",["keyMirrorRecursive"],(function(a,b,c,d,e,f){e.exports=b("keyMirrorRecursive")({SET_PREFILL_DATA:null},"ReactComposerPrefillActionTypes")}),null);
__d("ReactComposerPrefillStore",["invariant","ReactComposerPrefillActionTypes","ReactComposerStoreBase"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=babelHelpers.inherits(a,b("ReactComposerStoreBase"));h=c&&c.prototype;function a(){"use strict";var a;h.constructor.call(this,function(){return{prefillConfig:{}}},function(c){switch(c.type){case b("ReactComposerPrefillActionTypes").SET_PREFILL_DATA:a&&a.$ReactComposerPrefillStore1(c);break}});a=this}a.prototype.getField=function(a,b){"use strict";return this.$ReactComposerPrefillStore2(a,[b])};a.prototype.getAndEraseField=function(a,b){"use strict";return this.getAndEraseNestedField(a,[b])};a.prototype.getAndEraseNestedField=function(a,b){"use strict";b.length>0||g(0,5563);var c=this.$ReactComposerPrefillStore2(a,b);setTimeout(function(){this.$ReactComposerPrefillStore3(a,b)}.bind(this),0);return c};a.prototype.$ReactComposerPrefillStore2=function(a,b){"use strict";a=this.getComposerData(a).prefillConfig;for(var c=0;c<b.length;c++)a=a&&a[b[c]];return a};a.prototype.$ReactComposerPrefillStore4=function(a,b){"use strict";this.$ReactComposerPrefillStore3(a,[b])};a.prototype.$ReactComposerPrefillStore3=function(a,b){"use strict";a=this.getComposerData(a).prefillConfig;for(var c=0;c<b.length-1;c++)a=a&&a[b[c]];a!=void 0&&(a[b[b.length-1]]=null)};a.prototype.$ReactComposerPrefillStore1=function(a){"use strict";a=this.validateAction(a,["composerID","prefillConfig"]);var b=a[0];a=a[1];b=this.getComposerData(b);b.prefillConfig=a||{}};e.exports=new a()}),null);
__d("XReactComposerCollectionSelectorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/react_composer/collections/selector/",{spaces_aware:{type:"Bool",defaultValue:!1}})}),null);
__d("ReactComposerCollectionsStore",["AsyncRequest","LoadObject","ReactComposerActionStore","ReactComposerCollectionsActionTypes","XReactComposerCollectionSelectorController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("ReactComposerActionStore"));g=c&&c.prototype;function a(){__p&&__p();var a;g.constructor.call(this,function(){return{collectionsLoadObject:null,isSelectorVisible:!1}},function(c){switch(c.type){case b("ReactComposerCollectionsActionTypes").SHOW_COLLECTION_SELECTOR:a&&a.$ReactComposerCollectionsStore1(c);break;case b("ReactComposerCollectionsActionTypes").HIDE_COLLECTION_SELECTOR:a&&a.$ReactComposerCollectionsStore2(c);break;case b("ReactComposerCollectionsActionTypes").SHOW_CREATION_LAYER:a&&a.$ReactComposerCollectionsStore3(c);break;case b("ReactComposerCollectionsActionTypes").HIDE_CREATION_LAYER:a&&a.$ReactComposerCollectionsStore4(c);break}});a=this}a.prototype.loadCollections=function(a){var c=this.getComposerData(a);c.collectionsLoadObject=b("LoadObject").loading();c=b("XReactComposerCollectionSelectorController").getURIBuilder().setBool("spaces_aware",!0).getURI();new(b("AsyncRequest"))().setURI(c).setMethod("GET").setReadOnly(!0).setHandler(function(c){var b=this.getComposerData(a);c={albums:c.payload.albums};b.collectionsLoadObject=b.collectionsLoadObject.setValue(c).done();this.emitChange(a)}.bind(this)).send()};a.prototype.addNewAlbum=function(a,b){this.$ReactComposerCollectionsStore5(a,b)};a.prototype.$ReactComposerCollectionsStore5=function(a,b){__p&&__p();var c=this.getCollections(a);if(!c||!c.isDone())return;c=c.getValue();if(c==null)return;c=c.albums;c||(c=[]);c.unshift(b);this.emitChange(a)};a.prototype.getCollections=function(a){a=this.getComposerData(a);return a.collectionsLoadObject};a.prototype.getCollectionByID=function(a,b){a=this.getComposerData(a);a=a.collectionsLoadObject;if(!a||!a.isDone())return null;a=a.getValue();return a.albums&&a.albums.find(function(a){return a.id===b})};a.prototype.isSelectorVisible=function(a){a=this.getComposerData(a);return a.isSelectorVisible};a.prototype.$ReactComposerCollectionsStore1=function(a){a=this.validateAction(a,"composerID");var b=this.getComposerData(a);b.collectionsLoadObject||this.loadCollections(a);b.isSelectorVisible=!0;this.emitChange(a)};a.prototype.$ReactComposerCollectionsStore2=function(a){a=this.validateAction(a,"composerID");var b=this.getComposerData(a);b.isSelectorVisible=!1;this.emitChange(a)};a.prototype.isCreationLayerVisible=function(a){a=this.getComposerData(a);return a.isCreationLayerVisible};a.prototype.$ReactComposerCollectionsStore3=function(a){a=this.validateAction(a,"composerID");var b=this.getComposerData(a);b.isCreationLayerVisible=!0;this.emitChange(a)};a.prototype.$ReactComposerCollectionsStore4=function(a){a=this.validateAction(a,"composerID");var b=this.getComposerData(a);b.isCreationLayerVisible=!1;this.emitChange(a)};e.exports=new a()}),null);
__d("ComposerTestID",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TAGGER_SUMMARY:"tagger-summary",WITH_TOKEN:"withToken",MEDIA_ATTACHMENT:"media-attachment",MEDIA_ATTACHMENT_PHOTO:"media-attachment-photo",MEDIA_ATTACHMENT_VIDEO:"media-attachment-video",PEOPLE_TAGGER:"people-tagger-component",PEOPLE_TAGGER_TEXT_ARIA_LABEL:"Who are you with?",EXPANDED_SPROUT_LIST:"expanded-sprout-list",MEDIA_SPROUT:"media-sprout",ELLIPSIS_SPROUT:"ellipsis-sprout",PEOPLE_SPROUT:"people-sprout",LIVING_ROOM_SPROUT:"living-room-sprout",REACT_COMPOSER_FEEDX_SPROUTS:"react-composer-feedx-sprouts",REACT_COMPOSER_POST_BUTTON:"react-composer-post-button",REACT_COMPOSER_ROOT:"react-composer-root",STATUS_ATTACHMENT_MENTIONS_INPUT:"status-attachment-mentions-input",REACT_COMPOSER_FOOTER:"react-composer-footer",REACT_COMPOSER_FOOTER_WITH_DESTINATION_PICKER:"react-composer-footer-with-destination-picker",XHP_DESTINATION_PICKER:"xhp-destination-picker",DESTINATION_PICKER:"destination-picker",COMPOSER:"composer",SHARE_BUTTON:"composer-share-button",DRAFT_BUTTON:"composer-save-draft-button",LIVE_INSERTED_STORY:"live-inserted-story",PAGE_POST_CONFIRMATION:"page-post-confirmation",VIDEO_PROCESSING_DIALOG:"video_processing_dialog"})}),null);
__d("ReactComposerWithSprouts.react",["cx","Arbiter","FluxContainer","React","ReactComposer.react","ReactComposerActions","ReactComposerAttachmentActions","ReactComposerAttachmentStore","ReactComposerAudienceStore","ReactComposerContextTypes","ReactComposerEvents","ReactComposerFocusStore","ReactComposerLoggingName","ReactComposerSproutsDisplayState","ReactComposerStore","ReactComposerTaggerActions","ReactComposerTaggerStore","ReactComposerTaggerType","SubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;a=babelHelpers.inherits(i,b("React").PureComponent);h=a&&a.prototype;function i(a,b){h.constructor.call(this,a,b),this.beforeCalculateInitialState(this.context.composerID,this.props),this.state=i.calculateState(this.state,this.props,this.context)}i.getStores=function(){return[b("ReactComposerStore"),b("ReactComposerFocusStore"),b("ReactComposerAudienceStore")]};i.prototype.beforeCalculateInitialState=function(a,c){c.expandOnInit&&(this.context.gks&&this.context.gks.lazySproutsExpand||b("ReactComposerActions").expandSprouts(this.context.composerID),b("ReactComposerAttachmentActions").initializeAttachment(a,c.defaultAttachmentOnExpand,!0,b("ReactComposerLoggingName").OTHERS))};i.calculateState=function(a,c,d){a=d.composerID;return{displayState:b("ReactComposerStore").getSproutsDisplayState(a),isFocused:b("ReactComposerFocusStore").isComposerFocused(a),messengerSectionVisible:b("ReactComposerAudienceStore").getMessengerSectionVisible(d.composerID)}};i.prototype.UNSAFE_componentWillMount=function(){this.$1=new(b("SubscriptionsHandler"))(),this.$1.addSubscriptions(b("Arbiter").subscribeOnce("ReactFeedComposerXBootloader/selectcomposer/"+this.context.composerID,function(a,c){return this.$2(b("ReactComposerLoggingName").PROMPT,c&&c.selectedTagger)}.bind(this)))};i.prototype.render=function(){return b("React").createElement("div",{className:"_1cx1"+(this.state.displayState===b("ReactComposerSproutsDisplayState").EXPANDED?" _4qr4":"")+(this.state.displayState===b("ReactComposerSproutsDisplayState").INLINE?" _4a8c":"")+" _4aay _4ab3"+(this.context.gks&&!this.context.gks.addAnyPostToAlbum?" _2qma":"")+(this.state.messengerSectionVisible?" _1qf9":""),onClick:function(a){this.$2(b("ReactComposerLoggingName").INLINE_COMPOSER),this.props.onClick&&this.props.onClick(a)}.bind(this),role:"presentation"},b("React").createElement(b("ReactComposer.react"),this.props.innerProps,this.props.children))};i.prototype.$2=function(a,c){if(!this.state.isFocused){this.context.gks&&this.context.gks.lazySproutsExpand||b("ReactComposerActions").expandSprouts(this.context.composerID);b("ReactComposerAttachmentActions").initializeAttachment(this.context.composerID,this.props.defaultAttachmentOnExpand,!0,a);var d=b("ReactComposerAttachmentStore").getSelectedAttachmentID(this.context.composerID);b("ReactComposerAttachmentActions").selectAttachment(this.context.composerID,d||this.props.defaultAttachmentOnExpand,!0,a);c&&b("ReactComposerTaggerActions").selectTagger(this.context.composerID,c.loggingName,c.taggerType);(!b("ReactComposerTaggerStore").getSelectedTagger(this.context.composerID)||b("ReactComposerTaggerStore").getSelectedTagger(this.context.composerID)===b("ReactComposerTaggerType").FORMATTED_TEXT)&&setTimeout(function(){return b("Arbiter").inform(b("ReactComposerEvents").ACTIVATE_ATTACHMENT+this.context.composerID)}.bind(this),0)}};i.defaultProps={expandOnInit:!1};i.contextTypes=b("ReactComposerContextTypes");e.exports=b("FluxContainer").create(i,{withContext:!0,withProps:!0})}),null);
__d("ReactComposerPostUtilsCore",["invariant","ReactComposerActions"],(function(a,b,c,d,e,f,g){a={getCoreData:function(a,b,c){!isNaN(c)&&c>0||g(0,5885);return Object.assign({is_react:!0,xhpc_composerid:a,xhpc_targetid:c},b)},handlePostSucceeded:function(a){b("ReactComposerActions").postSucceeded(a),b("ReactComposerActions").reset(a)}};e.exports=a}),null);
__d("ReactComposerCollageLayoutActor",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({USER:1,PAGE:2})}),null);
__d("ReactComposerMediaAspectTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LANDSCAPE:"landscape",PORTRAIT:"portrait",SQUARE:"square",PANORAMA_TESTING_ONLY:"panorama",VERTICAL_PANORAMA_TESTING_ONLY:"vertical_panorama"})}),null);
__d("ReactComposerMediaAspect",["ReactComposerMediaAspectTypes"],(function(a,b,c,d,e,f){"use strict";e.exports={fromRect:function(a){return this._fromWidthAndHeight(a.w(),a.h())},fromDimensions:function(a){return this._fromWidthAndHeight(a[0],a[1])},_fromWidthAndHeight:function(a,c){if(a>c)return b("ReactComposerMediaAspectTypes").LANDSCAPE;else if(a<c)return b("ReactComposerMediaAspectTypes").PORTRAIT;else return b("ReactComposerMediaAspectTypes").SQUARE}}}),null);
__d("ReactComposerCollageLayoutModel",["regeneratorRuntime","ReactComposerCollageLayoutActor","ReactComposerMediaAspect"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("regeneratorRuntime").mark(i),h=b("regeneratorRuntime").mark(j);function i(a,c){__p&&__p();var d,e;return b("regeneratorRuntime").wrap(function(b){__p&&__p();while(1)switch(b.prev=b.next){case 0:d=a.next();e=c.next();if(!(d.done||e.done)){b.next=5;break}return b.abrupt("break",9);case 5:b.next=7;return[d.value,e.value];case 7:b.next=0;break;case 9:case"end":return b.stop()}},g,this)}function j(a){__p&&__p();var c,d,e,f,g;return b("regeneratorRuntime").wrap(function(b){__p&&__p();while(1)switch(b.prev=b.next){case 0:c=a,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();case 1:if(!d){b.next=7;break}if(!(e>=c.length)){b.next=4;break}return b.abrupt("break",16);case 4:f=c[e++];b.next=11;break;case 7:e=c.next();if(!e.done){b.next=10;break}return b.abrupt("break",16);case 10:f=e.value;case 11:g=f;b.next=14;return g;case 14:b.next=1;break;case 16:case"end":return b.stop()}},h,this)}function a(a,c){this.$1=!!(a&b("ReactComposerCollageLayoutActor").USER),this.$2=!!(a&b("ReactComposerCollageLayoutActor").PAGE),this.$3=[],c&&this.addPhotoLayouts(c)}a.prototype.addPhotoLayout=function(a){this.$3.push(a);return this};a.prototype.addPhotoLayouts=function(a){a.forEach(function(a){return this.$3.push(a)}.bind(this));return this};a.prototype.getNumPhotoLayouts=function(){return this.$3.length};a.prototype.getPhotoLayouts=function(){return this.$3};a.prototype.getIsValidForPages=function(){return this.$2};a.prototype.getIsValidForUsers=function(){return this.$1};a.prototype.getIsValidFor=function(a){switch(a){case b("ReactComposerCollageLayoutActor").USER:return this.getIsValidForUsers();case b("ReactComposerCollageLayoutActor").PAGE:return this.getIsValidForPages()}return!1};a.prototype.hasMatchingCollagePhotoLayoutType=function(a){var c=b("ReactComposerMediaAspect").fromRect(this.$3[0]);a=b("ReactComposerMediaAspect").fromDimensions(a);return c===a};a.prototype.score=function(a){__p&&__p();var b=0;for(var a=i(j(this.getPhotoLayouts()),a.values()),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];if(!e)continue;var g=f.w();f=f.h();var h=e[0];e=e[1];var k=0;if(h===0||e===0)k=0;else if(g*e/h>=f){var l=g*e/h;k=(l-f)/l}else if(f*h/e>g){l=f*h/e;k=(l-g)/l}b-=k*100;e===h?b-=k*5:g>f?h>e?b+=k*25:b-=k*25:g<f?h<e?b+=k*25:b-=k*25:g===f&&(b-=k*5)}b+=200*this.getNumPhotoLayouts();return b};e.exports=a}),null);
__d("ReactComposerCollageLayoutData",["ReactComposerCollageLayoutModel","ReactComposerJSONCollageLayoutData","Rect"],(function(a,b,c,d,e,f){"use strict";var g=[];Object.keys(b("ReactComposerJSONCollageLayoutData")).forEach(function(a){b("ReactComposerJSONCollageLayoutData")[a].forEach(function(a){g.push(new(b("ReactComposerCollageLayoutModel"))(a.validActors,a.photoLayouts.map(function(a){return new(Function.prototype.bind.apply(b("Rect"),[null].concat(a)))()})))})});e.exports=g}),null);
__d("ReactComposerCollageLayoutSelection",["FBIDCheck","ReactComposerCollageLayoutActor","ReactComposerCollageLayoutData"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports={MAX_NUM_COLS:6,MAX_NUM_ROWS:6,_getCollageLayoutsFor:function(a){return b("ReactComposerCollageLayoutData").filter(function(b){return b.getIsValidFor(a)})},getMaxPhotosSupported:function(){return Math.max.apply(Math,b("ReactComposerCollageLayoutData").map(function(a){return a.getNumPhotoLayouts()}))},getMaxPhotosSupportedFor:function(a){return Math.max.apply(Math,this._getCollageLayoutsFor(a).map(function(a){return a.getNumPhotoLayouts()}))},getCollageLayout:function(a,c){if(!c)return this.getBestUserCollageLayout(a);c=b("FBIDCheck").isUser_deprecated(c)?this.getBestUserCollageLayout(a):this.getBestPageCollageLayout(a);return c},getBestPageCollageLayout:function(a){__p&&__p();if(a.size==0)return new Map();var c=a.values().next().value,d=Math.min(this.getMaxPhotosSupportedFor(b("ReactComposerCollageLayoutActor").PAGE),a.size),e=this._getCollageLayoutsFor(b("ReactComposerCollageLayoutActor").PAGE).filter(function(a){return a.getNumPhotoLayouts()===d});if(!e.length)throw new Error("no valid layout for these media");e=e.filter(function(a){return a.hasMatchingCollagePhotoLayoutType(c)});if(!e.length)throw new Error("no valid layout for these media starts with a suitable aspect");e=e[0];var f=new Map(),g=0;e=e.getPhotoLayouts();for(var a=a.keys(),h=Array.isArray(a),i=0,a=h?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=a.length)break;j=a[i++]}else{i=a.next();if(i.done)break;j=i.value}j=j;var k=e[g++];k&&f.set(j,k)}return f},getBestUserCollageLayout:function(a){__p&&__p();var c=this._getCollageLayoutsFor(b("ReactComposerCollageLayoutActor").USER).filter(function(b){return b.getNumPhotoLayouts()<=a.size});if(!c.length)throw new Error("no valid layout for these media");c=this._bestLayoutByScore(c,a);if(!c)throw new Error("no best layout? Should not happen!");var d=new Map(),e=0;c=c.getPhotoLayouts();for(var f=a.keys(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;var j=c[e++];j&&d.set(i,j)}return d},_bestLayoutByScore:function(a,b){__p&&__p();a=a.map(function(a){return[a,a.score(b)]});a=a.reduce(function(a,b){var c=a[0];a=a[1];var d=b[0];b=b[1];return a===null||b>a?[d,b]:[c,a]},[null,null]);a=a[0];return a}}}),null);
__d("DummySearchSource",["AbstractSearchSource","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("AbstractSearchSource"));g=c&&c.prototype;function a(){"use strict";g.constructor.call(this),this.sessionStart=b("emptyFunction"),this.sessionEnd=b("emptyFunction")}a.prototype.searchImpl=function(a,b,c){"use strict";b([],a)};e.exports=a}),null);
__d("TypeaheadMetricCounter",[],(function(a,b,c,d,e,f){__p&&__p();function a(){"use strict";this.reset()}a.prototype.reset=function(){"use strict";this.stats={},this.avgStats={}};a.prototype.recordStat=function(a,b){"use strict";this.stats[a]=b};a.prototype.recordCountStat=function(a){"use strict";var b=this.stats[a];this.stats[a]=b?b+1:1};a.prototype.recordAvgStat=function(a,b){"use strict";this.avgStats[a]?(this.avgStats[a][0]+=b,this.avgStats[a][1]+=1):this.avgStats[a]=[b,1]};a.prototype.hasStats=function(){"use strict";return!!Object.keys(this.stats).length};a.prototype.getStats=function(){"use strict";var a=babelHelpers["extends"]({},this.stats);for(var b in this.avgStats){var c=this.avgStats[b];a[b]=c[0]/c[1]}return a};e.exports=a}),null);
__d("QueriesHistory",[],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=a,this.reset()}a.prototype.getQueries=function(){"use strict";return this.$2};a.prototype.getCurrentLength=function(){"use strict";return this.$3};a.prototype.add=function(a){"use strict";this.$2.push(a);this.$3+=a.length;while(this.$2.length!==0&&this.$3>this.$1){a=this.$2.shift();this.$3-=a.length}};a.prototype.reset=function(){"use strict";this.$3=0,this.$2=[]};e.exports=a}),null);
__d("TypeaheadMetricReporter",["AsyncRequest","QueriesHistory","Random","TypeaheadMetricCounter","mixInEventEmitter"],(function(a,b,c,d,e,f){__p&&__p();var g="/ajax/typeahead/record_basic_metrics.php",h=1e3;function a(a){"use strict";this.counter=new(b("TypeaheadMetricCounter"))(),this.extraData=Object.assign({},a),this.bootstrapped=!1,this.bootstrapBegin=Date.now(),this.queriesHistory=new(b("QueriesHistory"))(h),this.lastQuery=null,this.sessionActive=!1,this.$1()}a.prototype.getSID=function(){"use strict";return this.sid};a.prototype.sessionStart=function(){"use strict";this.sessionActive=!0,this.sessionStartTime=Date.now()};a.prototype.sessionEnd=function(){"use strict";this.sessionActive&&(this.$2(),this.$1(),this.sessionActive=!1)};a.prototype.setAdditionalStats=function(a){"use strict";a&&Object.entries(a).forEach(function(a){var b=a[0];a=a[1];this.counter.recordStat(b,a)}.bind(this))};a.prototype.sessionPause=function(a){"use strict";this.sessionActive&&(this.setAdditionalStats(a),this.$2(),this.sessionActive=!1)};a.prototype.sessionDeactivate=function(){"use strict";this.sessionActive=!1};a.prototype.reportSelect=function(a,b,c,d,e,f){"use strict";e=e==null?this.lastQuery:e;this.counter.recordStat("selected_id",a||"SELECT_NULL");this.counter.recordStat("selected_type",b);this.counter.recordStat("selected_position",c);this.counter.recordStat("selected_with_mouse",d?1:0);this.counter.recordStat("selected_query",e);for(var g in f)this.counter.recordStat(g,f[g])};a.prototype.reportStrategyName=function(a){"use strict";this.counter.recordStat("strategy_name",a)};a.prototype.reportBootstrapBegin=function(){"use strict";this.bootstrapBegin=Date.now()};a.prototype.reportBootstrapDirty=function(){"use strict";this.bootstrapped=!1};a.prototype.reportBootstrapComplete=function(a){"use strict";this.counter.recordAvgStat("bootstrap_latency",Date.now()-this.bootstrapBegin);var b={};a.forEach(function(a){b[a]=(b[a]||0)+1});this.counter.recordStat("bootstrap_response_types",b);this.bootstrapped=!0};a.prototype.reportQueryBegin=function(a){"use strict";this.counter.recordStat("query",a),this.counter.recordCountStat("num_queries"),this.queriesHistory.add(a),this.lastNotBackspacedQuery.indexOf(a)!==0&&(this.lastNotBackspacedQuery=a),this.lastQuery=a,this.lastQueryTime=Date.now()};a.prototype.reportRequestID=function(a){"use strict";this.lastRequestID=a,this.requestIDHistory.push(a)};a.prototype.reportQueryComplete=function(a,b){"use strict";this.counter.recordAvgStat("avg_query_latency",a),b!==void 0&&this.counter.recordStat("filtered_count",b)};a.prototype.reportResults=function(a,b){"use strict";this.results=a,b===this.lastQuery&&this.counter.recordStat("last_query_latency",Date.now()-this.lastQueryTime)};a.prototype.reportResultsAds=function(a){"use strict";this.resultsAds=a};a.prototype.$1=function(){"use strict";this.sid=Math.floor(Date.now()*b("Random").random()),this.lastNotBackspacedQuery="",this.queriesHistory.reset(),this.results=null,this.resultsAds=null,this.lastRequestID=null,this.requestIDHistory=[],this.counter.reset(),this.emit&&this.emit("reset",{sid:this.sid})};a.prototype.$3=function(){"use strict";var a={};for(var b in this.extraData){var c=this.extraData[b];a[b]=typeof c==="function"?c():c}return a};a.prototype.$2=function(){"use strict";__p&&__p();if(this.counter.hasStats()){this.counter.recordStat("session_time",Date.now()-this.sessionStartTime);this.results&&this.counter.recordStat("candidate_results",JSON.stringify(this.results));this.resultsAds&&this.counter.recordStat("candidate_results_ads",JSON.stringify(this.resultsAds));this.sid&&this.counter.recordStat("sid",this.sid);this.lastNotBackspacedQuery&&this.counter.recordStat("last_not_backspaced_query",this.lastNotBackspacedQuery);this.counter.recordStat("queries_history",JSON.stringify(this.queriesHistory.getQueries()));this.bootstrapped&&this.counter.recordStat("bootstrapped",1);this.lastRequestID&&this.counter.recordStat("request_id",this.lastRequestID);this.requestIDHistory.length&&this.counter.recordStat("request_ids",this.requestIDHistory);var a=babelHelpers["extends"]({},this.counter.getStats(),this.$3());new(b("AsyncRequest"))().setURI(g).setMethod("POST").setData({stats:a}).send();this.emit&&this.emit("submitted",a)}};b("mixInEventEmitter")(a,{reset:!0,submitted:!0});e.exports=a}),null);
__d("dataURLToBlob",["Promise","BlobFactory","CanvasToBlobImpl","CanvasToBlobResource","WebWorker"],(function(a,b,c,d,e,f){__p&&__p();var g=b("CanvasToBlobImpl").getBlob,h=a.URL||a.webkitURL||{};function c(a,c){if(!h.createObjectURL||!b("BlobFactory").isSupported)return b("Promise").reject("Browser doesn't support this feature");if(b("WebWorker").isSupported())return new(b("Promise"))(function(d,e){var f=new(b("WebWorker"))(b("CanvasToBlobResource")).setMessageHandler(function(a){d(a),f.terminate()}).setErrorHandler(function(a){e(a.message),f.terminate()}).execute().postMessage({dataURL:a,fileType:c})});else return b("Promise").resolve(g(a,c))}e.exports=c}),null);
__d("canvasToBlob",["Promise","dataURLToBlob","promiseDone"],(function(a,b,c,d,e,f){function a(a,c,d){return new(b("Promise"))(function(e,f){if(a.toBlob)a.toBlob(e,c,d);else{var g=a.toDataURL(c,d);b("promiseDone")(b("dataURLToBlob")(g,c).then(function(a){e(a)},f))}})}e.exports=a}),null);
__d("LiveVideoBroadcastDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.dispatch=this.dispatch.bind(this)}e.exports=new a({strict:!0})}),null);
__d("VideoThumbnail",["invariant"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a){"use strict";this.$1=a}a.prototype.getURL=function(){"use strict";return this.$1};a.prototype.getData=function(){"use strict";g(0,4844)};a.addTextToCanvasContext=function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a.fillStyle=h;a.textAlign=i;a.font=f+"px "+g;h=i==="center"?d+e/2:d;g=1;i=b.split("\n");for(var d=i,b=Array.isArray(d),i=0,d=b?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(b){if(i>=d.length)break;j=d[i++]}else{i=d.next();if(i.done)break;j=i.value}j=j;var k="",l="";j=j.split(" ");for(var j=j,m=Array.isArray(j),n=0,j=m?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=j.length)break;o=j[n++]}else{n=j.next();if(n.done)break;o=n.value}o=o;l+=o;var p=a.measureText(l).width,q=a.measureText(o).width;if(q>e){k.length>0&&(a.fillText(k,h,c+f*g),g++);q="";var r="";for(var s=o,t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var v;if(t){if(u>=s.length)break;v=s[u++]}else{u=s.next();if(u.done)break;v=u.value}v=v;r+=v;var w=a.measureText(r).width;w>e?(a.fillText(q,h,c+f*g),q=v,r=v,g++):q=r}k=q+" ";l=q+" "}else p>e?(a.fillText(k,h,c+f*g),k=o+" ",l=o+" ",g++):(l+=" ",k=l)}a.fillText(k,h,c+f*g);g++}return a};e.exports=a}),null);
__d("CanvasVideoThumbnail",["Promise","DOM","EventListener","VideoThumbnail","canvasToBlob","promiseDone"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("VideoThumbnail"));g=c&&c.prototype;function a(a,b,c,d,e,f,h){d===void 0&&(d=null),e===void 0&&(e=null),f===void 0&&(f=0),h===void 0&&(h=0),g.constructor.call(this,null),this.$CanvasVideoThumbnail1=a,this.$CanvasVideoThumbnail2=b,this.$CanvasVideoThumbnail3=c,this.$CanvasVideoThumbnail4=d,this.$CanvasVideoThumbnail5=e,this.$CanvasVideoThumbnail6=f,this.$CanvasVideoThumbnail7=h}a.prototype.getTime=function(){"use strict";return this.$CanvasVideoThumbnail3?this.$CanvasVideoThumbnail3:0};a.prototype.getURL=function(){"use strict";this.$CanvasVideoThumbnail8||(this.$CanvasVideoThumbnail8=this.$CanvasVideoThumbnail1.toDataURL("image/jpeg"));return this.$CanvasVideoThumbnail8};a.prototype.getData=function(){"use strict";var a=b("DOM").create("canvas"),c=a.getContext("2d"),d=this.$CanvasVideoThumbnail2;return new(b("Promise"))(function(e,f){var g=b("EventListener").listen(d,"seeked",function(){g.remove(),this.$CanvasVideoThumbnail9(a,c),b("promiseDone")(b("canvasToBlob")(a,"image/jpeg").then(e,f))}.bind(this));d.currentTime=this.$CanvasVideoThumbnail3}.bind(this))};a.prototype.getDataWithText=function(a,c,d,e,f,g,h,i){"use strict";var j=b("DOM").create("canvas"),k=j.getContext("2d"),l=this.$CanvasVideoThumbnail2;return new(b("Promise"))(function(m,n){var o=b("EventListener").listen(l,"seeked",function(){o.remove(),k.fillStyle=h,k.textAlign=i,this.$CanvasVideoThumbnail9(j,k),k=b("VideoThumbnail").addTextToCanvasContext(k,a,c,d,e,f,g,h,i),b("promiseDone")(b("canvasToBlob")(j,"image/jpeg").then(m,n))}.bind(this));l.currentTime=this.$CanvasVideoThumbnail3}.bind(this))};a.prototype.$CanvasVideoThumbnail9=function(a,b){"use strict";var c=this.$CanvasVideoThumbnail2;this.$CanvasVideoThumbnail4||this.$CanvasVideoThumbnail5?(a.width=this.$CanvasVideoThumbnail4?this.$CanvasVideoThumbnail4:c.videoWidth,a.height=this.$CanvasVideoThumbnail5?this.$CanvasVideoThumbnail5:c.videoHeight,this.$CanvasVideoThumbnail10(a,b)):(a.width=c.videoWidth,a.height=c.videoHeight,b.drawImage(c,0,0,a.width,a.height))};a.prototype.$CanvasVideoThumbnail10=function(a,b){"use strict";var c=this.$CanvasVideoThumbnail2,d=this.$CanvasVideoThumbnail6,e=this.$CanvasVideoThumbnail7,f=this.$CanvasVideoThumbnail4?this.$CanvasVideoThumbnail4:a.width,g=this.$CanvasVideoThumbnail5?this.$CanvasVideoThumbnail5:a.height;b.drawImage(c,d,e,f,g,0,0,a.width,a.height)};e.exports=a}),null);
__d("generateVideoThumbnails",["Promise","CanvasVideoThumbnail","EventListener","HTMLMediaElementReadyStates","VideoFrameBuffer"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c,d,e,f,k,l){__p&&__p();f===void 0&&(f="contain");k===void 0&&(k=0);l===void 0&&(l=null);return new(b("Promise"))(function(m,n){__p&&__p();var o,p=document.createElement("canvas"),q=[],r=0,s=(a.duration-k)/e,t=null,u,v,w=g(l,c),x=h(l,d),y=i(l,c),z=j(l,d);u=new(b("VideoFrameBuffer"))(p,a,f,w,x,y,z);p.width=(o=w)!=null?o:c;p.height=(o=x)!=null?o:d;var A=function(){u.updateFrameBuffer();var c=new(b("CanvasVideoThumbnail"))(p,a,k+(r-1)*s,w,x,y,z);q.push(c);(!t||c.getURL().length>t.getURL().length)&&(t=c);C()},B=function(){if(a.readyState>=b("HTMLMediaElementReadyStates").HAVE_CURRENT_DATA)A();else var c=b("EventListener").listen(a,"loadeddata",function(){c.remove(),A()})},C=function(){r===0&&(v=b("EventListener").listen(a,"seeked",B)),r<e?(a.currentTime=k+r*s,r++):(v&&v.remove(),m({thumbnails:q,selectedThumbnail:t}))};if(a.videoWidth===0||a.videoHeight===0){n();return}C()})}function g(a,b){if(a&&a.spherical){if(a.stereoMode==="left-right")return b/2;if(a.projectionType==="cubemap")return b/3}return null}function h(a,b){return a&&a.spherical&&(a.stereoMode==="top-bottom"||a.projectionType==="cubemap")?b/2:null}function i(a,b){return a&&a.spherical&&a.projectionType==="cubemap"?b/3:0}function j(a,b){return a&&a.spherical&&a.projectionType==="cubemap"?b/2:0}e.exports=a}),null);
__d("XVideoPermalinkController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/{vanity}/videos/{?set_token}/{video_id}/{?story_token}/",{photo_id:{type:"Int"},set_token:{type:"String"},type:{type:"Enum",defaultValue:3,enumType:0},link_share:{type:"String"},subject:{type:"Int"},object_id:{type:"Int"},opaque_cursor:{type:"String"},legacy_user_id:{type:"Int"},legacy_photo_id:{type:"Int"},video_id:{type:"Int"},comment_id:{type:"Int"},notif_t:{type:"String"},is_notification_preview:{type:"Bool",defaultValue:!1},force_theater:{type:"Bool",defaultValue:!1},story_token:{type:"String"},vanity:{type:"String"},__tn__:{type:"String"},t:{type:"Int"},reply_comment_id:{type:"Int"}})}),null);
__d("VideoPermalinkText.react",["cx","React","XUITextInput.react","XVideoPermalinkController"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.$1=function(){"use strict";return b("XVideoPermalinkController").getURIBuilder().setInt("video_id",this.props.videoID).setString("vanity",this.props.targetID).getURI().getQualifiedURI().toString()};a.prototype.render=function(){"use strict";return b("React").createElement(b("XUITextInput.react"),{className:"_9_1",value:this.$1(),size:85,height:"tall",ref:"permalink_field",onFocus:function(){return this.refs.permalink_field.getTextFieldDOM().select()}.bind(this)})};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("VideoEditSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PROCESSING_DIALOG:"processing_dialog",OPTIMISTIC_VIDEO_POST:"optimistic_video_post",VIDEO_ASSET_INSIGHTS:"video_asset_insights",PERMALINK:"permalink",TIMELINE:"timeline",SNOWLIFT:"snowlift",LIBRARY:"library",SEASON_DETAILS:"season_details",PLAYLIST_DETAILS:"playlist_details",REFERENCE_LIBRARY:"reference_library",CAROUSEL_PREVIEW:"carousel_preview",PAGE_VIDEO_LPP_PUBLISH:"page_video_lpp_publish",SCHEDULE_LIVE_STORY:"schedule_live_story",TAHOE:"tahoe",MEDIA_MANAGER_CONTENT_LIBRARY:"media_manager_content_library",UNKNOWN:"unknown",VIDEO_PAGE_SPOTLIGHT_SELECTOR:"video_page_spotlight_selector",PAGE_CONTENT_TAB:"page_content_tab"})}),null);
__d("VideoLibraryButton.react",["cx","fbt","React","XPagesManagerPublishingToolsController","XUIDialogButton.react"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.$1=function(){"use strict";return b("XPagesManagerPublishingToolsController").getURIBuilder().setString("page_token",this.props.pageID).setString("section","VIDEOS").setEnum("source",this.props.source).setEnum("refSource",this.props.refSource).getURI()};a.prototype.$2=function(){"use strict";this.$1().go()};a.prototype.render=function(){"use strict";return b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",className:"_2bhc",label:h._("Video Library"),size:this.props.size,onClick:this.$2.bind(this)})};function a(){"use strict";i.apply(this,arguments)}a.defaultProps={size:"small"};e.exports=a}),null);
__d("VideoLibrarySource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({VIDEO_UPLOAD_CONFIRMATION_DIALOG:"video_upload_confirmation_dialog",OPTIMISTIC_VIDEO_POST:"optimistic_video_post",VIDEO_INSIGHTS:"video_insights",VIDEOS_HUB:"videos_hub",VIDEO_PAGE_VIDEO_LIST:"video_page_video_list",VIDEO_PAGE_VIDEO_TAB:"video_page_video_tab"})}),null);
__d("XVideoEditController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/edit/",{v:{type:"Int",required:!0},album:{type:"Int"},source:{type:"Enum",enumType:1},notif_t:{type:"String"}})}),null);
__d("VideoUploadProcessingDialog.react",["fbt","ActorURI","PublishingToolsSource","React","VideoEditSource","VideoLibraryButton.react","VideoLibrarySource","VideoPermalinkText.react","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCloseButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XVideoEditController","XVideoEditDialogController"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={dialogShown:!0},this.$1=function(a){this.setState({dialogShown:a}),!a&&this.props.onClose&&this.props.onClose()}.bind(this),this.$2=function(){this.setState({dialogShown:!1})}.bind(this),this.$4=function(){return this.props.isSecretVideo?g._("Processing Secret Video"):g._("Processing Video")}.bind(this),b}a.prototype.UNSAFE_componentWillReceiveProps=function(a){"use strict";a.show&&this.setState({dialogShown:!0})};a.prototype.$3=function(){"use strict";if(this.props.isReferenceVideo)return g._("Your reference file is now processing. We will send you a notification when it's ready and monitored.");else if(this.props.isSecretVideo)return b("React").createElement("div",null,g._("Your secret video is now processing. We will notify you when it is it ready to view at the following location:"),b("React").createElement(b("VideoPermalinkText.react"),{targetID:String(this.context&&this.context.targetID||this.props.pageID),videoID:this.props.videoID}));else return g._("Your video is now processing. We will send you a notification when it's ready to view.")};a.prototype.render=function(){"use strict";var a,c=g._("Edit Video"),d;this.props.isReferenceVideo?d=null:this.props.shouldShowNewEditDialog&&this.props.pageID?(a=b("XVideoEditDialogController").getURIBuilder().setInt("video_id",this.props.videoID).setEnum("source",b("VideoEditSource").PROCESSING_DIALOG).getURI(),a=b("ActorURI").create(a,this.props.pageID),d=b("React").createElement(b("XUIDialogButton.react"),{action:"confirm",label:c,href:a,onClick:this.$2,rel:"dialog"})):(a=b("XVideoEditController").getURIBuilder().setInt("v",this.props.videoID).setEnum("source",b("VideoEditSource").PROCESSING_DIALOG).getURI(),d=b("React").createElement(b("XUIDialogButton.react"),{action:"confirm",label:c,href:a,onClick:this.$2,target:"_blank"}));c=null;this.props.shouldShowVideoLibrary&&(c=b("React").createElement(b("VideoLibraryButton.react"),{pageID:this.props.pageID,size:"medium",source:b("VideoLibrarySource").VIDEO_UPLOAD_CONFIRMATION_DIALOG,refSource:b("PublishingToolsSource").VIDEO_UPLOAD_CONFIRMATION_DIALOG}));return b("React").createElement(b("XUIDialog.react"),{shown:this.state.dialogShown,width:400,onToggle:this.$1,key:"dialog"},b("React").createElement(b("XUIDialogTitle.react"),null,this.$4()),b("React").createElement(b("XUIDialogBody.react"),null,this.$3()),b("React").createElement(b("XUIDialogFooter.react"),{leftContent:c},b("React").createElement(b("XUIDialogCloseButton.react"),null),d))};a.propTypes={onClose:c.func,shouldShowNewEditDialog:c.bool,isReferenceVideo:c.bool,shouldShowVideoLibrary:c.bool};e.exports=a}),null);
__d("CollageLayoutConfig",[],(function(a,b,c,d,e,f){__p&&__p();var g=4;function a(a,b,c,d){c===void 0&&(c=g),this.$2=c,this.$3=b,this.$5=d,this.$6(a)}a.prototype.getItemStyleInfos=function(){"use strict";return this.$1};a.prototype.getIndexForPoint=function(a,b){"use strict";var c=this.$1.findIndex(function(c){return c.left<=a&&c.top<=b&&c.left+c.width>=a&&c.top+c.height>=b});return c===-1?null:c};a.prototype.getCalculatedHeight=function(){"use strict";return this.$4};a.prototype.getSpacing=function(){"use strict";return this.$2};a.prototype.getWidth=function(){"use strict";return this.$3};a.prototype.$6=function(a){"use strict";__p&&__p();var b=this.$7(a),c=this.$8(a),d=this.$2*(c-1),e=Math.ceil((this.$3-d)/c);this.$4=this.$5||(e+this.$2)*b-this.$2;d=this.$2*(b-1);var f=Math.ceil((this.$4-d)/b);this.$1=[];a.forEach(function(a){a={left:(e+this.$2)*a.x,top:(f+this.$2)*a.y,width:(e+this.$2)*a.width-this.$2,height:(f+this.$2)*a.height-this.$2};a.left+a.width>this.$3&&(a.width=this.$3-a.left);this.$1.push(a)}.bind(this))};a.prototype.$8=function(a){"use strict";var b=0;a.forEach(function(a){b=Math.max(b,a.x+a.width)});return b};a.prototype.$7=function(a){"use strict";var b=0;a.forEach(function(a){b=Math.max(b,a.y+a.height)});return b};e.exports=a}),null);
__d("createPlainBlocksFromText",["CharacterMetadata","ContentBlock","immutable","generateRandomKey","sanitizeDraftText"],(function(a,b,c,d,e,f){"use strict";var g=b("immutable").List,h=b("immutable").Repeat,i=b("CharacterMetadata").EMPTY;function a(a){return a.map(function(a){a=b("sanitizeDraftText")(a);var c=a.length;return new(b("ContentBlock"))({key:b("generateRandomKey")(),text:a,type:"unstyled",characterList:g(h(i,c))})})}e.exports=a}),null);
__d("createEditorStateWithRanges",["invariant","ContentState","DraftModifier","EditorState","SelectionState","UnicodeUtils","createPlainBlocksFromText"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a){__p&&__p();var c=a.addEntityToContentStateFn,d=a.allowUndo,e=a.decorator,f=a.splitIntoBlocks,h=a.text;a=a.ranges;f===void 0&&(f=!0);h||(h="");var i=[],j=[];f=f?h.split(/(\r\n?|\n)/g):[h];var k=0;f.forEach(function(a,c){c%2===0&&(i.push(a),j.push(k)),k+=b("UnicodeUtils").strlen(a)});var l=b("createPlainBlocksFromText")(i);h=b("ContentState").createFromBlockArray(l);if(a&&a.length&&c){var m=c;h=a.reduce(function(a,c,d){__p&&__p();d=m(c,a);a=d.getLastCreatedEntityKey();var e=c.offset;c=e+c.length;var f,h,i,k;for(var n=0;n<j.length;n++){var o=j[n],p=j[n+1],q=p===void 0;(q||e>=o&&e<p)&&(f=l[n],h=e-o);if(q||c>=o&&c<p){i=l[n];k=c-o;break}}f&&i||g(0,1022);q=b("UnicodeUtils").substr(f.getText(),0,h);p=q.length;o=b("UnicodeUtils").substr(i.getText(),0,k);c=o.length;e=new(b("SelectionState"))({anchorKey:f.getKey(),anchorOffset:p,focusKey:i.getKey(),focusOffset:c,isBackward:!1,hasFocus:!1});n=b("DraftModifier").applyEntity(d,e,a);return n},h)}f=b("EditorState").createWithContent(h,e);d===!1&&(f=b("EditorState").set(f,{allowUndo:!1}));return f}e.exports=a}),null);
__d("Emscripten",[],(function(a,b,c,d,e,f){e.exports={isSupported:function(){return typeof Int32Array!=="undefined"&&typeof Float64Array!=="undefined"&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set}}}),null);
__d("PUWErrorCodes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BAD_JPEG:9901,WORKER_TERMINATED:9902,UNKNOWN_RESIZE_ERROR:9903,WORKER_ABORT:9904})}),null);
__d("PooledWebWorker",["WebWorker"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("WebWorker"));g=c&&c.prototype;function a(a,b,c){"use strict";g.constructor.call(this,c),this.$PooledWebWorker1=b,this.$PooledWebWorker2=a}a.prototype.getIndex=function(){"use strict";return this.$PooledWebWorker1};a.prototype.getPool=function(){"use strict";return this.$PooledWebWorker2};e.exports=a}),null);
__d("WebWorkerPool",["PooledWebWorker","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();a.isSupported=function(){"use strict";return b("PooledWebWorker").isSupported()};function a(a,c){"use strict";this.$1=[];for(var d=0;d<c;d++)this.$1.push(new(b("PooledWebWorker"))(this,d,a).setErrorHandler(this.$2).setMessageHandler(this.$3).execute());this.$4=0}a.prototype.setMessageHandler=function(a){"use strict";this.$5=a||b("emptyFunction");return this};a.prototype.setAllowCrossPageTransition=function(a){"use strict";this.$1.forEach(function(b){return b.setAllowCrossPageTransition(a)});return this};a.prototype.setErrorHandler=function(a){"use strict";this.$6=a||b("emptyFunction");return this};a.prototype.postMessage=function(){"use strict";var a=this.getWorker();for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];a.postMessage.apply(a,c);return a};a.prototype.$3=function(){"use strict";for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];b.unshift(this);this.getPool().$5.apply(this.getPool(),b)};a.prototype.$2=function(){"use strict";for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];b.unshift(this);return this.getPool().$6.apply(this.getPool(),b)};a.prototype.getWorker=function(){"use strict";var a=this.$1[this.$4];this.$4=(this.$4+1)%this.$1.length;return a};e.exports=a}),null);
__d("JpegResizer",["Emscripten","JpegResizerConfig","JpegResizeWorkerResource","PUWErrorCodes","WebWorker","WebWorkerPool"],(function(a,b,c,d,e,f){__p&&__p();var g=null;h.isSupported=function(){"use strict";return b("WebWorkerPool").isSupported()&&b("Emscripten").isSupported()&&!b("JpegResizerConfig").isGKBlacklisted};h.getSingleton=function(a){"use strict";g||(g=new h(a||h.DEFAULT_POOL_SIZE).setAllowCrossPageTransition(!0));return g};h.prepareResource=function(a){"use strict";b("WebWorker").prepareResource(b("JpegResizeWorkerResource"),a)};function h(a){"use strict";a=a||h.DEFAULT_POOL_SIZE,b("WebWorker").prepareResource(b("JpegResizeWorkerResource")),this.$1=new(b("WebWorkerPool"))(b("JpegResizeWorkerResource"),a).setErrorHandler(this.$2.bind(this)).setMessageHandler(this.$3.bind(this)),this.$4={},this.$5=h.DEFAULT_RESIZE_HEIGHT,this.$6=h.DEFAULT_RESIZE_WIDTH,this.$7=0,this.$8=85}h.prototype.setHighQuality=function(a){"use strict";a?(this.$5=h.DEFAULT_RESIZE_HEIGHT,this.$6=h.DEFAULT_RESIZE_WIDTH):(this.$5=h.LOW_QUALITY_RESIZE_HEIGHT,this.$6=h.LOW_QUALITY_RESIZE_WIDTH);return this};h.prototype.setEncodeQuality=function(a){"use strict";this.$8=a;return this};h.prototype.setUndershoot=function(a){"use strict";this.$7=a;return this};h.prototype.setAllowCrossPageTransition=function(a){"use strict";this.$1.setAllowCrossPageTransition(a);return this};h.prototype.resizeBlob=function(a,b,c){"use strict";return this.$9(a,this.$6,this.$5,b,c)};h.prototype.resize360Blob=function(a,b,c,d){"use strict";var e=this.$6*3,f=this.$5*3;d&&(e=d,f=d);return this.$9(a,e,f,b,c)};h.prototype.$9=function(a,c,d,e,f){"use strict";__p&&__p();var g=this.$1.getWorker();if(g.isCurrentState("terminated")){var h=new Error("Worker terminated");h.code=b("PUWErrorCodes").WORKER_TERMINATED;e(h);return this}h=g.postMessage({blob:a,height:d,width:c,quality:this.$8,undershoot:this.$7}).getIndex();this.$10(h).unshift({done:e,progress:f});return this};h.prototype.$10=function(a){"use strict";Object.prototype.hasOwnProperty.call(this.$4,a)||(this.$4[a]=[]);return this.$4[a]};h.prototype.$2=function(a,b){"use strict";a.terminate();a=this.$10(a.getIndex());this.$11(b);a.forEach(function(a){return a.done(b)});a.length=0};h.prototype.$3=function(a,b){"use strict";b.error&&this.$11(b.error);if(b.done)this.$10(a.getIndex()).pop().done(b.error,b.blob,b.skipped,b.originalWidth,b.originalHeight);else{a=this.$10(a.getIndex());a=a[a.length-1].progress;a&&a({written:b.written,total:b.total})}};h.prototype.$11=function(a){"use strict";var c=a.message;c&&c.indexOf("Not a JPEG file")!==-1?a.code=b("PUWErrorCodes").BAD_JPEG:c&&c.indexOf("abort()")!==-1?a.code=b("PUWErrorCodes").WORKER_ABORT:a.code=b("PUWErrorCodes").UNKNOWN_RESIZE_ERROR};h.DEFAULT_POOL_SIZE=3;h.DEFAULT_RESIZE_HEIGHT=2048;h.DEFAULT_RESIZE_WIDTH=2048;h.LOW_QUALITY_RESIZE_HEIGHT=960;h.LOW_QUALITY_RESIZE_WIDTH=960;e.exports=h}),null);
__d("Asset3DBackground",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DEFAULT:"default",CREATOR:"creator",MEDIUM:"medium",SPACES:"spaces",ONE:"one",TWO:"two",THREE:"three",FOUR:"four",FIVE:"five",SIX:"six",SEVEN:"seven",EIGHT:"eight",NINE:"nine",TEN:"ten",ELEVEN:"eleven",TWELVE:"twelve",THIRTEEN:"thirteen",FOURTEEN:"fourteen",FIFTEEN:"fifteen",SIXTEEN:"sixteen",SEVENTEEN:"seventeen",EIGHTEEN:"eighteen",TWENTY:"twenty",TWENTYONE:"twentyone",TWENTYTWO:"twentytwo",TWENTYTHREE:"twentythree",TWENTYFOUR:"twentyfour",TWENTYFIVE:"twentyfive",TWENTYSIX:"twentysix",TWENTYSEVEN:"twentyseven",TWENTYEIGHT:"twentyeight",TWENTYNINE:"twentynine",THIRTY:"thirty",THIRTYONE:"thirtyone",THIRTYTWO:"thirtytwo",THIRTYTHREE:"thirtythree",THIRTYFOUR:"thirtyfour",THIRTYFIVE:"thirtyfive",THIRTYSIX:"thirtysix"})}),null);
__d("CommerceSelfServeNUXType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADD_SHIPPING_OPTIONS_PUX:"add_shipping_options_pux",COLLECTION_SHARE_UPSELL:"collection_share_upsell",COMPOSER_PRODUCT_PHOTO_TAGGER_BUTTON:"composer_product_photo_tagger_button",COMPOSER_PRODUCT_TAGGER_BUTTON:"composer_product_tagger_button",FIRST_ORDER_BANNER:"first_order_banner",FIRST_ORDER_MODAL:"first_order_modal",PHOTO_VIEWER_PRODUCT_TAGGER_BUTTON:"photo_viewer_product_tagger_button",PRODUCT_ATTACHMENT_COMPOSER:"product_attachment_composer_nux",SHOP_NOW_CTA:"shop_now_cta",SHOP_TAB_IN_PUBLISHING_TOOLS:"shop_tab_pt_self_serve_nux",SHOP_TAB_ON_PAGE:"shop_tab_page_self_serve_nux",VIDEO_COMPOSER_PRODUCT_TAGGER_BUTTON:"video_composer_product_tagger_button",VIDEO_EDITOR_PRODUCT_TAGGER_BUTTON:"video_editor_product_tagger_button",VIDEO_COMPOSER_MESSENGER_PROMPT_BUTTON:"video_composer_messenger_prompt_button",PHOTO_COMPOSER_MESSENGER_PROMPT_BUTTON:"photo_composer_messenger_prompt_button",INVOICE_PAYMENTS_CONFIRM_PUX:"invoice_payments_confirm_pux",INVOICE_PAYMENTS_CREATION_PUX:"invoice_payments_creation_pux",INVOICE_PAYMENTS_PAGE_WITH_BANK_LANDING_UPSELL:"invoice_payments_page_with_bank_landing_upsell",ADMIN_PAYMENTS_NAV_ITEM_WITH_BANK_NUX:"admin_payments_nav_item_with_bank_nux",COMMERCE_INTRO_LANDING_NUX:"commerce_intro_landing_nux",PRODUCT_TAG_PAGE_LANDING_UPSELL:"product_tag_page_landing_upsell",INVOICE_PAYMENTS_INVOICE_CREATION_BUTTON:"invoice_payments_invoice_creation_button",INVOICE_PAYMENTS_PAGE_LANDING_UPSELL:"invoice_payments_page_landing_upsell",ADMIN_PAYMENTS_NAV_ITEM_NUX:"admin_payments_nav_item_nux"})}),null);
__d("FacerecWaterfallEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({RECOGNITION_RECEIVED_BY_CLIENT:"recognition_received_by_client",CLIENT_RECOGNITION_POLLER_TIMEOUT:"client_recognition_poller_timeout",CLIENT_RECOGNITION_POLLER_GIVE_UP:"client_recognition_poller_give_up",SERVER_PHOTO_PUBLISHED:"server_photo_published",SERVER_PHOTO_TAG_ADDED:"sever_photo_tag_added",SERVER_RECOGNITION_OF_PHOTO_POLLED:"server_recognition_of_photo_polled",SERVER_RECOGNITION_OF_FACE_BOX_RETURNED:"server_recognition_of_face_box_returned",CLIENT_PHOTO_PUBLISHED:"client_photo_published"})}),null);
__d("InstantGamesFeedEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PLAY_WITH_FRIENDS_ATTACHMENT_CLICK:"play_with_friends_attachment_click",PLAY_WITH_FRIENDS_ATTACHMENT_IMPRESSION:"play_with_friends_attachment_impression",PLAY_WITH_FRIENDS_ATTACHMENT_RENDER_FAILED:"play_with_friends_attachment_render_failed",PLAY_WITH_FRIENDS_COMPOSER_ATTACHMENT_ADDED:"play_with_friends_composer_attachment_added",PLAY_WITH_FRIENDS_COMPOSER_ATTACHMENT_REMOVED:"play_with_friends_composer_attachment_removed",PLAY_WITH_FRIENDS_COMPOSER_TAGGER_OPENED:"play_with_friends_composer_tagger_opened",PLAY_WITH_FRIENDS_COMPOSER_TAGGER_GAME_SELECTED:"play_with_friends_composer_tagger_game_selected",PLAY_WITH_FRIENDS_COMPOSER_SPROUT_SHOWN:"play_with_friends_composer_sprout_shown",PLAY_WITH_FRIENDS_COMPOSER_POST_ATTEMPTED:"play_with_friends_composer_post_attempted",PLAY_WITH_FRIENDS_COMPOSER_POST_CREATED:"play_with_friends_composer_post_created",POST_CONTEXT_UPDATE_UNIT_CLICK:"post_context_update_unit_click",POST_CONTEXT_UPDATE_UNIT_IMPRESSION:"post_context_update_unit_impression",LEADERBOARD_UPDATE_UNIT_CLICK:"leaderboard_update_unit_click",LEADERBOARD_UPDATE_UNIT_IMPRESSION:"leaderboard_update_unit_impression",GROUP_GAMES_TAB_IMPRESSION:"group_games_tab_impression",GROUP_GAMES_TAB_CLICK:"group_games_tab_click",GROUP_GAMES_TAB_OPT_IN:"group_games_tab_opt_in",GROUP_GAMES_TAB_OPT_OUT:"group_games_tab_opt_out",GROUP_POST_ACTION_LINK_CLICK:"group_post_action_link_click",GROUP_POST_ACTION_LINK_IMPRESSION:"group_post_action_link_impression",GROUP_UPSELL_GAME_IMPRESSION:"group_upsell_game_impression",GROUP_UPSELL_GAME_CLICK:"group_upsell_game_click",GROUP_UPSELL_SESSION:"group_upsell_session",GROUP_UPSELL_EDGE_STORY_CREATED:"group_upsell_edge_story_created",GROUP_UPSELL_EDGE_STORY_CREATION_DENIED:"group_upsell_edge_story_creation_denied",GROUP_UPSELL_EDGE_STORY_FEED_LOAD:"group_upsell_edge_story_feed_load",GROUP_UPSELL_UNIT_IMPRESSION:"group_upsell_unit_impression",GAME_GROUP_MALL_VISIT:"game_group_mall_visit",INSTANT_GAME_PLAY_EDGE_STORY_CREATED:"instant_game_play_edge_story_created",INSTANT_GAME_RATING_EDGE_STORY_CREATED:"instant_game_rating_edge_story_created",STORY_INVALIDATED:"story_invalidated",INSTANT_GAME_HIGH_SCORE_STORY_CREATED:"insatnt_game_high_score_event_created",INSTANT_GAME_HIGH_SCORE_ENT_CAN_BE_CREATED:"insatnt_game_high_score_ent_can_be_created"})}),null);
__d("InstantGamesFeedEventSection",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GAME_SHARE:"game_share",GROUP_GAMES_TAB:"group_games_tab",GROUP_POST:"group_post",GROUP_UPSELL:"group_upsell",PLAY_WITH_FRIENDS_ATTACHMENT:"play_with_friends_attachment",PLAY_WITH_FRIENDS_SHARE:"play_with_friends_share",CONTEXT_CHOOSE:"context_choose"})}),null);
__d("PhotoEditorTargetType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({COMPOSER:"composer",COMMENT:"comment",PAGE_PRODUCT_COMPOSER:"page_product_composer",PROFILE_PIC:"profile_pic"})}),null);
__d("ProductCondition",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PC_NEW:"new",PC_REFURBISHED:"refurbished",PC_USED:"used",PC_CPO:"cpo",PC_OPEN_BOX_NEW:"open_box_new",UNKNOWN:""})}),null);
__d("FlexboxStyles",[],(function(a,b,c,d,e,f){"use strict";a={alignItems:!0,flexDirection:!0,justifyContent:!0};e.exports=a}),null);
__d("LayoutStyles",["FlexboxStyles"],(function(a,b,c,d,e,f){"use strict";a=babelHelpers["extends"]({},b("FlexboxStyles"),{borderBottomWidth:!0,borderLeftWidth:!0,borderRightWidth:!0,borderTopWidth:!0,borderWidth:!0,bottom:!0,height:!0,left:!0,margin:!0,marginBottom:!0,marginLeft:!0,marginRight:!0,marginTop:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,opacity:!0,overflow:!0,padding:!0,paddingBottom:!0,paddingLeft:!0,paddingRight:!0,paddingTop:!0,position:!0,top:!0,transform:!0,transformOrigin:!0,width:!0});e.exports=a}),null);
__d("ViewStyles",["LayoutStyles"],(function(a,b,c,d,e,f){"use strict";a=babelHelpers["extends"]({},b("LayoutStyles"),{backgroundColor:!0,borderBottomColor:!0,borderBottomLeftRadius:!0,borderBottomRightRadius:!0,borderBottomWidth:!0,borderColor:!0,borderLeftColor:!0,borderLeftWidth:!0,borderRadius:!0,borderRightColor:!0,borderRightWidth:!0,borderStyle:!0,borderTopColor:!0,borderTopLeftRadius:!0,borderTopRightRadius:!0,borderTopWidth:!0,borderWidth:!0,flex:!0,opacity:!0,overflow:!0});e.exports=a}),null);
__d("TextStyles",["ViewStyles"],(function(a,b,c,d,e,f){"use strict";a=babelHelpers["extends"]({},b("ViewStyles"),{color:!0,fontFamily:!0,fontSize:!0,fontStyle:!0,fontWeight:!0,letterSpacing:!0,lineHeight:!0,textAlign:!0,textDecorationLine:!0,whiteSpace:!0});e.exports=a}),null);
__d("flattenStyle",["mapObject"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();if(!a)return null;if(!Array.isArray(a))return b("mapObject").untyped(a,function(b,a){return h(b,a)});var c={};for(var d=0,e=a.length;d<e;++d){var f=g(a[d]);if(f)for(var i in f)c[i]=f[i]}return c}function h(a,b){return b==="lineHeight"&&typeof a==="number"?a+"px":a}e.exports=g}),null);
__d("getValidatedStyle",["filterObject","flattenStyle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={textDecorationLine:"textDecoration"};function a(a,c){if(!a)return null;a=b("flattenStyle")(a);return h(b("filterObject")(a,function(a,b){return!!c[b]}),g)}function h(a,b){var c=babelHelpers["extends"]({},a);Object.keys(b).forEach(function(a){if(Object.prototype.hasOwnProperty.call(c,a)){var d=b[a];c[d]=c[a];delete c[a]}});return c}e.exports=a}),null);
__d("pluckClassNames",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){var b=[],c=[];Array.isArray(a)?a.forEach(function(a){a=g(a);var d=a.classNames;a=a.styles;b=b.concat(d);c=c.concat(a)}):typeof a==="string"?b.push(a):c.push(a);return{classNames:b,styles:c}}e.exports=g}),null);
__d("Text",["cx","React","TextStyles","getValidatedStyle","joinClasses","pluckClassNames"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;a=b("React").PropTypes;h=babelHelpers.inherits(i,b("React").Component);h&&h.prototype;i.prototype.getChildContext=function(){return{inline:!0}};i.prototype.render=function(){__p&&__p();var a=this.props,c=a.children;a=a.style;a=b("pluckClassNames")(a);var d=a.classNames;a=a.styles;a=b("getValidatedStyle")(a,b("TextStyles"));var e=typeof c==="string",f=this.context.inline;f=b("joinClasses").apply(void 0,["_b5a"+(!e&&!f?" _b5b":"")+(f?" _b5c":"")].concat(d));e?d=c:d=b("React").Children.map(c,function(a){return typeof a==="string"?b("React").createElement(i,null,a):a});return b("React").createElement("div",{className:f,style:a},d)};function i(){h.apply(this,arguments)}i.childContextTypes={inline:a.bool};i.contextTypes={inline:a.bool};e.exports=i}),null);
__d("RegexMatchSearchSource",["AbstractSearchSource","SearchableEntry"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("AbstractSearchSource"));g=c&&c.prototype;function a(a,b,c){"use strict";g.constructor.call(this),this.$RegexMatchSearchSource2=new RegExp(a),this.$RegexMatchSearchSource3=b||"",this.$RegexMatchSearchSource1=c||{}}a.prototype.searchImpl=function(a,c,d){"use strict";if(a&&this.$RegexMatchSearchSource2.test(a)){d=new(b("SearchableEntry"))({uniqueID:a,title:a,type:this.$RegexMatchSearchSource3,auxiliaryData:babelHelpers["extends"]({},this.$RegexMatchSearchSource1,{isRegexEntry:!0})});c([d],a);return}c([],a)};e.exports=a}),null);
__d("XCommerceSelfServeMerchantNUXSeenController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/commerce/self-serve/merchant/mark-nux-seen/",{page_id:{type:"Int",required:!0},nux_type:{type:"Enum",required:!0,enumType:1},event:{type:"Enum",defaultValue:"Actn_NuxSeen",enumType:1}})}),null);
__d("XStickerPhotoEditorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/photos/editor/sticker_editor/",{grid_id:{type:"String"},feedback_id:{type:"String"},target_type:{type:"Enum",required:!0,enumType:1},photo_fbid:{type:"Int",required:!0},latest_fbid:{type:"Int"},initial_tab:{type:"Enum",enumType:1},encrypted_photo_id:{type:"String"},enable_text:{type:"Bool",defaultValue:!0},enable_stickers:{type:"Bool",defaultValue:!0},enable_tagging:{type:"Bool",defaultValue:!0},enable_square_crop_mode:{type:"Bool",defaultValue:!0},aspect_ratio:{type:"Float"}})}),null);